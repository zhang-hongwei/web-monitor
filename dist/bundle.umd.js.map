{"version":3,"file":"bundle.umd.js","sources":["../utils/config.js","../system/index.js","../utils/index.js","../performance.js","../ajaxHook/xhr-hook.js","../ajaxHook/xhr-proxy.js","../error/index.js","../index.js"],"sourcesContent":["var Config = {\r\n    DEBUG: false,\r\n    LIB_VERSION: '2.35.0'\r\n};\r\n\r\nexport default Config;\r\n","class platform {\r\n  constructor() {\r\n    this._platform = {};\r\n    this.objectTypes = {\r\n      function: true,\r\n      object: true,\r\n    };\r\n\r\n    this._root = (this.objectTypes[typeof window] && window) || this;\r\n    this.oldRoot = this.root;\r\n    this.freeExports = this.objectTypes[typeof exports] && exports;\r\n    this.freeModule =\r\n      this.objectTypes[typeof module] && module && !module.nodeType && module;\r\n    this.freeGlobal =\r\n      this.freeExports &&\r\n      this.freeModule &&\r\n      typeof global == \"object\" &&\r\n      global;\r\n    if (\r\n      this.freeGlobal &&\r\n      (this.freeGlobal.global === this.freeGlobal ||\r\n        this.freeGlobal.window === this.freeGlobal ||\r\n        this.freeGlobal.self === this.freeGlobal)\r\n    ) {\r\n      this.root = this.freeGlobal;\r\n    }\r\n\r\n    this.maxSafeInteger = Math.pow(2, 53) - 1;\r\n    this.reOpera = /\\bOpera/;\r\n    this.thisBinding = this;\r\n    this.objectProto = Object.prototype;\r\n    this.hasOwnProperty = this.objectProto.hasOwnProperty;\r\n    this.toString = this.objectProto.toString;\r\n\r\n    this.init();\r\n  }\r\n\r\n  capitalize(string) {\r\n    string = String(string);\r\n    return string.charAt(0).toUpperCase() + string.slice(1);\r\n  }\r\n\r\n  cleanupOS(os, pattern, label) {\r\n    let data = {\r\n      \"10.0\": \"10\",\r\n      \"6.4\": \"10 Technical Preview\",\r\n      \"6.3\": \"8.1\",\r\n      \"6.2\": \"8\",\r\n      \"6.1\": \"Server 2008 R2 / 7\",\r\n      \"6.0\": \"Server 2008 / Vista\",\r\n      \"5.2\": \"Server 2003 / XP 64-bit\",\r\n      \"5.1\": \"XP\",\r\n      \"5.01\": \"2000 SP1\",\r\n      \"5.0\": \"2000\",\r\n      \"4.0\": \"NT\",\r\n      \"4.90\": \"ME\",\r\n    };\r\n    // Detect Windows version from platform tokens.\r\n    if (\r\n      pattern &&\r\n      label &&\r\n      /^Win/i.test(os) &&\r\n      !/^Windows Phone /i.test(os) &&\r\n      (data = data[/[\\d.]+$/.exec(os)])\r\n    ) {\r\n      os = \"Windows \" + data;\r\n    }\r\n    // Correct character case and cleanup string.\r\n    os = String(os);\r\n\r\n    if (pattern && label) {\r\n      os = os.replace(RegExp(pattern, \"i\"), label);\r\n    }\r\n\r\n    os = this.format(\r\n      os\r\n        .replace(/ ce$/i, \" CE\")\r\n        .replace(/\\bhpw/i, \"web\")\r\n        .replace(/\\bMacintosh\\b/, \"Mac OS\")\r\n        .replace(/_PowerPC\\b/i, \" OS\")\r\n        .replace(/\\b(OS X) [^ \\d]+/i, \"$1\")\r\n        .replace(/\\bMac (OS X)\\b/, \"$1\")\r\n        .replace(/\\/(\\d)/, \" $1\")\r\n        .replace(/_/g, \".\")\r\n        .replace(/(?: BePC|[ .]*fc[ \\d.]+)$/i, \"\")\r\n        .replace(/\\bx86\\.64\\b/gi, \"x86_64\")\r\n        .replace(/\\b(Windows Phone) OS\\b/, \"$1\")\r\n        .replace(/\\b(Chrome OS \\w+) [\\d.]+\\b/, \"$1\")\r\n        .split(\" on \")[0]\r\n    );\r\n\r\n    return os;\r\n  }\r\n  each(object, callback) {\r\n    let index = -1,\r\n      length = object ? object.length : 0;\r\n\r\n    if (\r\n      typeof length == \"number\" &&\r\n      length > -1 &&\r\n      length <= this.maxSafeInteger\r\n    ) {\r\n      while (++index < length) {\r\n        callback(object[index], index, object);\r\n      }\r\n    } else {\r\n      this.forOwn(object, callback);\r\n    }\r\n  }\r\n\r\n  format(string) {\r\n    string = this.trim(string);\r\n    return /^(?:webOS|i(?:OS|P))/.test(string)\r\n      ? string\r\n      : this.capitalize(string);\r\n  }\r\n\r\n  forOwn(object, callback) {\r\n    for (let key in object) {\r\n      if (hasOwnProperty.call(object, key)) {\r\n        callback(object[key], key, object);\r\n      }\r\n    }\r\n  }\r\n\r\n  getClassOf(value) {\r\n    return value == null\r\n      ? this.capitalize(value)\r\n      : toString.call(value).slice(8, -1);\r\n  }\r\n\r\n  isHostType(object, property) {\r\n    let type = object != null ? typeof object[property] : \"number\";\r\n    return (\r\n      !/^(?:boolean|number|string|undefined)$/.test(type) &&\r\n      (type == \"object\" ? !!object[property] : true)\r\n    );\r\n  }\r\n\r\n  qualify(string) {\r\n    return String(string).replace(/([ -])(?!$)/g, \"$1?\");\r\n  }\r\n\r\n  reduce(array, callback) {\r\n    let accumulator = null;\r\n    this.each(array, function (value, index) {\r\n      accumulator = callback(accumulator, value, index, array);\r\n    });\r\n    return accumulator;\r\n  }\r\n\r\n  trim(string) {\r\n    return String(string).replace(/^ +| +$/g, \"\");\r\n  }\r\n\r\n  parse(ua) {\r\n    let _this = this;\r\n    let context = this._root;\r\n    let isCustomContext =\r\n      ua && typeof ua == \"object\" && this.getClassOf(ua) != \"String\";\r\n\r\n    if (isCustomContext) {\r\n      context = ua;\r\n      ua = null;\r\n    }\r\n\r\n    let nav = context.navigator || {};\r\n    let userAgent = nav.userAgent || \"\";\r\n\r\n    ua || (ua = userAgent);\r\n\r\n    let isModuleScope = isCustomContext || this.thisBinding == this.oldRoot;\r\n\r\n    let likeChrome = isCustomContext\r\n      ? !!nav.likeChrome\r\n      : /\\bChrome\\b/.test(ua) && !/internal|\\n/i.test(toString.toString());\r\n\r\n    let objectClass = \"Object\",\r\n      airRuntimeClass = isCustomContext\r\n        ? objectClass\r\n        : \"ScriptBridgingProxyObject\",\r\n      enviroClass = isCustomContext ? objectClass : \"Environment\",\r\n      javaClass =\r\n        isCustomContext && context.java\r\n          ? \"JavaPackage\"\r\n          : this.getClassOf(context.java),\r\n      phantomClass = isCustomContext ? objectClass : \"RuntimeObject\";\r\n\r\n    let java = /\\bJava/.test(javaClass) && context.java;\r\n    let rhino = java && this.getClassOf(context.environment) == enviroClass;\r\n    let alpha = java ? \"a\" : \"\\u03b1\";\r\n    let beta = java ? \"b\" : \"\\u03b2\";\r\n    let doc = context.document || {};\r\n    let opera = context.operamini || context.opera;\r\n    let operaClass = null;\r\n    operaClass = this.reOpera.test(\r\n      (operaClass =\r\n        isCustomContext && opera ? opera[\"[[Class]]\"] : this.getClassOf(opera))\r\n    )\r\n      ? operaClass\r\n      : (opera = null);\r\n    let data;\r\n    let arch = ua;\r\n    let description = [];\r\n    let prerelease = null;\r\n    let useFeatures = ua == userAgent;\r\n    let version =\r\n      useFeatures &&\r\n      opera &&\r\n      typeof opera.version == \"function\" &&\r\n      opera.version();\r\n    let isSpecialCasedOS;\r\n\r\n    let layout = getLayout.call(this, [\r\n      { label: \"EdgeHTML\", pattern: \"(?:Edge|EdgA|EdgiOS)\" },\r\n      \"Trident\",\r\n      { label: \"WebKit\", pattern: \"AppleWebKit\" },\r\n      \"iCab\",\r\n      \"Presto\",\r\n      \"NetFront\",\r\n      \"Tasman\",\r\n      \"KHTML\",\r\n      \"Gecko\",\r\n    ]);\r\n\r\n    /* Detectable browser names (order is important). */\r\n    let name = getName([\r\n      \"Adobe AIR\",\r\n      \"Arora\",\r\n      \"Avant Browser\",\r\n      \"Breach\",\r\n      \"Camino\",\r\n      \"Electron\",\r\n      \"Epiphany\",\r\n      \"Fennec\",\r\n      \"Flock\",\r\n      \"Galeon\",\r\n      \"GreenBrowser\",\r\n      \"iCab\",\r\n      \"Iceweasel\",\r\n      \"K-Meleon\",\r\n      \"Konqueror\",\r\n      \"Lunascape\",\r\n      \"Maxthon\",\r\n      { label: \"Microsoft Edge\", pattern: \"(?:Edge|Edg|EdgA|EdgiOS)\" },\r\n      \"Midori\",\r\n      \"Nook Browser\",\r\n      \"PaleMoon\",\r\n      \"PhantomJS\",\r\n      \"Raven\",\r\n      \"Rekonq\",\r\n      \"RockMelt\",\r\n      { label: \"Samsung Internet\", pattern: \"SamsungBrowser\" },\r\n      \"SeaMonkey\",\r\n      { label: \"Silk\", pattern: \"(?:Cloud9|Silk-Accelerated)\" },\r\n      \"Sleipnir\",\r\n      \"SlimBrowser\",\r\n      { label: \"SRWare Iron\", pattern: \"Iron\" },\r\n      \"Sunrise\",\r\n      \"Swiftfox\",\r\n      \"Waterfox\",\r\n      \"WebPositive\",\r\n      \"Opera Mini\",\r\n      { label: \"Opera Mini\", pattern: \"OPiOS\" },\r\n      \"Opera\",\r\n      { label: \"Opera\", pattern: \"OPR\" },\r\n      \"Chrome\",\r\n      { label: \"Chrome Mobile\", pattern: \"(?:CriOS|CrMo)\" },\r\n      { label: \"Firefox\", pattern: \"(?:Firefox|Minefield)\" },\r\n      { label: \"Firefox for iOS\", pattern: \"FxiOS\" },\r\n      { label: \"IE\", pattern: \"IEMobile\" },\r\n      { label: \"IE\", pattern: \"MSIE\" },\r\n      \"Safari\",\r\n    ]);\r\n\r\n    let product = getProduct([\r\n      { label: \"BlackBerry\", pattern: \"BB10\" },\r\n      \"BlackBerry\",\r\n      { label: \"Galaxy S\", pattern: \"GT-I9000\" },\r\n      { label: \"Galaxy S2\", pattern: \"GT-I9100\" },\r\n      { label: \"Galaxy S3\", pattern: \"GT-I9300\" },\r\n      { label: \"Galaxy S4\", pattern: \"GT-I9500\" },\r\n      { label: \"Galaxy S5\", pattern: \"SM-G900\" },\r\n      { label: \"Galaxy S6\", pattern: \"SM-G920\" },\r\n      { label: \"Galaxy S6 Edge\", pattern: \"SM-G925\" },\r\n      { label: \"Galaxy S7\", pattern: \"SM-G930\" },\r\n      { label: \"Galaxy S7 Edge\", pattern: \"SM-G935\" },\r\n      \"Google TV\",\r\n      \"Lumia\",\r\n      \"iPad\",\r\n      \"iPod\",\r\n      \"iPhone\",\r\n      \"Kindle\",\r\n      { label: \"Kindle Fire\", pattern: \"(?:Cloud9|Silk-Accelerated)\" },\r\n      \"Nexus\",\r\n      \"Nook\",\r\n      \"PlayBook\",\r\n      \"PlayStation Vita\",\r\n      \"PlayStation\",\r\n      \"TouchPad\",\r\n      \"Transformer\",\r\n      { label: \"Wii U\", pattern: \"WiiU\" },\r\n      \"Wii\",\r\n      \"Xbox One\",\r\n      { label: \"Xbox 360\", pattern: \"Xbox\" },\r\n      \"Xoom\",\r\n    ]);\r\n\r\n    let manufacturer = getManufacturer({\r\n      Apple: { iPad: 1, iPhone: 1, iPod: 1 },\r\n      Archos: {},\r\n      Amazon: { Kindle: 1, \"Kindle Fire\": 1 },\r\n      Asus: { Transformer: 1 },\r\n      \"Barnes & Noble\": { Nook: 1 },\r\n      BlackBerry: { PlayBook: 1 },\r\n      Google: { \"Google TV\": 1, Nexus: 1 },\r\n      HP: { TouchPad: 1 },\r\n      HTC: {},\r\n      LG: {},\r\n      Microsoft: { Xbox: 1, \"Xbox One\": 1 },\r\n      Motorola: { Xoom: 1 },\r\n      Nintendo: { \"Wii U\": 1, Wii: 1 },\r\n      Nokia: { Lumia: 1 },\r\n      Samsung: {\r\n        \"Galaxy S\": 1,\r\n        \"Galaxy S2\": 1,\r\n        \"Galaxy S3\": 1,\r\n        \"Galaxy S4\": 1,\r\n      },\r\n      Sony: { PlayStation: 1, \"PlayStation Vita\": 1 },\r\n    });\r\n\r\n    /* Detectable operating systems (order is important). */\r\n    let os = getOS([\r\n      \"Windows Phone\",\r\n      \"Android\",\r\n      \"CentOS\",\r\n      { label: \"Chrome OS\", pattern: \"CrOS\" },\r\n      \"Debian\",\r\n      \"Fedora\",\r\n      \"FreeBSD\",\r\n      \"Gentoo\",\r\n      \"Haiku\",\r\n      \"Kubuntu\",\r\n      \"Linux Mint\",\r\n      \"OpenBSD\",\r\n      \"Red Hat\",\r\n      \"SuSE\",\r\n      \"Ubuntu\",\r\n      \"Xubuntu\",\r\n      \"Cygwin\",\r\n      \"Symbian OS\",\r\n      \"hpwOS\",\r\n      \"webOS \",\r\n      \"webOS\",\r\n      \"Tablet OS\",\r\n      \"Tizen\",\r\n      \"Linux\",\r\n      \"Mac OS X\",\r\n      \"Macintosh\",\r\n      \"Mac\",\r\n      \"Windows 98;\",\r\n      \"Windows \",\r\n    ]);\r\n\r\n    function getLayout(guesses) {\r\n      return _this.reduce(guesses, function (result, guess) {\r\n        return (\r\n          result ||\r\n          (RegExp(\r\n            \"\\\\b\" + (guess.pattern || _this.qualify(guess)) + \"\\\\b\",\r\n            \"i\"\r\n          ).exec(ua) &&\r\n            (guess.label || guess))\r\n        );\r\n      });\r\n    }\r\n\r\n    function getManufacturer(guesses) {\r\n      return _this.reduce(guesses, function (result, value, key) {\r\n        // Lookup the manufacturer by product or scan the UA for the manufacturer.\r\n        return (\r\n          result ||\r\n          ((value[product] ||\r\n            value[/^[a-z]+(?: +[a-z]+\\b)*/i.exec(product)] ||\r\n            RegExp(\"\\\\b\" + _this.qualify(key) + \"(?:\\\\b|\\\\w*\\\\d)\", \"i\").exec(\r\n              ua\r\n            )) &&\r\n            key)\r\n        );\r\n      });\r\n    }\r\n\r\n    function getName(guesses) {\r\n      return _this.reduce(guesses, function (result, guess) {\r\n        return (\r\n          result ||\r\n          (RegExp(\r\n            \"\\\\b\" + (guess.pattern || _this.qualify(guess)) + \"\\\\b\",\r\n            \"i\"\r\n          ).exec(ua) &&\r\n            (guess.label || guess))\r\n        );\r\n      });\r\n    }\r\n\r\n    function getOS(guesses) {\r\n      return _this.reduce(guesses, function (result, guess) {\r\n        let pattern = guess.pattern || _this.qualify(guess);\r\n        if (\r\n          !result &&\r\n          (result = RegExp(\"\\\\b\" + pattern + \"(?:/[\\\\d.]+|[ \\\\w.]*)\", \"i\").exec(\r\n            ua\r\n          ))\r\n        ) {\r\n          result = _this.cleanupOS(result, pattern, guess.label || guess);\r\n        }\r\n        return result;\r\n      });\r\n    }\r\n\r\n    function getProduct(guesses) {\r\n      return _this.reduce(guesses, function (result, guess) {\r\n        let pattern = guess.pattern || _this.qualify(guess);\r\n        if (\r\n          !result &&\r\n          (result =\r\n            RegExp(\"\\\\b\" + pattern + \" *\\\\d+[.\\\\w_]*\", \"i\").exec(ua) ||\r\n            RegExp(\"\\\\b\" + pattern + \" *\\\\w+-[\\\\w]*\", \"i\").exec(ua) ||\r\n            RegExp(\r\n              \"\\\\b\" + pattern + \"(?:; *(?:[a-z]+[_-])?[a-z]+\\\\d+|[^ ();-]*)\",\r\n              \"i\"\r\n            ).exec(ua))\r\n        ) {\r\n          // Split by forward slash and append product version if needed.\r\n          if (\r\n            (result = String(\r\n              guess.label && !RegExp(pattern, \"i\").test(guess.label)\r\n                ? guess.label\r\n                : result\r\n            ).split(\"/\"))[1] &&\r\n            !/[\\d.]+/.test(result[0])\r\n          ) {\r\n            result[0] += \" \" + result[1];\r\n          }\r\n          // Correct character case and cleanup string.\r\n          guess = guess.label || guess;\r\n          result = _this.format(\r\n            result[0]\r\n              .replace(RegExp(pattern, \"i\"), guess)\r\n              .replace(RegExp(\"; *(?:\" + guess + \"[_-])?\", \"i\"), \" \")\r\n              .replace(RegExp(\"(\" + guess + \")[-_.]?(\\\\w)\", \"i\"), \"$1 $2\")\r\n          );\r\n        }\r\n        return result;\r\n      });\r\n    }\r\n\r\n    function getVersion(patterns) {\r\n      return _this.reduce(patterns, function (result, pattern) {\r\n        return (\r\n          result ||\r\n          (RegExp(\r\n            pattern +\r\n              \"(?:-[\\\\d.]+/|(?: for [\\\\w-]+)?[ /-])([\\\\d.]+[^ ();/_-]*)\",\r\n            \"i\"\r\n          ).exec(ua) || 0)[1] ||\r\n          null\r\n        );\r\n      });\r\n    }\r\n\r\n    function toStringPlatform() {\r\n      return _this.description || \"\";\r\n    }\r\n\r\n    layout && (layout = [layout]);\r\n\r\n    if (manufacturer && !product) {\r\n      product = getProduct([manufacturer]);\r\n    }\r\n\r\n    if ((data = /\\bGoogle TV\\b/.exec(product))) {\r\n      product = data[0];\r\n    }\r\n\r\n    if (/\\bSimulator\\b/i.test(ua)) {\r\n      product = (product ? product + \" \" : \"\") + \"Simulator\";\r\n    }\r\n\r\n    if (name == \"Opera Mini\" && /\\bOPiOS\\b/.test(ua)) {\r\n      description.push(\"running in Turbo/Uncompressed mode\");\r\n    }\r\n \r\n    if (name == \"IE\" && /\\blike iPhone OS\\b/.test(ua)) {\r\n      data = this.parse(ua.replace(/like iPhone OS/, \"\"));\r\n      manufacturer = data.manufacturer;\r\n      product = data.product;\r\n    }\r\n\r\n    else if (/^iP/.test(product)) {\r\n      name || (name = \"Safari\");\r\n      os =\r\n        \"iOS\" +\r\n        ((data = / OS ([\\d_]+)/i.exec(ua))\r\n          ? \" \" + data[1].replace(/_/g, \".\")\r\n          : \"\");\r\n    }\r\n    // Detect Kubuntu.\r\n    else if (name == \"Konqueror\" && !/buntu/i.test(os)) {\r\n      os = \"Kubuntu\";\r\n    }\r\n    // Detect Android browsers.\r\n    else if (\r\n      (manufacturer &&\r\n        manufacturer != \"Google\" &&\r\n        ((/Chrome/.test(name) && !/\\bMobile Safari\\b/i.test(ua)) ||\r\n          /\\bVita\\b/.test(product))) ||\r\n      (/\\bAndroid\\b/.test(os) &&\r\n        /^Chrome/.test(name) &&\r\n        /\\bVersion\\//i.test(ua))\r\n    ) {\r\n      name = \"Android Browser\";\r\n      os = /\\bAndroid\\b/.test(os) ? os : \"Android\";\r\n    }\r\n    // Detect Silk desktop/accelerated modes.\r\n    else if (name == \"Silk\") {\r\n      if (!/\\bMobi/i.test(ua)) {\r\n        os = \"Android\";\r\n        description.unshift(\"desktop mode\");\r\n      }\r\n      if (/Accelerated *= *true/i.test(ua)) {\r\n        description.unshift(\"accelerated\");\r\n      }\r\n    }\r\n    // Detect PaleMoon identifying as Firefox.\r\n    else if (name == \"PaleMoon\" && (data = /\\bFirefox\\/([\\d.]+)\\b/.exec(ua))) {\r\n      description.push(\"identifying as Firefox \" + data[1]);\r\n    }\r\n    // Detect Firefox OS and products running Firefox.\r\n    else if (name == \"Firefox\" && (data = /\\b(Mobile|Tablet|TV)\\b/i.exec(ua))) {\r\n      os || (os = \"Firefox OS\");\r\n      product || (product = data[1]);\r\n    }\r\n    // Detect false positives for Firefox/Safari.\r\n    else if (\r\n      !name ||\r\n      (data = !/\\bMinefield\\b/i.test(ua) && /\\b(?:Firefox|Safari)\\b/.exec(name))\r\n    ) {\r\n      // Escape the `/` for Firefox 1.\r\n      if (\r\n        name &&\r\n        !product &&\r\n        /[\\/,]|^[^(]+?\\)/.test(ua.slice(ua.indexOf(data + \"/\") + 8))\r\n      ) {\r\n        // Clear name of false positives.\r\n        name = null;\r\n      }\r\n      // Reassign a generic name.\r\n      if (\r\n        (data = product || manufacturer || os) &&\r\n        (product ||\r\n          manufacturer ||\r\n          /\\b(?:Android|Symbian OS|Tablet OS|webOS)\\b/.test(os))\r\n      ) {\r\n        name =\r\n          /[a-z]+(?: Hat)?/i.exec(/\\bAndroid\\b/.test(os) ? os : data) +\r\n          \" Browser\";\r\n      }\r\n    }\r\n    // Add Chrome version to description for Electron.\r\n    else if (\r\n      name == \"Electron\" &&\r\n      (data = (/\\bChrome\\/([\\d.]+)\\b/.exec(ua) || 0)[1])\r\n    ) {\r\n      description.push(\"Chromium \" + data);\r\n    }\r\n    // Detect non-Opera (Presto-based) versions (order is important).\r\n    if (!version) {\r\n      version = getVersion([\r\n        \"(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\\\d.]+$))\",\r\n        \"Version\",\r\n        _this.qualify(name),\r\n        \"(?:Firefox|Minefield|NetFront)\",\r\n      ]);\r\n    }\r\n    // Detect stubborn layout engines.\r\n    if (\r\n      (data =\r\n        (layout == \"iCab\" && parseFloat(version) > 3 && \"WebKit\") ||\r\n        (/\\bOpera\\b/.test(name) && (/\\bOPR\\b/.test(ua) ? \"Blink\" : \"Presto\")) ||\r\n        (/\\b(?:Midori|Nook|Safari)\\b/i.test(ua) &&\r\n          !/^(?:Trident|EdgeHTML)$/.test(layout) &&\r\n          \"WebKit\") ||\r\n        (!layout &&\r\n          /\\bMSIE\\b/i.test(ua) &&\r\n          (os == \"Mac OS\" ? \"Tasman\" : \"Trident\")) ||\r\n        (layout == \"WebKit\" &&\r\n          /\\bPlayStation\\b(?! Vita\\b)/i.test(name) &&\r\n          \"NetFront\"))\r\n    ) {\r\n      layout = [data];\r\n    }\r\n    // Detect Windows Phone 7 desktop mode.\r\n    if (\r\n      name == \"IE\" &&\r\n      (data = (/; *(?:XBLWP|ZuneWP)(\\d+)/i.exec(ua) || 0)[1])\r\n    ) {\r\n      name += \" Mobile\";\r\n      os = \"Windows Phone \" + (/\\+$/.test(data) ? data : data + \".x\");\r\n      description.unshift(\"desktop mode\");\r\n    }\r\n    // Detect Windows Phone 8.x desktop mode.\r\n    else if (/\\bWPDesktop\\b/i.test(ua)) {\r\n      name = \"IE Mobile\";\r\n      os = \"Windows Phone 8.x\";\r\n      description.unshift(\"desktop mode\");\r\n      version || (version = (/\\brv:([\\d.]+)/.exec(ua) || 0)[1]);\r\n    }\r\n    // Detect IE 11 identifying as other browsers.\r\n    else if (\r\n      name != \"IE\" &&\r\n      layout == \"Trident\" &&\r\n      (data = /\\brv:([\\d.]+)/.exec(ua))\r\n    ) {\r\n      if (name) {\r\n        description.push(\r\n          \"identifying as \" + name + (version ? \" \" + version : \"\")\r\n        );\r\n      }\r\n      name = \"IE\";\r\n      version = data[1];\r\n    }\r\n    // Leverage environment features.\r\n    if (useFeatures) {\r\n      if (this.isHostType(context, \"global\")) {\r\n        if (java) {\r\n          data = java.lang.System;\r\n          arch = data.getProperty(\"os.arch\");\r\n          os =\r\n            os ||\r\n            data.getProperty(\"os.name\") + \" \" + data.getProperty(\"os.version\");\r\n        }\r\n        if (rhino) {\r\n          try {\r\n            version = context.require(\"ringo/engine\").version.join(\".\");\r\n            name = \"RingoJS\";\r\n          } catch (e) {\r\n            if (\r\n              (data = context.system) &&\r\n              data.global.system == context.system\r\n            ) {\r\n              name = \"Narwhal\";\r\n              os || (os = data[0].os || null);\r\n            }\r\n          }\r\n          if (!name) {\r\n            name = \"Rhino\";\r\n          }\r\n        } else if (\r\n          typeof context.process == \"object\" &&\r\n          !context.process.browser &&\r\n          (data = context.process)\r\n        ) {\r\n          if (typeof data.versions == \"object\") {\r\n            if (typeof data.versions.electron == \"string\") {\r\n              description.push(\"Node \" + data.versions.node);\r\n              name = \"Electron\";\r\n              version = data.versions.electron;\r\n            } else if (typeof data.versions.nw == \"string\") {\r\n              description.push(\r\n                \"Chromium \" + version,\r\n                \"Node \" + data.versions.node\r\n              );\r\n              name = \"NW.js\";\r\n              version = data.versions.nw;\r\n            }\r\n          }\r\n          if (!name) {\r\n            name = \"Node.js\";\r\n            arch = data.arch;\r\n            os = data.platform;\r\n            version = /[\\d.]+/.exec(data.version);\r\n            version = version ? version[0] : null;\r\n          }\r\n        }\r\n      }\r\n      // Detect Adobe AIR.\r\n      else if (this.getClassOf((data = context.runtime)) == airRuntimeClass) {\r\n        name = \"Adobe AIR\";\r\n        os = data.flash.system.Capabilities.os;\r\n      }\r\n      // Detect PhantomJS.\r\n      else if (this.getClassOf((data = context.phantom)) == phantomClass) {\r\n        name = \"PhantomJS\";\r\n        version =\r\n          (data = data.version || null) &&\r\n          data.major + \".\" + data.minor + \".\" + data.patch;\r\n      }\r\n      // Detect IE compatibility modes.\r\n      else if (\r\n        typeof doc.documentMode == \"number\" &&\r\n        (data = /\\bTrident\\/(\\d+)/i.exec(ua))\r\n      ) {\r\n        // We're in compatibility mode when the Trident version + 4 doesn't\r\n        // equal the document mode.\r\n        version = [version, doc.documentMode];\r\n        if ((data = +data[1] + 4) != version[1]) {\r\n          description.push(\"IE \" + version[1] + \" mode\");\r\n          layout && (layout[1] = \"\");\r\n          version[1] = data;\r\n        }\r\n        version = name == \"IE\" ? String(version[1].toFixed(1)) : version[0];\r\n      }\r\n      // Detect IE 11 masking as other browsers.\r\n      else if (\r\n        typeof doc.documentMode == \"number\" &&\r\n        /^(?:Chrome|Firefox)\\b/.test(name)\r\n      ) {\r\n        description.push(\"masking as \" + name + \" \" + version);\r\n        name = \"IE\";\r\n        version = \"11.0\";\r\n        layout = [\"Trident\"];\r\n        os = \"Windows\";\r\n      }\r\n      os = os && this.format(os);\r\n    }\r\n    // Detect prerelease phases.\r\n    if (\r\n      version &&\r\n      (data =\r\n        /(?:[ab]|dp|pre|[ab]\\d+pre)(?:\\d+\\+?)?$/i.exec(version) ||\r\n        /(?:alpha|beta)(?: ?\\d)?/i.exec(\r\n          ua + \";\" + (useFeatures && nav.appMinorVersion)\r\n        ) ||\r\n        (/\\bMinefield\\b/i.test(ua) && \"a\"))\r\n    ) {\r\n      prerelease = /b/i.test(data) ? \"beta\" : \"alpha\";\r\n      version =\r\n        version.replace(RegExp(data + \"\\\\+?$\"), \"\") +\r\n        (prerelease == \"beta\" ? beta : alpha) +\r\n        (/\\d+\\+?/.exec(data) || \"\");\r\n    }\r\n    // Detect Firefox Mobile.\r\n    if (\r\n      name == \"Fennec\" ||\r\n      (name == \"Firefox\" && /\\b(?:Android|Firefox OS)\\b/.test(os))\r\n    ) {\r\n      name = \"Firefox Mobile\";\r\n    }\r\n    // Obscure Maxthon's unreliable version.\r\n    else if (name == \"Maxthon\" && version) {\r\n      version = version.replace(/\\.[\\d.]+/, \".x\");\r\n    }\r\n    // Detect Xbox 360 and Xbox One.\r\n    else if (/\\bXbox\\b/i.test(product)) {\r\n      if (product == \"Xbox 360\") {\r\n        os = null;\r\n      }\r\n      if (product == \"Xbox 360\" && /\\bIEMobile\\b/.test(ua)) {\r\n        description.unshift(\"mobile mode\");\r\n      }\r\n    }\r\n    // Add mobile postfix.\r\n    else if (\r\n      (/^(?:Chrome|IE|Opera)$/.test(name) ||\r\n        (name && !product && !/Browser|Mobi/.test(name))) &&\r\n      (os == \"Windows CE\" || /Mobi/i.test(ua))\r\n    ) {\r\n      name += \" Mobile\";\r\n    }\r\n    // Detect IE platform preview.\r\n    else if (name == \"IE\" && useFeatures) {\r\n      try {\r\n        if (context.external === null) {\r\n          description.unshift(\"platform preview\");\r\n        }\r\n      } catch (e) {\r\n        description.unshift(\"embedded\");\r\n      }\r\n    } else if (\r\n      (/\\bBlackBerry\\b/.test(product) || /\\bBB10\\b/.test(ua)) &&\r\n      (data =\r\n        (RegExp(product.replace(/ +/g, \" *\") + \"/([.\\\\d]+)\", \"i\").exec(ua) ||\r\n          0)[1] || version)\r\n    ) {\r\n      data = [data, /BB10/.test(ua)];\r\n      os =\r\n        (data[1]\r\n          ? ((product = null), (manufacturer = \"BlackBerry\"))\r\n          : \"Device Software\") +\r\n        \" \" +\r\n        data[0];\r\n      version = null;\r\n    } else if (\r\n      this != this.forOwn &&\r\n      product != \"Wii\" &&\r\n      ((useFeatures && opera) ||\r\n        (/Opera/.test(name) && /\\b(?:MSIE|Firefox)\\b/i.test(ua)) ||\r\n        (name == \"Firefox\" && /\\bOS X (?:\\d+\\.){2,}/.test(os)) ||\r\n        (name == \"IE\" &&\r\n          ((os && !/^Win/.test(os) && version > 5.5) ||\r\n            (/\\bWindows XP\\b/.test(os) && version > 8) ||\r\n            (version == 8 && !/\\bTrident\\b/.test(ua))))) &&\r\n      !this.reOpera.test(\r\n        (data = this.parse.call(\r\n          this.forOwn,\r\n          ua.replace(this.reOpera, \"\") + \";\"\r\n        ))\r\n      ) &&\r\n      data.name\r\n    ) {\r\n      // When \"identifying\", the UA contains both Opera and the other browser's name.\r\n      data = \"ing as \" + data.name + ((data = data.version) ? \" \" + data : \"\");\r\n      if (this.reOpera.test(name)) {\r\n        if (/\\bIE\\b/.test(data) && os == \"Mac OS\") {\r\n          os = null;\r\n        }\r\n        data = \"identify\" + data;\r\n      }\r\n      // When \"masking\", the UA contains only the other browser's name.\r\n      else {\r\n        data = \"mask\" + data;\r\n        if (operaClass) {\r\n          name = this.format(operaClass.replace(/([a-z])([A-Z])/g, \"$1 $2\"));\r\n        } else {\r\n          name = \"Opera\";\r\n        }\r\n        if (/\\bIE\\b/.test(data)) {\r\n          os = null;\r\n        }\r\n        if (!useFeatures) {\r\n          version = null;\r\n        }\r\n      }\r\n      layout = [\"Presto\"];\r\n      description.push(data);\r\n    }\r\n\r\n    if ((data = (/\\bAppleWebKit\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])) {\r\n      data = [parseFloat(data.replace(/\\.(\\d)$/, \".0$1\")), data];\r\n      // Nightly builds are postfixed with a \"+\".\r\n      if (name == \"Safari\" && data[1].slice(-1) == \"+\") {\r\n        name = \"WebKit Nightly\";\r\n        prerelease = \"alpha\";\r\n        version = data[1].slice(0, -1);\r\n      } else if (\r\n        version == data[1] ||\r\n        version == (data[2] = (/\\bSafari\\/([\\d.]+\\+?)/i.exec(ua) || 0)[1])\r\n      ) {\r\n        version = null;\r\n      }\r\n\r\n      data[1] = (/\\bChrome\\/([\\d.]+)/i.exec(ua) || 0)[1];\r\n\r\n      if (\r\n        data[0] == 537.36 &&\r\n        data[2] == 537.36 &&\r\n        parseFloat(data[1]) >= 28 &&\r\n        layout == \"WebKit\"\r\n      ) {\r\n        layout = [\"Blink\"];\r\n      }\r\n\r\n      if (!useFeatures || (!likeChrome && !data[1])) {\r\n        layout && (layout[1] = \"like Safari\");\r\n        data =\r\n          ((data = data[0]),\r\n          data < 400\r\n            ? 1\r\n            : data < 500\r\n            ? 2\r\n            : data < 526\r\n            ? 3\r\n            : data < 533\r\n            ? 4\r\n            : data < 534\r\n            ? \"4+\"\r\n            : data < 535\r\n            ? 5\r\n            : data < 537\r\n            ? 6\r\n            : data < 538\r\n            ? 7\r\n            : data < 601\r\n            ? 8\r\n            : \"8\");\r\n      } else {\r\n        layout && (layout[1] = \"like Chrome\");\r\n        data =\r\n          data[1] ||\r\n          ((data = data[0]),\r\n          data < 530\r\n            ? 1\r\n            : data < 532\r\n            ? 2\r\n            : data < 532.05\r\n            ? 3\r\n            : data < 533\r\n            ? 4\r\n            : data < 534.03\r\n            ? 5\r\n            : data < 534.07\r\n            ? 6\r\n            : data < 534.1\r\n            ? 7\r\n            : data < 534.13\r\n            ? 8\r\n            : data < 534.16\r\n            ? 9\r\n            : data < 534.24\r\n            ? 10\r\n            : data < 534.3\r\n            ? 11\r\n            : data < 535.01\r\n            ? 12\r\n            : data < 535.02\r\n            ? \"13+\"\r\n            : data < 535.07\r\n            ? 15\r\n            : data < 535.11\r\n            ? 16\r\n            : data < 535.19\r\n            ? 17\r\n            : data < 536.05\r\n            ? 18\r\n            : data < 536.1\r\n            ? 19\r\n            : data < 537.01\r\n            ? 20\r\n            : data < 537.11\r\n            ? \"21+\"\r\n            : data < 537.13\r\n            ? 23\r\n            : data < 537.18\r\n            ? 24\r\n            : data < 537.24\r\n            ? 25\r\n            : data < 537.36\r\n            ? 26\r\n            : layout != \"Blink\"\r\n            ? \"27\"\r\n            : \"28\");\r\n      }\r\n      // Add the postfix of \".x\" or \"+\" for approximate versions.\r\n      layout &&\r\n        (layout[1] +=\r\n          \" \" +\r\n          (data +=\r\n            typeof data == \"number\" ? \".x\" : /[.+]/.test(data) ? \"\" : \"+\"));\r\n      // Obscure version for some Safari 1-2 releases.\r\n      if (name == \"Safari\" && (!version || parseInt(version) > 45)) {\r\n        version = data;\r\n      }\r\n    }\r\n    // Detect Opera desktop modes.\r\n    if (name == \"Opera\" && (data = /\\bzbov|zvav$/.exec(os))) {\r\n      name += \" \";\r\n      description.unshift(\"desktop mode\");\r\n      if (data == \"zvav\") {\r\n        name += \"Mini\";\r\n        version = null;\r\n      } else {\r\n        name += \"Mobile\";\r\n      }\r\n      os = os.replace(RegExp(\" *\" + data + \"$\"), \"\");\r\n    }\r\n    // Detect Chrome desktop mode.\r\n    else if (name == \"Safari\" && /\\bChrome\\b/.exec(layout && layout[1])) {\r\n      description.unshift(\"desktop mode\");\r\n      name = \"Chrome Mobile\";\r\n      version = null;\r\n\r\n      if (/\\bOS X\\b/.test(os)) {\r\n        manufacturer = \"Apple\";\r\n        os = \"iOS 4.3+\";\r\n      } else {\r\n        os = null;\r\n      }\r\n    }\r\n    // Strip incorrect OS versions.\r\n    if (\r\n      version &&\r\n      version.indexOf((data = /[\\d.]+$/.exec(os))) == 0 &&\r\n      ua.indexOf(\"/\" + data + \"-\") > -1\r\n    ) {\r\n      os = this.trim(os.replace(data, \"\"));\r\n    }\r\n    // Add layout engine.\r\n    if (\r\n      layout &&\r\n      !/\\b(?:Avant|Nook)\\b/.test(name) &&\r\n      (/Browser|Lunascape|Maxthon/.test(name) ||\r\n        (name != \"Safari\" && /^iOS/.test(os) && /\\bSafari\\b/.test(layout[1])) ||\r\n        (/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(\r\n          name\r\n        ) &&\r\n          layout[1]))\r\n    ) {\r\n      (data = layout[layout.length - 1]) && description.push(data);\r\n    }\r\n    if (description.length) {\r\n      description = [\"(\" + description.join(\"; \") + \")\"];\r\n    }\r\n    if (manufacturer && product && product.indexOf(manufacturer) < 0) {\r\n      description.push(\"on \" + manufacturer);\r\n    }\r\n    if (product) {\r\n      description.push(\r\n        (/^on /.test(description[description.length - 1]) ? \"\" : \"on \") +\r\n          product\r\n      );\r\n    }\r\n    // Parse the OS into an object.\r\n    if (os) {\r\n      data = / ([\\d.+]+)$/.exec(os);\r\n      isSpecialCasedOS =\r\n        data && os.charAt(os.length - data[0].length - 1) == \"/\";\r\n      os = {\r\n        architecture: 32,\r\n        family: data && !isSpecialCasedOS ? os.replace(data[0], \"\") : os,\r\n        version: data ? data[1] : null,\r\n        toString: function () {\r\n          let version = this.version;\r\n          return (\r\n            this.family +\r\n            (version && !isSpecialCasedOS ? \" \" + version : \"\") +\r\n            (this.architecture == 64 ? \" 64-bit\" : \"\")\r\n          );\r\n        },\r\n      };\r\n    }\r\n\r\n    if (\r\n      (data = /\\b(?:AMD|IA|Win|WOW|x86_|x)64\\b/i.exec(arch)) &&\r\n      !/\\bi686\\b/i.test(arch)\r\n    ) {\r\n      if (os) {\r\n        os.architecture = 64;\r\n        os.family = os.family.replace(RegExp(\" *\" + data), \"\");\r\n      }\r\n      if (\r\n        name &&\r\n        (/\\bWOW64\\b/i.test(ua) ||\r\n          (useFeatures &&\r\n            /\\w(?:86|32)$/.test(nav.cpuClass || nav.platform) &&\r\n            !/\\bWin64; x64\\b/i.test(ua)))\r\n      ) {\r\n        description.unshift(\"32-bit\");\r\n      }\r\n    } else if (\r\n      os &&\r\n      /^OS X/.test(os.family) &&\r\n      name == \"Chrome\" &&\r\n      parseFloat(version) >= 39\r\n    ) {\r\n      os.architecture = 64;\r\n    }\r\n\r\n    ua || (ua = null);\r\n    this._platform.description = ua;\r\n    this._platform.layout = layout && layout[0];\r\n    this._platform.manufacturer = manufacturer;\r\n    this._platform.name = name;\r\n    this._platform.prerelease = prerelease;\r\n    this._platform.product = product;\r\n    this._platform.ua = ua;\r\n    this._platform.version = name && version;\r\n    this._platform.os = os || {\r\n      architecture: null,\r\n      family: null,\r\n      version: null,\r\n      toString: function () {\r\n        return \"null\";\r\n      },\r\n    };\r\n\r\n    this._platform.parse = this.parse;\r\n    this._platform.toString = toStringPlatform;\r\n\r\n    if (this._platform.version) {\r\n      description.unshift(version);\r\n    }\r\n    if (this._platform.name) {\r\n      description.unshift(name);\r\n    }\r\n    if (\r\n      os &&\r\n      name &&\r\n      !(os == String(os).split(\" \")[0] && (os == name.split(\" \")[0] || product))\r\n    ) {\r\n      description.push(product ? \"(\" + os + \")\" : \"on \" + os);\r\n    }\r\n    if (description.length) {\r\n      this._platform.description = description.join(\" \");\r\n    }\r\n    return this._platform;\r\n  }\r\n  init() {\r\n    this._platform = this.parse();\r\n    if (\r\n      typeof define == \"function\" &&\r\n      typeof define.amd == \"object\" &&\r\n      define.amd\r\n    ) {\r\n      this.root.platform = this._platform;\r\n      define(function () {\r\n        return this._platform;\r\n      });\r\n    } else if (this.freeExports && this.freeModule) {\r\n      this.forOwn(this._platform, function (value, key) {\r\n        this.freeExports[key] = value;\r\n      });\r\n    } else {\r\n      this._root.platform = this._platform;\r\n    }\r\n  }\r\n}\r\n\r\nexport default platform;\r\n\r\n// const os = new platform();\r\n// console.log(\"os===>\", os._platform);\r\n","/* eslint camelcase: \"off\", eqeqeq: \"off\" */\r\nimport Config from \"./config\";\r\nimport platform from \"../system/index\"\r\n\r\n// since es6 imports are static and we run unit tests from the console, window won't be defined when importing this file\r\nvar win;\r\nif (typeof window === \"undefined\") {\r\n  var loc = {\r\n    hostname: \"\",\r\n  };\r\n  win = {\r\n    navigator: { userAgent: \"\" },\r\n    document: {\r\n      location: loc,\r\n      referrer: \"\",\r\n    },\r\n    screen: { width: 0, height: 0 },\r\n    location: loc,\r\n  };\r\n} else {\r\n  win = window;\r\n}\r\n\r\n/*\r\n * Saved references to long variable names, so that closure compiler can\r\n * minimize file size.\r\n */\r\n\r\nvar ArrayProto = Array.prototype,\r\n  FuncProto = Function.prototype,\r\n  ObjProto = Object.prototype,\r\n  slice = ArrayProto.slice,\r\n  toString = ObjProto.toString,\r\n  hasOwnProperty = ObjProto.hasOwnProperty,\r\n  windowConsole = win.console,\r\n  navigator = win.navigator,\r\n  document = win.document,\r\n  windowOpera = win.opera,\r\n  screen = win.screen,\r\n  userAgent = navigator.userAgent;\r\n\r\nvar nativeBind = FuncProto.bind,\r\n  nativeForEach = ArrayProto.forEach,\r\n  nativeIndexOf = ArrayProto.indexOf,\r\n  nativeIsArray = Array.isArray,\r\n  breaker = {};\r\n\r\nvar _ = {\r\n  trim: function (str) {\r\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\r\n    return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\");\r\n  },\r\n};\r\n\r\n// Console override\r\nvar console = {\r\n  /** @type {function(...*)} */\r\n  log: function () {\r\n    if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\r\n      try {\r\n        windowConsole.log.apply(windowConsole, arguments);\r\n      } catch (err) {\r\n        _.each(arguments, function (arg) {\r\n          windowConsole.log(arg);\r\n        });\r\n      }\r\n    }\r\n  },\r\n  /** @type {function(...*)} */\r\n  error: function () {\r\n    if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\r\n      var args = [\"Mixpanel error:\"].concat(_.toArray(arguments));\r\n      try {\r\n        windowConsole.error.apply(windowConsole, args);\r\n      } catch (err) {\r\n        _.each(args, function (arg) {\r\n          windowConsole.error(arg);\r\n        });\r\n      }\r\n    }\r\n  },\r\n  /** @type {function(...*)} */\r\n  critical: function () {\r\n    if (!_.isUndefined(windowConsole) && windowConsole) {\r\n      var args = [\"Mixpanel error:\"].concat(_.toArray(arguments));\r\n      try {\r\n        windowConsole.error.apply(windowConsole, args);\r\n      } catch (err) {\r\n        _.each(args, function (arg) {\r\n          windowConsole.error(arg);\r\n        });\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\n// UNDERSCORE\r\n// Embed part of the Underscore Library\r\n_.bind = function (func, context) {\r\n  var args, bound;\r\n  if (nativeBind && func.bind === nativeBind) {\r\n    return nativeBind.apply(func, slice.call(arguments, 1));\r\n  }\r\n  if (!_.isFunction(func)) {\r\n    throw new TypeError();\r\n  }\r\n  args = slice.call(arguments, 2);\r\n  bound = function () {\r\n    if (!(this instanceof bound)) {\r\n      return func.apply(context, args.concat(slice.call(arguments)));\r\n    }\r\n    var ctor = {};\r\n    ctor.prototype = func.prototype;\r\n    var self = new ctor();\r\n    ctor.prototype = null;\r\n    var result = func.apply(self, args.concat(slice.call(arguments)));\r\n    if (Object(result) === result) {\r\n      return result;\r\n    }\r\n    return self;\r\n  };\r\n  return bound;\r\n};\r\n\r\n_.bind_instance_methods = function (obj) {\r\n  for (var func in obj) {\r\n    if (typeof obj[func] === \"function\") {\r\n      obj[func] = _.bind(obj[func], obj);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @param {*=} obj\r\n * @param {function(...*)=} iterator\r\n * @param {Object=} context\r\n */\r\n_.each = function (obj, iterator, context) {\r\n  if (obj === null || obj === undefined) {\r\n    return;\r\n  }\r\n  if (nativeForEach && obj.forEach === nativeForEach) {\r\n    obj.forEach(iterator, context);\r\n  } else if (obj.length === +obj.length) {\r\n    for (var i = 0, l = obj.length; i < l; i++) {\r\n      if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\r\n        return;\r\n      }\r\n    }\r\n  } else {\r\n    for (var key in obj) {\r\n      if (hasOwnProperty.call(obj, key)) {\r\n        if (iterator.call(context, obj[key], key, obj) === breaker) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n_.escapeHTML = function (s) {\r\n  var escaped = s;\r\n  if (escaped && _.isString(escaped)) {\r\n    escaped = escaped\r\n      .replace(/&/g, \"&amp;\")\r\n      .replace(/</g, \"&lt;\")\r\n      .replace(/>/g, \"&gt;\")\r\n      .replace(/\"/g, \"&quot;\")\r\n      .replace(/'/g, \"&#039;\");\r\n  }\r\n  return escaped;\r\n};\r\n\r\n_.extend = function (obj) {\r\n  _.each(slice.call(arguments, 1), function (source) {\r\n    for (var prop in source) {\r\n      if (source[prop] !== void 0) {\r\n        obj[prop] = source[prop];\r\n      }\r\n    }\r\n  });\r\n  return obj;\r\n};\r\n\r\n_.isArray =\r\n  nativeIsArray ||\r\n  function (obj) {\r\n    return toString.call(obj) === \"[object Array]\";\r\n  };\r\n\r\n// from a comment on http://dbj.org/dbj/?p=286\r\n// fails on only one very rare and deliberate custom object:\r\n// var bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\r\n_.isFunction = function (f) {\r\n  try {\r\n    return /^\\s*\\bfunction\\b/.test(f);\r\n  } catch (x) {\r\n    return false;\r\n  }\r\n};\r\n\r\n_.isArguments = function (obj) {\r\n  return !!(obj && hasOwnProperty.call(obj, \"callee\"));\r\n};\r\n\r\n_.toArray = function (iterable) {\r\n  if (!iterable) {\r\n    return [];\r\n  }\r\n  if (iterable.toArray) {\r\n    return iterable.toArray();\r\n  }\r\n  if (_.isArray(iterable)) {\r\n    return slice.call(iterable);\r\n  }\r\n  if (_.isArguments(iterable)) {\r\n    return slice.call(iterable);\r\n  }\r\n  return _.values(iterable);\r\n};\r\n\r\n_.keys = function (obj) {\r\n  var results = [];\r\n  if (obj === null) {\r\n    return results;\r\n  }\r\n  _.each(obj, function (value, key) {\r\n    results[results.length] = key;\r\n  });\r\n  return results;\r\n};\r\n\r\n_.values = function (obj) {\r\n  var results = [];\r\n  if (obj === null) {\r\n    return results;\r\n  }\r\n  _.each(obj, function (value) {\r\n    results[results.length] = value;\r\n  });\r\n  return results;\r\n};\r\n\r\n_.identity = function (value) {\r\n  return value;\r\n};\r\n\r\n_.include = function (obj, target) {\r\n  var found = false;\r\n  if (obj === null) {\r\n    return found;\r\n  }\r\n  if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\r\n    return obj.indexOf(target) != -1;\r\n  }\r\n  _.each(obj, function (value) {\r\n    if (found || (found = value === target)) {\r\n      return breaker;\r\n    }\r\n  });\r\n  return found;\r\n};\r\n\r\n_.includes = function (str, needle) {\r\n  return str.indexOf(needle) !== -1;\r\n};\r\n\r\n// Underscore Addons\r\n_.inherit = function (subclass, superclass) {\r\n  subclass.prototype = new superclass();\r\n  subclass.prototype.constructor = subclass;\r\n  subclass.superclass = superclass.prototype;\r\n  return subclass;\r\n};\r\n\r\n_.isObject = function (obj) {\r\n  return obj === Object(obj) && !_.isArray(obj);\r\n};\r\n\r\n_.isEmptyObject = function (obj) {\r\n  if (_.isObject(obj)) {\r\n    for (var key in obj) {\r\n      if (hasOwnProperty.call(obj, key)) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n_.isUndefined = function (obj) {\r\n  return obj === void 0;\r\n};\r\n\r\n_.isString = function (obj) {\r\n  return toString.call(obj) == \"[object String]\";\r\n};\r\n\r\n_.isDate = function (obj) {\r\n  return toString.call(obj) == \"[object Date]\";\r\n};\r\n\r\n_.isNumber = function (obj) {\r\n  return toString.call(obj) == \"[object Number]\";\r\n};\r\n\r\n_.isElement = function (obj) {\r\n  return !!(obj && obj.nodeType === 1);\r\n};\r\n\r\n_.encodeDates = function (obj) {\r\n  _.each(obj, function (v, k) {\r\n    if (_.isDate(v)) {\r\n      obj[k] = _.formatDate(v);\r\n    } else if (_.isObject(v)) {\r\n      obj[k] = _.encodeDates(v); // recurse\r\n    }\r\n  });\r\n  return obj;\r\n};\r\n\r\n_.timestamp = function () {\r\n  Date.now =\r\n    Date.now ||\r\n    function () {\r\n      return +new Date();\r\n    };\r\n  return Date.now();\r\n};\r\n\r\n_.formatDate = function (d) {\r\n  // YYYY-MM-DDTHH:MM:SS in UTC\r\n  function pad(n) {\r\n    return n < 10 ? \"0\" + n : n;\r\n  }\r\n  return (\r\n    d.getUTCFullYear() +\r\n    \"-\" +\r\n    pad(d.getUTCMonth() + 1) +\r\n    \"-\" +\r\n    pad(d.getUTCDate()) +\r\n    \"T\" +\r\n    pad(d.getUTCHours()) +\r\n    \":\" +\r\n    pad(d.getUTCMinutes()) +\r\n    \":\" +\r\n    pad(d.getUTCSeconds())\r\n  );\r\n};\r\n\r\n_.safewrap = function (f) {\r\n  return function () {\r\n    try {\r\n      return f.apply(this, arguments);\r\n    } catch (e) {\r\n      console.critical(\r\n        \"Implementation error. Please turn on debug and contact support@mixpanel.com.\"\r\n      );\r\n      if (Config.DEBUG) {\r\n        console.critical(e);\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\n_.safewrap_class = function (klass, functions) {\r\n  for (var i = 0; i < functions.length; i++) {\r\n    klass.prototype[functions[i]] = _.safewrap(klass.prototype[functions[i]]);\r\n  }\r\n};\r\n\r\n_.safewrap_instance_methods = function (obj) {\r\n  for (var func in obj) {\r\n    if (typeof obj[func] === \"function\") {\r\n      obj[func] = _.safewrap(obj[func]);\r\n    }\r\n  }\r\n};\r\n\r\n_.strip_empty_properties = function (p) {\r\n  var ret = {};\r\n  _.each(p, function (v, k) {\r\n    if (_.isString(v) && v.length > 0) {\r\n      ret[k] = v;\r\n    }\r\n  });\r\n  return ret;\r\n};\r\n\r\n/*\r\n * this function returns a copy of object after truncating it.  If\r\n * passed an Array or Object it will iterate through obj and\r\n * truncate all the values recursively.\r\n */\r\n_.truncate = function (obj, length) {\r\n  var ret;\r\n\r\n  if (typeof obj === \"string\") {\r\n    ret = obj.slice(0, length);\r\n  } else if (_.isArray(obj)) {\r\n    ret = [];\r\n    _.each(obj, function (val) {\r\n      ret.push(_.truncate(val, length));\r\n    });\r\n  } else if (_.isObject(obj)) {\r\n    ret = {};\r\n    _.each(obj, function (val, key) {\r\n      ret[key] = _.truncate(val, length);\r\n    });\r\n  } else {\r\n    ret = obj;\r\n  }\r\n\r\n  return ret;\r\n};\r\n\r\n_.JSONEncode = (function () {\r\n  return function (mixed_val) {\r\n    var value = mixed_val;\r\n    var quote = function (string) {\r\n      var escapable = /[\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g; // eslint-disable-line no-control-regex\r\n      var meta = {\r\n        // table of character substitutions\r\n        \"\\b\": \"\\\\b\",\r\n        \"\\t\": \"\\\\t\",\r\n        \"\\n\": \"\\\\n\",\r\n        \"\\f\": \"\\\\f\",\r\n        \"\\r\": \"\\\\r\",\r\n        '\"': '\\\\\"',\r\n        \"\\\\\": \"\\\\\\\\\",\r\n      };\r\n\r\n      escapable.lastIndex = 0;\r\n      return escapable.test(string)\r\n        ? '\"' +\r\n            string.replace(escapable, function (a) {\r\n              var c = meta[a];\r\n              return typeof c === \"string\"\r\n                ? c\r\n                : \"\\\\u\" + (\"0000\" + a.charCodeAt(0).toString(16)).slice(-4);\r\n            }) +\r\n            '\"'\r\n        : '\"' + string + '\"';\r\n    };\r\n\r\n    var str = function (key, holder) {\r\n      var gap = \"\";\r\n      var indent = \"    \";\r\n      var i = 0; // The loop counter.\r\n      var k = \"\"; // The member key.\r\n      var v = \"\"; // The member value.\r\n      var length = 0;\r\n      var mind = gap;\r\n      var partial = [];\r\n      var value = holder[key];\r\n\r\n      // If the value has a toJSON method, call it to obtain a replacement value.\r\n      if (\r\n        value &&\r\n        typeof value === \"object\" &&\r\n        typeof value.toJSON === \"function\"\r\n      ) {\r\n        value = value.toJSON(key);\r\n      }\r\n\r\n      // What happens next depends on the value's type.\r\n      switch (typeof value) {\r\n        case \"string\":\r\n          return quote(value);\r\n\r\n        case \"number\":\r\n          // JSON numbers must be finite. Encode non-finite numbers as null.\r\n          return isFinite(value) ? String(value) : \"null\";\r\n\r\n        case \"boolean\":\r\n        case \"null\":\r\n          // If the value is a boolean or null, convert it to a string. Note:\r\n          // typeof null does not produce 'null'. The case is included here in\r\n          // the remote chance that this gets fixed someday.\r\n\r\n          return String(value);\r\n\r\n        case \"object\":\r\n          // If the type is 'object', we might be dealing with an object or an array or\r\n          // null.\r\n          // Due to a specification blunder in ECMAScript, typeof null is 'object',\r\n          // so watch out for that case.\r\n          if (!value) {\r\n            return \"null\";\r\n          }\r\n\r\n          // Make an array to hold the partial results of stringifying this object value.\r\n          gap += indent;\r\n          partial = [];\r\n\r\n          // Is the value an array?\r\n          if (toString.apply(value) === \"[object Array]\") {\r\n            // The value is an array. Stringify every element. Use null as a placeholder\r\n            // for non-JSON values.\r\n\r\n            length = value.length;\r\n            for (i = 0; i < length; i += 1) {\r\n              partial[i] = str(i, value) || \"null\";\r\n            }\r\n\r\n            // Join all of the elements together, separated with commas, and wrap them in\r\n            // brackets.\r\n            v =\r\n              partial.length === 0\r\n                ? \"[]\"\r\n                : gap\r\n                ? \"[\\n\" + gap + partial.join(\",\\n\" + gap) + \"\\n\" + mind + \"]\"\r\n                : \"[\" + partial.join(\",\") + \"]\";\r\n            gap = mind;\r\n            return v;\r\n          }\r\n\r\n          // Iterate through all of the keys in the object.\r\n          for (k in value) {\r\n            if (hasOwnProperty.call(value, k)) {\r\n              v = str(k, value);\r\n              if (v) {\r\n                partial.push(quote(k) + (gap ? \": \" : \":\") + v);\r\n              }\r\n            }\r\n          }\r\n\r\n          // Join all of the member texts together, separated with commas,\r\n          // and wrap them in braces.\r\n          v =\r\n            partial.length === 0\r\n              ? \"{}\"\r\n              : gap\r\n              ? \"{\" + partial.join(\",\") + \"\" + mind + \"}\"\r\n              : \"{\" + partial.join(\",\") + \"}\";\r\n          gap = mind;\r\n          return v;\r\n      }\r\n    };\r\n\r\n    // Make a fake root object containing our value under the key of ''.\r\n    // Return the result of stringifying the value.\r\n    return str(\"\", {\r\n      \"\": value,\r\n    });\r\n  };\r\n})();\r\n\r\n/**\r\n * From https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\r\n * Slightly modified to throw a real Error rather than a POJO\r\n */\r\n_.JSONDecode = (function () {\r\n  var at, // The index of the current character\r\n    ch, // The current character\r\n    escapee = {\r\n      '\"': '\"',\r\n      \"\\\\\": \"\\\\\",\r\n      \"/\": \"/\",\r\n      b: \"\\b\",\r\n      f: \"\\f\",\r\n      n: \"\\n\",\r\n      r: \"\\r\",\r\n      t: \"\\t\",\r\n    },\r\n    text,\r\n    error = function (m) {\r\n      var e = new SyntaxError(m);\r\n      e.at = at;\r\n      e.text = text;\r\n      throw e;\r\n    },\r\n    next = function (c) {\r\n      // If a c parameter is provided, verify that it matches the current character.\r\n      if (c && c !== ch) {\r\n        error(\"Expected '\" + c + \"' instead of '\" + ch + \"'\");\r\n      }\r\n      // Get the next character. When there are no more characters,\r\n      // return the empty string.\r\n      ch = text.charAt(at);\r\n      at += 1;\r\n      return ch;\r\n    },\r\n    number = function () {\r\n      // Parse a number value.\r\n      var number,\r\n        string = \"\";\r\n\r\n      if (ch === \"-\") {\r\n        string = \"-\";\r\n        next(\"-\");\r\n      }\r\n      while (ch >= \"0\" && ch <= \"9\") {\r\n        string += ch;\r\n        next();\r\n      }\r\n      if (ch === \".\") {\r\n        string += \".\";\r\n        while (next() && ch >= \"0\" && ch <= \"9\") {\r\n          string += ch;\r\n        }\r\n      }\r\n      if (ch === \"e\" || ch === \"E\") {\r\n        string += ch;\r\n        next();\r\n        if (ch === \"-\" || ch === \"+\") {\r\n          string += ch;\r\n          next();\r\n        }\r\n        while (ch >= \"0\" && ch <= \"9\") {\r\n          string += ch;\r\n          next();\r\n        }\r\n      }\r\n      number = +string;\r\n      if (!isFinite(number)) {\r\n        error(\"Bad number\");\r\n      } else {\r\n        return number;\r\n      }\r\n    },\r\n    string = function () {\r\n      // Parse a string value.\r\n      var hex,\r\n        i,\r\n        string = \"\",\r\n        uffff;\r\n      // When parsing for string values, we must look for \" and \\ characters.\r\n      if (ch === '\"') {\r\n        while (next()) {\r\n          if (ch === '\"') {\r\n            next();\r\n            return string;\r\n          }\r\n          if (ch === \"\\\\\") {\r\n            next();\r\n            if (ch === \"u\") {\r\n              uffff = 0;\r\n              for (i = 0; i < 4; i += 1) {\r\n                hex = parseInt(next(), 16);\r\n                if (!isFinite(hex)) {\r\n                  break;\r\n                }\r\n                uffff = uffff * 16 + hex;\r\n              }\r\n              string += String.fromCharCode(uffff);\r\n            } else if (typeof escapee[ch] === \"string\") {\r\n              string += escapee[ch];\r\n            } else {\r\n              break;\r\n            }\r\n          } else {\r\n            string += ch;\r\n          }\r\n        }\r\n      }\r\n      error(\"Bad string\");\r\n    },\r\n    white = function () {\r\n      // Skip whitespace.\r\n      while (ch && ch <= \" \") {\r\n        next();\r\n      }\r\n    },\r\n    word = function () {\r\n      // true, false, or null.\r\n      switch (ch) {\r\n        case \"t\":\r\n          next(\"t\");\r\n          next(\"r\");\r\n          next(\"u\");\r\n          next(\"e\");\r\n          return true;\r\n        case \"f\":\r\n          next(\"f\");\r\n          next(\"a\");\r\n          next(\"l\");\r\n          next(\"s\");\r\n          next(\"e\");\r\n          return false;\r\n        case \"n\":\r\n          next(\"n\");\r\n          next(\"u\");\r\n          next(\"l\");\r\n          next(\"l\");\r\n          return null;\r\n      }\r\n      error('Unexpected \"' + ch + '\"');\r\n    },\r\n    value, // Placeholder for the value function.\r\n    array = function () {\r\n      // Parse an array value.\r\n      var array = [];\r\n\r\n      if (ch === \"[\") {\r\n        next(\"[\");\r\n        white();\r\n        if (ch === \"]\") {\r\n          next(\"]\");\r\n          return array; // empty array\r\n        }\r\n        while (ch) {\r\n          array.push(value());\r\n          white();\r\n          if (ch === \"]\") {\r\n            next(\"]\");\r\n            return array;\r\n          }\r\n          next(\",\");\r\n          white();\r\n        }\r\n      }\r\n      error(\"Bad array\");\r\n    },\r\n    object = function () {\r\n      // Parse an object value.\r\n      var key,\r\n        object = {};\r\n\r\n      if (ch === \"{\") {\r\n        next(\"{\");\r\n        white();\r\n        if (ch === \"}\") {\r\n          next(\"}\");\r\n          return object; // empty object\r\n        }\r\n        while (ch) {\r\n          key = string();\r\n          white();\r\n          next(\":\");\r\n          if (Object.hasOwnProperty.call(object, key)) {\r\n            error('Duplicate key \"' + key + '\"');\r\n          }\r\n          object[key] = value();\r\n          white();\r\n          if (ch === \"}\") {\r\n            next(\"}\");\r\n            return object;\r\n          }\r\n          next(\",\");\r\n          white();\r\n        }\r\n      }\r\n      error(\"Bad object\");\r\n    };\r\n\r\n  value = function () {\r\n    // Parse a JSON value. It could be an object, an array, a string,\r\n    // a number, or a word.\r\n    white();\r\n    switch (ch) {\r\n      case \"{\":\r\n        return object();\r\n      case \"[\":\r\n        return array();\r\n      case '\"':\r\n        return string();\r\n      case \"-\":\r\n        return number();\r\n      default:\r\n        return ch >= \"0\" && ch <= \"9\" ? number() : word();\r\n    }\r\n  };\r\n\r\n  // Return the json_parse function. It will have access to all of the\r\n  // above functions and variables.\r\n  return function (source) {\r\n    var result;\r\n\r\n    text = source;\r\n    at = 0;\r\n    ch = \" \";\r\n    result = value();\r\n    white();\r\n    if (ch) {\r\n      error(\"Syntax error\");\r\n    }\r\n\r\n    return result;\r\n  };\r\n})();\r\n\r\n_.base64Encode = function (data) {\r\n  var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n  var o1,\r\n    o2,\r\n    o3,\r\n    h1,\r\n    h2,\r\n    h3,\r\n    h4,\r\n    bits,\r\n    i = 0,\r\n    ac = 0,\r\n    enc = \"\",\r\n    tmp_arr = [];\r\n\r\n  if (!data) {\r\n    return data;\r\n  }\r\n\r\n  data = _.utf8Encode(data);\r\n\r\n  do {\r\n    // pack three octets into four hexets\r\n    o1 = data.charCodeAt(i++);\r\n    o2 = data.charCodeAt(i++);\r\n    o3 = data.charCodeAt(i++);\r\n\r\n    bits = (o1 << 16) | (o2 << 8) | o3;\r\n\r\n    h1 = (bits >> 18) & 0x3f;\r\n    h2 = (bits >> 12) & 0x3f;\r\n    h3 = (bits >> 6) & 0x3f;\r\n    h4 = bits & 0x3f;\r\n\r\n    // use hexets to index into b64, and append result to encoded string\r\n    tmp_arr[ac++] =\r\n      b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\r\n  } while (i < data.length);\r\n\r\n  enc = tmp_arr.join(\"\");\r\n\r\n  switch (data.length % 3) {\r\n    case 1:\r\n      enc = enc.slice(0, -2) + \"==\";\r\n      break;\r\n    case 2:\r\n      enc = enc.slice(0, -1) + \"=\";\r\n      break;\r\n  }\r\n\r\n  return enc;\r\n};\r\n\r\n_.utf8Encode = function (string) {\r\n  string = (string + \"\").replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\");\r\n\r\n  var utftext = \"\",\r\n    start,\r\n    end;\r\n  var stringl = 0,\r\n    n;\r\n\r\n  start = end = 0;\r\n  stringl = string.length;\r\n\r\n  for (n = 0; n < stringl; n++) {\r\n    var c1 = string.charCodeAt(n);\r\n    var enc = null;\r\n\r\n    if (c1 < 128) {\r\n      end++;\r\n    } else if (c1 > 127 && c1 < 2048) {\r\n      enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128);\r\n    } else {\r\n      enc = String.fromCharCode(\r\n        (c1 >> 12) | 224,\r\n        ((c1 >> 6) & 63) | 128,\r\n        (c1 & 63) | 128\r\n      );\r\n    }\r\n    if (enc !== null) {\r\n      if (end > start) {\r\n        utftext += string.substring(start, end);\r\n      }\r\n      utftext += enc;\r\n      start = end = n + 1;\r\n    }\r\n  }\r\n\r\n  if (end > start) {\r\n    utftext += string.substring(start, string.length);\r\n  }\r\n\r\n  return utftext;\r\n};\r\n\r\n_.UUID = (function () {\r\n  // Time/ticks information\r\n  // 1*new Date() is a cross browser version of Date.now()\r\n  var T = function () {\r\n    var d = 1 * new Date(),\r\n      i = 0;\r\n\r\n    // this while loop figures how many browser ticks go by\r\n    // before 1*new Date() returns a new number, ie the amount\r\n    // of ticks that go by per millisecond\r\n    while (d == 1 * new Date()) {\r\n      i++;\r\n    }\r\n\r\n    return d.toString(16) + i.toString(16);\r\n  };\r\n\r\n  // Math.Random entropy\r\n  var R = function () {\r\n    return Math.random().toString(16).replace(\".\", \"\");\r\n  };\r\n\r\n  // User agent entropy\r\n  // This function takes the user agent string, and then xors\r\n  // together each sequence of 8 bytes.  This produces a final\r\n  // sequence of 8 bytes which it returns as hex.\r\n  var UA = function () {\r\n    var ua = userAgent,\r\n      i,\r\n      ch,\r\n      buffer = [],\r\n      ret = 0;\r\n\r\n    function xor(result, byte_array) {\r\n      var j,\r\n        tmp = 0;\r\n      for (j = 0; j < byte_array.length; j++) {\r\n        tmp |= buffer[j] << (j * 8);\r\n      }\r\n      return result ^ tmp;\r\n    }\r\n\r\n    for (i = 0; i < ua.length; i++) {\r\n      ch = ua.charCodeAt(i);\r\n      buffer.unshift(ch & 0xff);\r\n      if (buffer.length >= 4) {\r\n        ret = xor(ret, buffer);\r\n        buffer = [];\r\n      }\r\n    }\r\n\r\n    if (buffer.length > 0) {\r\n      ret = xor(ret, buffer);\r\n    }\r\n\r\n    return ret.toString(16);\r\n  };\r\n\r\n  return function () {\r\n    var se = (screen.height * screen.width).toString(16);\r\n    return T() + \"-\" + R() + \"-\" + UA() + \"-\" + se + \"-\" + T();\r\n  };\r\n})();\r\n\r\n// _.isBlockedUA()\r\n// This is to block various web spiders from executing our JS and\r\n// sending false tracking data\r\n_.isBlockedUA = function (ua) {\r\n  if (\r\n    /(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(\r\n      ua\r\n    )\r\n  ) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\n/**\r\n * @param {Object=} formdata\r\n * @param {string=} arg_separator\r\n */\r\n_.HTTPBuildQuery = function (formdata, arg_separator) {\r\n  var use_val,\r\n    use_key,\r\n    tmp_arr = [];\r\n\r\n  if (_.isUndefined(arg_separator)) {\r\n    arg_separator = \"&\";\r\n  }\r\n\r\n  _.each(formdata, function (val, key) {\r\n    use_val = encodeURIComponent(val.toString());\r\n    use_key = encodeURIComponent(key);\r\n    tmp_arr[tmp_arr.length] = use_key + \"=\" + use_val;\r\n  });\r\n\r\n  return tmp_arr.join(arg_separator);\r\n};\r\n\r\n_.getQueryParam = function (url, param) {\r\n  // Expects a raw URL\r\n\r\n  param = param.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n  var regexS = \"[\\\\?&]\" + param + \"=([^&#]*)\",\r\n    regex = new RegExp(regexS),\r\n    results = regex.exec(url);\r\n  if (\r\n    results === null ||\r\n    (results && typeof results[1] !== \"string\" && results[1].length)\r\n  ) {\r\n    return \"\";\r\n  } else {\r\n    var result = results[1];\r\n    try {\r\n      result = decodeURIComponent(result);\r\n    } catch (err) {\r\n      console.error(\"Skipping decoding for malformed query param: \" + result);\r\n    }\r\n    return result.replace(/\\+/g, \" \");\r\n  }\r\n};\r\n\r\n_.getHashParam = function (hash, param) {\r\n  var matches = hash.match(new RegExp(param + \"=([^&]*)\"));\r\n  return matches ? matches[1] : null;\r\n};\r\n\r\n// _.cookie\r\n// Methods partially borrowed from quirksmode.org/js/cookies.html\r\n_.cookie = {\r\n  get: function (name) {\r\n    var nameEQ = name + \"=\";\r\n    var ca = document.cookie.split(\";\");\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) == \" \") {\r\n        c = c.substring(1, c.length);\r\n      }\r\n      if (c.indexOf(nameEQ) === 0) {\r\n        return decodeURIComponent(c.substring(nameEQ.length, c.length));\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n\r\n  parse: function (name) {\r\n    var cookie;\r\n    try {\r\n      cookie = _.JSONDecode(_.cookie.get(name)) || {};\r\n    } catch (err) {\r\n      // noop\r\n    }\r\n    return cookie;\r\n  },\r\n\r\n  set_seconds: function (\r\n    name,\r\n    value,\r\n    seconds,\r\n    is_cross_subdomain,\r\n    is_secure,\r\n    is_cross_site,\r\n    domain_override\r\n  ) {\r\n    var cdomain = \"\",\r\n      expires = \"\",\r\n      secure = \"\";\r\n\r\n    if (domain_override) {\r\n      cdomain = \"; domain=\" + domain_override;\r\n    } else if (is_cross_subdomain) {\r\n      var domain = extract_domain(document.location.hostname);\r\n      cdomain = domain ? \"; domain=.\" + domain : \"\";\r\n    }\r\n\r\n    if (seconds) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + seconds * 1000);\r\n      expires = \"; expires=\" + date.toGMTString();\r\n    }\r\n\r\n    if (is_cross_site) {\r\n      is_secure = true;\r\n      secure = \"; SameSite=None\";\r\n    }\r\n    if (is_secure) {\r\n      secure += \"; secure\";\r\n    }\r\n\r\n    document.cookie =\r\n      name +\r\n      \"=\" +\r\n      encodeURIComponent(value) +\r\n      expires +\r\n      \"; path=/\" +\r\n      cdomain +\r\n      secure;\r\n  },\r\n\r\n  set: function (\r\n    name,\r\n    value,\r\n    days,\r\n    is_cross_subdomain,\r\n    is_secure,\r\n    is_cross_site,\r\n    domain_override\r\n  ) {\r\n    var cdomain = \"\",\r\n      expires = \"\",\r\n      secure = \"\";\r\n\r\n    if (domain_override) {\r\n      cdomain = \"; domain=\" + domain_override;\r\n    } else if (is_cross_subdomain) {\r\n      var domain = extract_domain(document.location.hostname);\r\n      cdomain = domain ? \"; domain=.\" + domain : \"\";\r\n    }\r\n\r\n    if (days) {\r\n      var date = new Date();\r\n      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\r\n      expires = \"; expires=\" + date.toGMTString();\r\n    }\r\n\r\n    if (is_cross_site) {\r\n      is_secure = true;\r\n      secure = \"; SameSite=None\";\r\n    }\r\n    if (is_secure) {\r\n      secure += \"; secure\";\r\n    }\r\n\r\n    var new_cookie_val =\r\n      name +\r\n      \"=\" +\r\n      encodeURIComponent(value) +\r\n      expires +\r\n      \"; path=/\" +\r\n      cdomain +\r\n      secure;\r\n    document.cookie = new_cookie_val;\r\n    return new_cookie_val;\r\n  },\r\n\r\n  remove: function (name, is_cross_subdomain, domain_override) {\r\n    _.cookie.set(\r\n      name,\r\n      \"\",\r\n      -1,\r\n      is_cross_subdomain,\r\n      false,\r\n      false,\r\n      domain_override\r\n    );\r\n  },\r\n};\r\n\r\n// _.localStorage\r\nvar _localStorage_supported = null;\r\n_.localStorage = {\r\n  is_supported: function () {\r\n    if (_localStorage_supported !== null) {\r\n      return _localStorage_supported;\r\n    }\r\n\r\n    var supported = true;\r\n    try {\r\n      var key = \"__mplssupport__\",\r\n        val = \"xyz\";\r\n      _.localStorage.set(key, val);\r\n      if (_.localStorage.get(key) !== val) {\r\n        supported = false;\r\n      }\r\n      _.localStorage.remove(key);\r\n    } catch (err) {\r\n      supported = false;\r\n    }\r\n    if (!supported) {\r\n      console.error(\"localStorage unsupported; falling back to cookie store\");\r\n    }\r\n\r\n    _localStorage_supported = supported;\r\n    return supported;\r\n  },\r\n\r\n  error: function (msg) {\r\n    console.error(\"localStorage error: \" + msg);\r\n  },\r\n\r\n  get: function (name) {\r\n    try {\r\n      return window.localStorage.getItem(name);\r\n    } catch (err) {\r\n      _.localStorage.error(err);\r\n    }\r\n    return null;\r\n  },\r\n\r\n  parse: function (name) {\r\n    try {\r\n      return _.JSONDecode(_.localStorage.get(name)) || {};\r\n    } catch (err) {\r\n      // noop\r\n    }\r\n    return null;\r\n  },\r\n\r\n  set: function (name, value) {\r\n    try {\r\n      window.localStorage.setItem(name, value);\r\n    } catch (err) {\r\n      _.localStorage.error(err);\r\n    }\r\n  },\r\n\r\n  remove: function (name) {\r\n    try {\r\n      window.localStorage.removeItem(name);\r\n    } catch (err) {\r\n      _.localStorage.error(err);\r\n    }\r\n  },\r\n};\r\n\r\n_.register_event = (function () {\r\n  // written by Dean Edwards, 2005\r\n  // with input from Tino Zijdel - crisp@xs4all.nl\r\n  // with input from Carl Sverre - mail@carlsverre.com\r\n  // with input from Mixpanel\r\n  // http://dean.edwards.name/weblog/2005/10/add-event/\r\n  // https://gist.github.com/1930440\r\n\r\n  /**\r\n   * @param {Object} element\r\n   * @param {string} type\r\n   * @param {function(...*)} handler\r\n   * @param {boolean=} oldSchool\r\n   * @param {boolean=} useCapture\r\n   */\r\n  var register_event = function (\r\n    element,\r\n    type,\r\n    handler,\r\n    oldSchool,\r\n    useCapture\r\n  ) {\r\n    if (!element) {\r\n      console.error(\"No valid element provided to register_event\");\r\n      return;\r\n    }\r\n\r\n    if (element.addEventListener && !oldSchool) {\r\n      element.addEventListener(type, handler, !!useCapture);\r\n    } else {\r\n      var ontype = \"on\" + type;\r\n      var old_handler = element[ontype]; // can be undefined\r\n      element[ontype] = makeHandler(element, handler, old_handler);\r\n    }\r\n  };\r\n\r\n  function makeHandler(element, new_handler, old_handlers) {\r\n    var handler = function (event) {\r\n      event = event || fixEvent(window.event);\r\n\r\n      // this basically happens in firefox whenever another script\r\n      // overwrites the onload callback and doesn't pass the event\r\n      // object to previously defined callbacks.  All the browsers\r\n      // that don't define window.event implement addEventListener\r\n      // so the dom_loaded handler will still be fired as usual.\r\n      if (!event) {\r\n        return undefined;\r\n      }\r\n\r\n      var ret = true;\r\n      var old_result, new_result;\r\n\r\n      if (_.isFunction(old_handlers)) {\r\n        old_result = old_handlers(event);\r\n      }\r\n      new_result = new_handler.call(element, event);\r\n\r\n      if (false === old_result || false === new_result) {\r\n        ret = false;\r\n      }\r\n\r\n      return ret;\r\n    };\r\n\r\n    return handler;\r\n  }\r\n\r\n  function fixEvent(event) {\r\n    if (event) {\r\n      event.preventDefault = fixEvent.preventDefault;\r\n      event.stopPropagation = fixEvent.stopPropagation;\r\n    }\r\n    return event;\r\n  }\r\n  fixEvent.preventDefault = function () {\r\n    this.returnValue = false;\r\n  };\r\n  fixEvent.stopPropagation = function () {\r\n    this.cancelBubble = true;\r\n  };\r\n\r\n  return register_event;\r\n})();\r\n\r\nvar TOKEN_MATCH_REGEX = new RegExp(\r\n  '^(\\\\w*)\\\\[(\\\\w+)([=~\\\\|\\\\^\\\\$\\\\*]?)=?\"?([^\\\\]\"]*)\"?\\\\]$'\r\n);\r\n\r\n_.dom_query = (function () {\r\n  /* document.getElementsBySelector(selector)\r\n    - returns an array of element objects from the current document\r\n    matching the CSS selector. Selectors can contain element names,\r\n    class names and ids and can be nested. For example:\r\n\r\n    elements = document.getElementsBySelector('div#main p a.external')\r\n\r\n    Will return an array of all 'a' elements with 'external' in their\r\n    class attribute that are contained inside 'p' elements that are\r\n    contained inside the 'div' element which has id=\"main\"\r\n\r\n    New in version 0.4: Support for CSS2 and CSS3 attribute selectors:\r\n    See http://www.w3.org/TR/css3-selectors/#attribute-selectors\r\n\r\n    Version 0.4 - Simon Willison, March 25th 2003\r\n    -- Works in Phoenix 0.5, Mozilla 1.3, Opera 7, Internet Explorer 6, Internet Explorer 5 on Windows\r\n    -- Opera 7 fails\r\n\r\n    Version 0.5 - Carl Sverre, Jan 7th 2013\r\n    -- Now uses jQuery-esque `hasClass` for testing class name\r\n    equality.  This fixes a bug related to '-' characters being\r\n    considered not part of a 'word' in regex.\r\n    */\r\n\r\n  function getAllChildren(e) {\r\n    // Returns all children of element. Workaround required for IE5/Windows. Ugh.\r\n    return e.all ? e.all : e.getElementsByTagName(\"*\");\r\n  }\r\n\r\n  var bad_whitespace = /[\\t\\r\\n]/g;\r\n\r\n  function hasClass(elem, selector) {\r\n    var className = \" \" + selector + \" \";\r\n    return (\r\n      (\" \" + elem.className + \" \")\r\n        .replace(bad_whitespace, \" \")\r\n        .indexOf(className) >= 0\r\n    );\r\n  }\r\n\r\n  function getElementsBySelector(selector) {\r\n    // Attempt to fail gracefully in lesser browsers\r\n    if (!document.getElementsByTagName) {\r\n      return [];\r\n    }\r\n    // Split selector in to tokens\r\n    var tokens = selector.split(\" \");\r\n    var token,\r\n      bits,\r\n      tagName,\r\n      found,\r\n      foundCount,\r\n      i,\r\n      j,\r\n      k,\r\n      elements,\r\n      currentContextIndex;\r\n    var currentContext = [document];\r\n    for (i = 0; i < tokens.length; i++) {\r\n      token = tokens[i].replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\r\n      if (token.indexOf(\"#\") > -1) {\r\n        // Token is an ID selector\r\n        bits = token.split(\"#\");\r\n        tagName = bits[0];\r\n        var id = bits[1];\r\n        var element = document.getElementById(id);\r\n        if (\r\n          !element ||\r\n          (tagName && element.nodeName.toLowerCase() != tagName)\r\n        ) {\r\n          // element not found or tag with that ID not found, return false\r\n          return [];\r\n        }\r\n        // Set currentContext to contain just this element\r\n        currentContext = [element];\r\n        continue; // Skip to next token\r\n      }\r\n      if (token.indexOf(\".\") > -1) {\r\n        // Token contains a class selector\r\n        bits = token.split(\".\");\r\n        tagName = bits[0];\r\n        var className = bits[1];\r\n        if (!tagName) {\r\n          tagName = \"*\";\r\n        }\r\n        // Get elements matching tag, filter them for class selector\r\n        found = [];\r\n        foundCount = 0;\r\n        for (j = 0; j < currentContext.length; j++) {\r\n          if (tagName == \"*\") {\r\n            elements = getAllChildren(currentContext[j]);\r\n          } else {\r\n            elements = currentContext[j].getElementsByTagName(tagName);\r\n          }\r\n          for (k = 0; k < elements.length; k++) {\r\n            found[foundCount++] = elements[k];\r\n          }\r\n        }\r\n        currentContext = [];\r\n        currentContextIndex = 0;\r\n        for (j = 0; j < found.length; j++) {\r\n          if (\r\n            found[j].className &&\r\n            _.isString(found[j].className) && // some SVG elements have classNames which are not strings\r\n            hasClass(found[j], className)\r\n          ) {\r\n            currentContext[currentContextIndex++] = found[j];\r\n          }\r\n        }\r\n        continue; // Skip to next token\r\n      }\r\n      // Code to deal with attribute selectors\r\n      var token_match = token.match(TOKEN_MATCH_REGEX);\r\n      if (token_match) {\r\n        tagName = token_match[1];\r\n        var attrName = token_match[2];\r\n        var attrOperator = token_match[3];\r\n        var attrValue = token_match[4];\r\n        if (!tagName) {\r\n          tagName = \"*\";\r\n        }\r\n        // Grab all of the tagName elements within current context\r\n        found = [];\r\n        foundCount = 0;\r\n        for (j = 0; j < currentContext.length; j++) {\r\n          if (tagName == \"*\") {\r\n            elements = getAllChildren(currentContext[j]);\r\n          } else {\r\n            elements = currentContext[j].getElementsByTagName(tagName);\r\n          }\r\n          for (k = 0; k < elements.length; k++) {\r\n            found[foundCount++] = elements[k];\r\n          }\r\n        }\r\n        currentContext = [];\r\n        currentContextIndex = 0;\r\n        var checkFunction; // This function will be used to filter the elements\r\n        switch (attrOperator) {\r\n          case \"=\": // Equality\r\n            checkFunction = function (e) {\r\n              return e.getAttribute(attrName) == attrValue;\r\n            };\r\n            break;\r\n          case \"~\": // Match one of space seperated words\r\n            checkFunction = function (e) {\r\n              return e\r\n                .getAttribute(attrName)\r\n                .match(new RegExp(\"\\\\b\" + attrValue + \"\\\\b\"));\r\n            };\r\n            break;\r\n          case \"|\": // Match start with value followed by optional hyphen\r\n            checkFunction = function (e) {\r\n              return e\r\n                .getAttribute(attrName)\r\n                .match(new RegExp(\"^\" + attrValue + \"-?\"));\r\n            };\r\n            break;\r\n          case \"^\": // Match starts with value\r\n            checkFunction = function (e) {\r\n              return e.getAttribute(attrName).indexOf(attrValue) === 0;\r\n            };\r\n            break;\r\n          case \"$\": // Match ends with value - fails with \"Warning\" in Opera 7\r\n            checkFunction = function (e) {\r\n              return (\r\n                e.getAttribute(attrName).lastIndexOf(attrValue) ==\r\n                e.getAttribute(attrName).length - attrValue.length\r\n              );\r\n            };\r\n            break;\r\n          case \"*\": // Match ends with value\r\n            checkFunction = function (e) {\r\n              return e.getAttribute(attrName).indexOf(attrValue) > -1;\r\n            };\r\n            break;\r\n          default:\r\n            // Just test for existence of attribute\r\n            checkFunction = function (e) {\r\n              return e.getAttribute(attrName);\r\n            };\r\n        }\r\n        currentContext = [];\r\n        currentContextIndex = 0;\r\n        for (j = 0; j < found.length; j++) {\r\n          if (checkFunction(found[j])) {\r\n            currentContext[currentContextIndex++] = found[j];\r\n          }\r\n        }\r\n        // alert('Attribute Selector: '+tagName+' '+attrName+' '+attrOperator+' '+attrValue);\r\n        continue; // Skip to next token\r\n      }\r\n      // If we get here, token is JUST an element (not a class or ID selector)\r\n      tagName = token;\r\n      found = [];\r\n      foundCount = 0;\r\n      for (j = 0; j < currentContext.length; j++) {\r\n        elements = currentContext[j].getElementsByTagName(tagName);\r\n        for (k = 0; k < elements.length; k++) {\r\n          found[foundCount++] = elements[k];\r\n        }\r\n      }\r\n      currentContext = found;\r\n    }\r\n    return currentContext;\r\n  }\r\n\r\n  return function (query) {\r\n    if (_.isElement(query)) {\r\n      return [query];\r\n    } else if (_.isObject(query) && !_.isUndefined(query.length)) {\r\n      return query;\r\n    } else {\r\n      return getElementsBySelector.call(this, query);\r\n    }\r\n  };\r\n})();\r\n\r\n_.info = {\r\n  campaignParams: function () {\r\n    var campaign_keywords = \"utm_source utm_medium utm_campaign utm_content utm_term\".split(\r\n        \" \"\r\n      ),\r\n      kw = \"\",\r\n      params = {};\r\n    _.each(campaign_keywords, function (kwkey) {\r\n      kw = _.getQueryParam(document.URL, kwkey);\r\n      if (kw.length) {\r\n        params[kwkey] = kw;\r\n      }\r\n    });\r\n\r\n    return params;\r\n  },\r\n\r\n  searchEngine: function (referrer) {\r\n    if (referrer.search(\"https?://(.*)google.([^/?]*)\") === 0) {\r\n      return \"google\";\r\n    } else if (referrer.search(\"https?://(.*)bing.com\") === 0) {\r\n      return \"bing\";\r\n    } else if (referrer.search(\"https?://(.*)yahoo.com\") === 0) {\r\n      return \"yahoo\";\r\n    } else if (referrer.search(\"https?://(.*)duckduckgo.com\") === 0) {\r\n      return \"duckduckgo\";\r\n    } else {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  searchInfo: function (referrer) {\r\n    var search = _.info.searchEngine(referrer),\r\n      param = search != \"yahoo\" ? \"q\" : \"p\",\r\n      ret = {};\r\n\r\n    if (search !== null) {\r\n      ret[\"$search_engine\"] = search;\r\n\r\n      var keyword = _.getQueryParam(referrer, param);\r\n      if (keyword.length) {\r\n        ret[\"mp_keyword\"] = keyword;\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  },\r\n\r\n  device: function (user_agent) {\r\n    if (/Windows Phone/i.test(user_agent) || /WPDesktop/.test(user_agent)) {\r\n      return \"Windows Phone\";\r\n    } else if (/iPad/.test(user_agent)) {\r\n      return \"iPad\";\r\n    } else if (/iPod/.test(user_agent)) {\r\n      return \"iPod Touch\";\r\n    } else if (/iPhone/.test(user_agent)) {\r\n      return \"iPhone\";\r\n    } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\r\n      return \"BlackBerry\";\r\n    } else if (/Android/.test(user_agent)) {\r\n      return \"Android\";\r\n    } else {\r\n      return \"\";\r\n    }\r\n  },\r\n\r\n  referringDomain: function (referrer) {\r\n    var split = referrer.split(\"/\");\r\n    if (split.length >= 3) {\r\n      return split[2];\r\n    }\r\n    return \"\";\r\n  },\r\n\r\n  properties: function () {\r\n    return _.extend(\r\n      _.strip_empty_properties({\r\n        $os: _.info.platform().os,\r\n        $browser:  _.info.platform().browser,\r\n        $referrer: document.referrer,\r\n        $referring_domain: _.info.referringDomain(document.referrer),\r\n        $device: _.info.device(userAgent),\r\n      }),\r\n      {\r\n        $current_url: win.location.href,\r\n        $screen_height: screen.height,\r\n        $screen_width: screen.width,\r\n        mp_lib: \"web\",\r\n        $lib_version: Config.LIB_VERSION,\r\n        $insert_id:\r\n          Math.random().toString(36).substring(2, 10) +\r\n          Math.random().toString(36).substring(2, 10),\r\n        time: _.timestamp() / 1000, // epoch time in seconds\r\n      }\r\n    );\r\n  },\r\n\r\n  people_properties: function () {\r\n    return _.extend(\r\n      _.strip_empty_properties({\r\n        $os: _.info.platform().os,\r\n        $browser: _.info.platform().browser,\r\n      }),\r\n    );\r\n  },\r\n\r\n  pageviewInfo: function (page) {\r\n    return _.strip_empty_properties({\r\n      mp_page: page,\r\n      mp_referrer: document.referrer,\r\n      mp_browser: _.info.platform().browser,\r\n      mp_platform: _.info.platform().os,\r\n    });\r\n  },\r\n  \r\n  platform: function () {\r\n    const systemInfo = new platform();\r\n    const {os,name, version } = systemInfo._platform;\r\n    return {\r\n      os: os.family + os.version + \" \" + os.architecture + \"位\",\r\n      browser: name + \" \" + version,\r\n      browserVersion : version\r\n    };\r\n  }\r\n};\r\n\r\n// naive way to extract domain name (example.com) from full hostname (my.sub.example.com)\r\nvar SIMPLE_DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]*\\.[a-z]+$/i;\r\n// this next one attempts to account for some ccSLDs, e.g. extracting oxford.ac.uk from www.oxford.ac.uk\r\nvar DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]+\\.[a-z.]{2,6}$/i;\r\n\r\nvar extract_domain = function (hostname) {\r\n  var domain_regex = DOMAIN_MATCH_REGEX;\r\n  var parts = hostname.split(\".\");\r\n  var tld = parts[parts.length - 1];\r\n  if (tld.length > 4 || tld === \"com\" || tld === \"org\") {\r\n    domain_regex = SIMPLE_DOMAIN_MATCH_REGEX;\r\n  }\r\n  var matches = hostname.match(domain_regex);\r\n  return matches ? matches[0] : \"\";\r\n};\r\n\r\nconst addListener = function (element, type, handler) {\r\n  if (element.addEventListener) {\r\n    element.addEventListener(type, handler, false);\r\n  } else if (element.attachEvent) {\r\n    element.attachEvent(\"on\" + type, handler);\r\n  } else {\r\n    element[\"on\" + type] = handler;\r\n  }\r\n};\r\n\r\nconst removeListener = function (element, type, handler) {\r\n  if (element.removeEventListener) {\r\n    element.removeEventListener(type, handler, false);\r\n  } else if (element.detachEvent) {\r\n    element.detachEvent(\"on\" + type, handler);\r\n  } else {\r\n    element[\"on\" + type] = null;\r\n  }\r\n};\r\n\r\nconst onload = (cb) => {\r\n  if (document.readyState === \"complete\") {\r\n    cb();\r\n    return void 0;\r\n  }\r\n  addListener(window, \"load\", cb);\r\n};\r\n\r\n// EXPORTS (for closure compiler)\r\n_[\"toArray\"] = _.toArray;\r\n_[\"isObject\"] = _.isObject;\r\n_[\"JSONEncode\"] = _.JSONEncode;\r\n_[\"JSONDecode\"] = _.JSONDecode;\r\n_[\"isBlockedUA\"] = _.isBlockedUA;\r\n_[\"isEmptyObject\"] = _.isEmptyObject;\r\n_[\"info\"] = _.info;\r\n_[\"info\"][\"device\"] = _.info.device;\r\n_[\"info\"][\"properties\"] = _.info.properties;\r\n\r\nexport {\r\n  _,\r\n  userAgent,\r\n  console,\r\n  win as window,\r\n  document,\r\n  navigator,\r\n  extract_domain,\r\n  addListener,\r\n  removeListener,\r\n  onload,\r\n};\r\n","// import \"@fastly/performance-observer-polyfill/polyfill\";\r\nimport { addListener, onload as loaded } from \"./utils/index.js\";\r\n\r\nlet performance =\r\n  window.performance ||\r\n  window.mozPerformance ||\r\n  window.msPerformance ||\r\n  window.webkitPerformance;\r\n\r\nclass Perf {\r\n  constructor(options) {\r\n    this._options = options;\r\n    this.isOnload = false;\r\n    this.isDOMReady = false;\r\n    this.cycleFreq = 100;\r\n\r\n    this.domready(() => {\r\n      let perfData = this.getTimingReport();\r\n      perfData.type = \"domready\";\r\n      options.timingReport(perfData);\r\n    });\r\n    this.onload(() => {\r\n      let perfData = this.getTimingReport();\r\n      perfData.type = \"onload\";\r\n      options.timingReport(perfData);\r\n    });\r\n\r\n    loaded(this.getResourceReport.bind(this));\r\n  }\r\n\r\n  getResourceReport() {\r\n    // 过滤无效数据\r\n    function filterTime(a, b) {\r\n      return a > 0 && b > 0 && a - b >= 0 ? a - b : undefined;\r\n    }\r\n\r\n    let resolvePerformanceTiming = (timing) => {\r\n      let o = {\r\n        initiatorType: timing.initiatorType,\r\n        name: timing.name,\r\n        duration: parseInt(timing.duration),\r\n        redirect: filterTime(timing.redirectEnd, timing.redirectStart), // 重定向\r\n        dns: filterTime(timing.domainLookupEnd, timing.domainLookupStart), // DNS解析\r\n        connect: filterTime(timing.connectEnd, timing.connectStart), // TCP建连\r\n        network: filterTime(timing.connectEnd, timing.startTime), // 网络总耗时\r\n\r\n        send: filterTime(timing.responseStart, timing.requestStart), // 发送开始到接受第一个返回\r\n        receive: filterTime(timing.responseEnd, timing.responseStart), // 接收总时间\r\n        request: filterTime(timing.responseEnd, timing.requestStart), // 总时间\r\n\r\n        ttfb: filterTime(timing.responseStart, timing.requestStart), // 首字节时间\r\n      };\r\n\r\n      return o;\r\n    };\r\n\r\n    const resolveEntries = (entries) =>\r\n      entries.map((item) => resolvePerformanceTiming(item));\r\n\r\n    if (window.PerformanceObserver) {\r\n      const observer = new PerformanceObserver((list) => {\r\n        try {\r\n          let entries = list.getEntries();\r\n          this._options.resourceReport(resolveEntries(entries));\r\n        } catch (e) {\r\n          console.error(e);\r\n        }\r\n      });\r\n      observer.observe({\r\n        entryTypes:\r\n          typeof this._options.type != \"undefined\"\r\n            ? this._options.type\r\n            : [\"resource\"],\r\n      });\r\n    } else {\r\n      onload(() => {\r\n        let entries = performance.getEntriesByType(\"resource\");\r\n        // cb(resolveEntries(entries));\r\n      });\r\n    }\r\n  }\r\n\r\n  getTimingReport() {\r\n    if (!performance) {\r\n      return void 0;\r\n    }\r\n\r\n    // 过滤无效数据；\r\n    function filterTime(a, b) {\r\n      return a > 0 && b > 0 && a - b >= 0 ? a - b : undefined;\r\n    }\r\n\r\n    // append data from window.performance\r\n    let timing = performance.timing;\r\n\r\n    let perfData = {\r\n      // 网络建连\r\n      pervPage: filterTime(timing.fetchStart, timing.navigationStart), // 上一个页面\r\n      redirect: filterTime(timing.responseEnd, timing.redirectStart), // 页面重定向时间\r\n      dns: filterTime(timing.domainLookupEnd, timing.domainLookupStart), // DNS查找时间\r\n      connect: filterTime(timing.connectEnd, timing.connectStart), // TCP建连时间\r\n      network: filterTime(timing.connectEnd, timing.navigationStart), // 网络总耗时\r\n\r\n      // 网络接收\r\n      send: filterTime(timing.responseStart, timing.requestStart), // 前端从发送到接收到后端第一个返回\r\n      receive: filterTime(timing.responseEnd, timing.responseStart), // 接受页面时间\r\n      request: filterTime(timing.responseEnd, timing.requestStart), // 请求页面总时间\r\n\r\n      // 前端渲染\r\n      dom: filterTime(timing.domComplete, timing.domLoading), // dom解析时间\r\n      loadEvent: filterTime(timing.loadEventEnd, timing.loadEventStart), // loadEvent时间\r\n      frontend: filterTime(timing.loadEventEnd, timing.domLoading), // 前端总时间\r\n\r\n      // 关键阶段\r\n      load: filterTime(timing.loadEventEnd, timing.navigationStart), // 页面完全加载总时间\r\n      domReady: filterTime(\r\n        timing.domContentLoadedEventStart,\r\n        timing.navigationStart\r\n      ), // domready时间\r\n      interactive: filterTime(timing.domInteractive, timing.navigationStart), // 可操作时间\r\n      ttfb: filterTime(timing.responseStart, timing.navigationStart), // 首字节时间\r\n    };\r\n\r\n    return perfData;\r\n  }\r\n\r\n  // DOM解析完成\r\n  domready(callback) {\r\n    let that = this;\r\n    if (this.isOnload === true) {\r\n      return void 0;\r\n    }\r\n    let timer = null;\r\n\r\n    if (document.readyState === \"interactive\") {\r\n      runCheck();\r\n    } else if (document.addEventListener) {\r\n      document.addEventListener(\r\n        \"DOMContentLoaded\",\r\n        function () {\r\n          runCheck();\r\n        },\r\n        false\r\n      );\r\n    } else if (document.attachEvent) {\r\n      document.attachEvent(\"onreadystatechange\", function () {\r\n        runCheck();\r\n      });\r\n    }\r\n\r\n    function runCheck() {\r\n      if (performance.timing.domInteractive) {\r\n        clearTimeout(timer);\r\n        callback();\r\n        that.isDOMReady = true;\r\n      } else {\r\n        timer = setTimeout(runCheck, that.cycleFreq);\r\n      }\r\n    }\r\n  }\r\n\r\n  // 页面加载完成\r\n  onload(callback) {\r\n    let that = this;\r\n    let timer = null;\r\n\r\n    if (document.readyState === \"complete\") {\r\n      runCheck();\r\n    } else {\r\n      addListener(\r\n        window,\r\n        \"load\",\r\n        function () {\r\n          runCheck();\r\n        },\r\n        false\r\n      );\r\n    }\r\n\r\n    function runCheck() {\r\n      if (performance.timing.loadEventEnd) {\r\n        clearTimeout(timer);\r\n        callback();\r\n        this.isOnload = true;\r\n      } else {\r\n        timer = setTimeout(runCheck, that.cycleFreq);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Perf;\r\n","// Save original XMLHttpRequest as _rxhr\r\nvar realXhr = \"_rxhr\";\r\n\r\nexport function configEvent(event, xhrProxy) {\r\n  var e = {};\r\n  for (var attr in event) e[attr] = event[attr];\r\n  // xhrProxy instead\r\n  e.target = e.currentTarget = xhrProxy;\r\n  return e;\r\n}\r\n\r\nexport function hook(proxy) {\r\n  // Avoid double hookAjax\r\n  window[realXhr] = window[realXhr] || XMLHttpRequest;\r\n\r\n  XMLHttpRequest = function () {\r\n    var xhr = new window[realXhr]();\r\n    // We shouldn't hookAjax XMLHttpRequest.prototype because we can't\r\n    // guarantee that all attributes are on the prototype。\r\n    // Instead, hooking XMLHttpRequest instance can avoid this problem.\r\n    for (var attr in xhr) {\r\n      var type = \"\";\r\n      try {\r\n        type = typeof xhr[attr]; // May cause exception on some browser\r\n      } catch (e) {}\r\n      if (type === \"function\") {\r\n        // hookAjax methods of xhr, such as `open`、`send` ...\r\n        this[attr] = hookFunction(attr);\r\n      } else {\r\n        Object.defineProperty(this, attr, {\r\n          get: getterFactory(attr),\r\n          set: setterFactory(attr),\r\n          enumerable: true,\r\n        });\r\n      }\r\n    }\r\n    var that = this;\r\n    xhr.getProxy = function () {\r\n      return that;\r\n    };\r\n    this.xhr = xhr;\r\n  };\r\n\r\n  // Generate getter for attributes of xhr\r\n  function getterFactory(attr) {\r\n    return function () {\r\n      var v = this.hasOwnProperty(attr + \"_\")\r\n        ? this[attr + \"_\"]\r\n        : this.xhr[attr];\r\n      var attrGetterHook = (proxy[attr] || {})[\"getter\"];\r\n      return (attrGetterHook && attrGetterHook(v, this)) || v;\r\n    };\r\n  }\r\n\r\n  // Generate setter for attributes of xhr; by this we have an opportunity\r\n  // to hookAjax event callbacks （eg: `onload`） of xhr;\r\n  function setterFactory(attr) {\r\n    return function (v) {\r\n      var xhr = this.xhr;\r\n      var that = this;\r\n      var hook = proxy[attr];\r\n      // hookAjax  event callbacks such as `onload`、`onreadystatechange`...\r\n      if (attr.substring(0, 2) === \"on\") {\r\n        that[attr + \"_\"] = v;\r\n        xhr[attr] = function (e) {\r\n          e = configEvent(e, that);\r\n          var ret = proxy[attr] && proxy[attr].call(that, xhr, e);\r\n          ret || v.call(that, e);\r\n        };\r\n      } else {\r\n        //If the attribute isn't writable, generate proxy attribute\r\n        var attrSetterHook = (hook || {})[\"setter\"];\r\n        v = (attrSetterHook && attrSetterHook(v, that)) || v;\r\n        this[attr + \"_\"] = v;\r\n        try {\r\n          // Not all attributes of xhr are writable(setter may undefined).\r\n          xhr[attr] = v;\r\n        } catch (e) {}\r\n      }\r\n    };\r\n  }\r\n\r\n  // Hook methods of xhr.\r\n  function hookFunction(fun) {\r\n    return function () {\r\n      var args = [].slice.call(arguments);\r\n      if (proxy[fun]) {\r\n        var ret = proxy[fun].call(this, args, this.xhr);\r\n        // If the proxy return value exists, return it directly,\r\n        // otherwise call the function of xhr.\r\n        if (ret) return ret;\r\n      }\r\n      return this.xhr[fun].apply(this.xhr, args);\r\n    };\r\n  }\r\n\r\n  // Return the real XMLHttpRequest\r\n  return window[realXhr];\r\n}\r\n\r\nexport function unHook() {\r\n  if (window[realXhr]) XMLHttpRequest = window[realXhr];\r\n  window[realXhr] = undefined;\r\n}\r\n","/*\r\n * author: wendux\r\n * email: 824783146@qq.com\r\n * source code: https://github.com/wendux/Ajax-hook\r\n */\r\n\r\nimport {hook, unHook, configEvent} from \"./xhr-hook\";\r\n\r\nvar events = ['load', 'loadend', 'timeout', 'error', 'readystatechange', 'abort'];\r\nvar eventLoad = events[0],\r\n    eventLoadEnd = events[1],\r\n    eventTimeout = events[2],\r\n    eventError = events[3],\r\n    eventReadyStateChange = events[4],\r\n    eventAbort = events[5];\r\n\r\n\r\nvar singleton,\r\n    prototype = 'prototype';\r\n\r\n\r\nexport function proxy(proxy) {\r\n    if (singleton) throw \"Proxy already exists\";\r\n    return singleton = new Proxy(proxy);\r\n}\r\n\r\nexport function unProxy() {\r\n    singleton = null\r\n    unHook()\r\n}\r\n\r\nfunction trim(str) {\r\n    return str.replace(/^\\s+|\\s+$/g, '');\r\n}\r\n\r\nfunction getEventTarget(xhr) {\r\n    return xhr.watcher || (xhr.watcher = document.createElement('a'));\r\n}\r\n\r\nfunction triggerListener(xhr, name) {\r\n    var xhrProxy = xhr.getProxy();\r\n    var callback = 'on' + name + '_';\r\n    var event = configEvent({type: name}, xhrProxy);\r\n    xhrProxy[callback] && xhrProxy[callback](event);\r\n    var evt;\r\n    if(typeof(Event) === 'function') {\r\n        evt = new Event(name,{bubbles: false});\r\n    } else {\r\n        // https://stackoverflow.com/questions/27176983/dispatchevent-not-working-in-ie11\r\n        evt = document.createEvent('Event');\r\n        evt.initEvent(name, false, true);\r\n    }\r\n    getEventTarget(xhr).dispatchEvent(evt);\r\n}\r\n\r\n\r\nfunction Handler(xhr) {\r\n    this.xhr = xhr;\r\n    this.xhrProxy = xhr.getProxy();\r\n}\r\n\r\nHandler[prototype] = Object.create({\r\n    resolve: function resolve(response) {\r\n        var xhrProxy = this.xhrProxy;\r\n        var xhr = this.xhr;\r\n        xhrProxy.readyState = 4;\r\n        xhr.resHeader = response.headers;\r\n        xhrProxy.response = xhrProxy.responseText = response.response;\r\n        xhrProxy.statusText = response.statusText;\r\n        xhrProxy.status = response.status;\r\n        triggerListener(xhr, eventReadyStateChange);\r\n        triggerListener(xhr, eventLoad);\r\n        triggerListener(xhr, eventLoadEnd);\r\n    },\r\n    reject: function reject(error) {\r\n        this.xhrProxy.status = 0;\r\n        triggerListener(this.xhr, error.type);\r\n        triggerListener(this.xhr, eventLoadEnd);\r\n    }\r\n});\r\n\r\nfunction makeHandler(next) {\r\n    function sub(xhr) {\r\n        Handler.call(this, xhr);\r\n    }\r\n\r\n    sub[prototype] = Object.create(Handler[prototype]);\r\n    sub[prototype].next = next;\r\n    return sub;\r\n}\r\n\r\nvar RequestHandler = makeHandler(function (rq) {\r\n    var xhr = this.xhr;\r\n    rq = rq || xhr.config;\r\n    xhr.withCredentials = rq.withCredentials;\r\n    xhr.open(rq.method, rq.url, rq.async !== false, rq.user, rq.password);\r\n    for (var key in rq.headers) {\r\n        xhr.setRequestHeader(key, rq.headers[key]);\r\n    }\r\n    xhr.send(rq.body);\r\n});\r\n\r\nvar ResponseHandler = makeHandler(function (response) {\r\n    this.resolve(response);\r\n});\r\n\r\nvar ErrorHandler = makeHandler(function (error) {\r\n    this.reject(error);\r\n});\r\n\r\nfunction Proxy(proxy) {\r\n    var onRequest = proxy.onRequest,\r\n        onResponse = proxy.onResponse,\r\n        onError = proxy.onError;\r\n\r\n    function handleResponse(xhr, xhrProxy) {\r\n        var handler = new ResponseHandler(xhr);\r\n        if (!onResponse) return handler.resolve();\r\n        var ret = {\r\n            response: xhrProxy.response,\r\n            status: xhrProxy.status,\r\n            statusText: xhrProxy.statusText,\r\n            config: xhr.config,\r\n            headers: xhr.resHeader || xhr.getAllResponseHeaders().split('\\r\\n').reduce(function (ob, str) {\r\n                if (str === \"\") return ob;\r\n                var m = str.split(\":\");\r\n                ob[m.shift()] = trim(m.join(':'));\r\n                return ob;\r\n            }, {})\r\n        };\r\n        onResponse(ret, handler);\r\n    }\r\n\r\n    function onerror(xhr, xhrProxy, e) {\r\n        var handler = new ErrorHandler(xhr);\r\n        var error = {config: xhr.config, error: e};\r\n        if (onError) {\r\n            onError(error, handler);\r\n        } else {\r\n            handler.next(error);\r\n        }\r\n    }\r\n\r\n    function preventXhrProxyCallback() {\r\n        return true;\r\n    }\r\n\r\n    function errorCallback(xhr, e) {\r\n        onerror(xhr, this, e);\r\n        return true;\r\n    }\r\n\r\n    function stateChangeCallback(xhr, xhrProxy) {\r\n        if (xhr.readyState === 4 && xhr.status !== 0) {\r\n            handleResponse(xhr, xhrProxy);\r\n        } else if (xhr.readyState !== 4) {\r\n            triggerListener(xhr, eventReadyStateChange);\r\n        }\r\n        return true;\r\n    }\r\n\r\n    return hook({\r\n        onload: preventXhrProxyCallback,\r\n        onloadend: preventXhrProxyCallback,\r\n        onerror: errorCallback,\r\n        ontimeout: errorCallback,\r\n        onabort: errorCallback,\r\n        onreadystatechange: function (xhr) {\r\n            return stateChangeCallback(xhr, this);\r\n        },\r\n        open: function open(args, xhr) {\r\n            var _this = this;\r\n            var config = xhr.config = {headers: {}};\r\n            config.method = args[0];\r\n            config.url = args[1];\r\n            config.async = args[2];\r\n            config.user = args[3];\r\n            config.password = args[4];\r\n            config.xhr = xhr;\r\n            var evName = 'on' + eventReadyStateChange;\r\n            if (!xhr[evName]) {\r\n                xhr[evName] = function () {\r\n                    return stateChangeCallback(xhr, _this);\r\n                };\r\n            }\r\n\r\n            var defaultErrorHandler = function defaultErrorHandler(e) {\r\n                onerror(xhr, _this, configEvent(e, _this));\r\n            };\r\n            [eventError, eventTimeout, eventAbort].forEach(function (e) {\r\n                var event = 'on' + e;\r\n                if (!xhr[event]) xhr[event] = defaultErrorHandler;\r\n            });\r\n\r\n            // 如果有请求拦截器，则在调用onRequest后再打开链接。因为onRequest最佳调用时机是在send前，\r\n            // 所以我们在send拦截函数中再手动调用open，因此返回true阻止xhr.open调用。\r\n            //\r\n            // 如果没有请求拦截器，则不用阻断xhr.open调用\r\n            if (onRequest) return true;\r\n        },\r\n        send: function (args, xhr) {\r\n            var config = xhr.config\r\n            config.withCredentials=xhr.withCredentials\r\n            config.body = args[0];\r\n            if (onRequest) {\r\n                // In 'onRequest', we may call XHR's event handler, such as `xhr.onload`.\r\n                // However, XHR's event handler may not be set until xhr.send is called in\r\n                // the user's code, so we use `setTimeout` to avoid this situation\r\n                var req = function () {\r\n                    onRequest(config, new RequestHandler(xhr));\r\n                }\r\n                config.async === false ? req() : setTimeout(req)\r\n                return true;\r\n            }\r\n        },\r\n        setRequestHeader: function (args, xhr) {\r\n            // Collect request headers\r\n            xhr.config.headers[args[0].toLowerCase()] = args[1];\r\n            return true;\r\n        },\r\n        addEventListener: function (args, xhr) {\r\n            var _this = this;\r\n            if (events.indexOf(args[0]) !== -1) {\r\n                var handler = args[1];\r\n                getEventTarget(xhr).addEventListener(args[0], function (e) {\r\n                    var event = configEvent(e, _this);\r\n                    event.type = args[0];\r\n                    event.isTrusted = true;\r\n                    handler.call(_this, event);\r\n                });\r\n                return true;\r\n            }\r\n        },\r\n        getAllResponseHeaders: function (_, xhr) {\r\n            var headers = xhr.resHeader\r\n            if (headers) {\r\n                var header = \"\";\r\n                for (var key in headers) {\r\n                    header += key + ': ' + headers[key] + '\\r\\n';\r\n                }\r\n                return header;\r\n            }\r\n        },\r\n        getResponseHeader: function (args, xhr) {\r\n            var headers = xhr.resHeader\r\n            if (headers) {\r\n                return headers[(args[0] || '').toLowerCase()];\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\n","// TODO:\r\n\r\nclass ErrorCatch {\r\n  constructor(options) {\r\n    this._options = options;\r\n    this.init();\r\n  }\r\n\r\n  formatError(errObj) {\r\n    let col = errObj.column || errObj.columnNumber; // Safari Firefox\r\n    let row = errObj.line || errObj.lineNumber; // Safari Firefox\r\n    let message = errObj.message;\r\n    let name = errObj.name;\r\n\r\n    console.log(\"error=======stacl=<<<>>>\", errObj);\r\n\r\n    let { stack } = errObj;\r\n    if (stack) {\r\n      console.log(\"error====statck存在===stacl=<<<>>>\", errObj);\r\n      let matchUrl = stack.match(/https?:\\/\\/[^\\n]+/);\r\n      let urlFirstStack = matchUrl ? matchUrl[0] : \"\";\r\n      let regUrlCheck = /https?:\\/\\/(\\S)*\\.js/;\r\n\r\n      let resourceUrl = \"\";\r\n      if (regUrlCheck.test(urlFirstStack)) {\r\n        resourceUrl = urlFirstStack.match(regUrlCheck)[0];\r\n      }\r\n\r\n      let stackCol = null;\r\n      let stackRow = null;\r\n      let posStack = urlFirstStack.match(/:(\\d+):(\\d+)/);\r\n      if (posStack && posStack.length >= 3) {\r\n        [, stackCol, stackRow] = posStack;\r\n      }\r\n\r\n      // TODO formatStack\r\n      return {\r\n        content: stack,\r\n        col: Number(col || stackCol),\r\n        row: Number(row || stackRow),\r\n        message,\r\n        name,\r\n        resourceUrl,\r\n      };\r\n    }\r\n\r\n    return {\r\n      row,\r\n      col,\r\n      message,\r\n      name,\r\n    };\r\n  }\r\n\r\n  init() {\r\n    let _originOnerror = window.onerror;\r\n    window.onerror = (...arg) => {\r\n      let [errorMessage, scriptURI, lineNumber, columnNumber, errorObj] = arg;\r\n\r\n      let errorInfo = this.formatError(errorObj);\r\n      errorInfo._errorMessage = errorMessage;\r\n      errorInfo._scriptURI = scriptURI;\r\n      errorInfo._lineNumber = lineNumber;\r\n      errorInfo._columnNumber = columnNumber;\r\n      errorInfo.type = \"onerror\";\r\n      this._options.callback(errorInfo);\r\n      _originOnerror && _originOnerror.apply(window, arg);\r\n    };\r\n\r\n    let _originOnunhandledrejection = window.onunhandledrejection;\r\n    window.onunhandledrejection = (...arg) => {\r\n      let e = arg[0];\r\n      let reason = e.reason;\r\n      this._options.callback({\r\n        type: e.type || \"unhandledrejection\",\r\n        reason,\r\n      });\r\n      _originOnunhandledrejection &&\r\n        _originOnunhandledrejection.apply(window, arg);\r\n    };\r\n  }\r\n}\r\n\r\nexport default ErrorCatch;\r\n","/*\r\n * @Author: zhanghongwei\r\n * @Date: 2020-05-23 14:36:43\r\n * @Last Modified by: mikey.zhaopeng\r\n * @Last Modified time: 2020-06-24 09:20:10\r\n */\r\n\r\nimport Perf from \"./performance\";\r\nimport { proxy as ajaxHook, unProxy } from \"./ajaxHook/xhr-proxy\";\r\nimport ErrorCatch from \"./error/index.js\";\r\n// import worker from \"./worker\";\r\nclass Monitor {\r\n  constructor() {\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    // worker();\r\n    // 收集ajax fetch\r\n    // ajaxHook({\r\n    //   //请求成功后进入\r\n    //   onResponse: (response, handler) => {\r\n    //     handler.next(response);\r\n    //   },\r\n    // });\r\n\r\n    // 性能监控\r\n    const pf = new Perf({\r\n      timingReport: (data) => {\r\n        console.log(123);\r\n        console.log(\"data=======>\", data);\r\n      },\r\n      resourceReport: (data) => {},\r\n    });\r\n\r\n    // 收集错误信息\r\n    // const error = new ErrorCatch({\r\n    //   callback: (err) => {\r\n    //     console.log(\"err================<\", err);\r\n    //   },\r\n    // });\r\n  }\r\n}\r\n\r\nnew Monitor();\r\n// import { _, userAgent, addListener } from \"./utils/index\";\r\n\r\n// // let infos = _.info.properties(),;\r\n// window._ = _;\r\n\r\n// console.log(\"infos======>\", _.info.pageviewInfo());\r\n"],"names":["Config","platform","_platform","objectTypes","_root","window","oldRoot","root","freeExports","exports","freeModule","module","nodeType","freeGlobal","global","self","maxSafeInteger","Math","pow","reOpera","thisBinding","objectProto","Object","prototype","hasOwnProperty","toString","init","string","String","charAt","toUpperCase","slice","os","pattern","label","data","test","exec","replace","RegExp","format","split","object","callback","index","length","forOwn","trim","capitalize","key","call","value","property","type","array","accumulator","each","ua","_this","context","isCustomContext","getClassOf","nav","navigator","userAgent","isModuleScope","likeChrome","objectClass","airRuntimeClass","enviroClass","javaClass","java","phantomClass","rhino","environment","alpha","beta","doc","document","opera","operamini","operaClass","arch","description","prerelease","useFeatures","version","isSpecialCasedOS","layout","getLayout","name","getName","product","getProduct","manufacturer","getManufacturer","iPad","iPhone","iPod","Kindle","Transformer","Nook","PlayBook","Nexus","TouchPad","Xbox","Xoom","Wii","Lumia","PlayStation","getOS","guesses","reduce","result","guess","qualify","cleanupOS","getVersion","patterns","toStringPlatform","push","parse","unshift","indexOf","parseFloat","isHostType","lang","System","getProperty","require","join","e","system","process","browser","versions","electron","node","nw","runtime","flash","Capabilities","phantom","major","minor","patch","documentMode","toFixed","appMinorVersion","external","parseInt","family","architecture","cpuClass","define","amd","win","loc","width","height","ArrayProto","Array","FuncProto","Function","ObjProto","windowConsole","console","windowOpera","screen","nativeBind","bind","nativeForEach","forEach","nativeIndexOf","nativeIsArray","isArray","breaker","_","str","DEBUG","isUndefined","log","apply","arguments","err","arg","args","concat","toArray","error","func","bound","isFunction","TypeError","ctor","bind_instance_methods","obj","iterator","undefined","i","l","escapeHTML","s","escaped","isString","extend","source","prop","f","x","isArguments","iterable","values","keys","results","identity","include","target","found","includes","needle","inherit","subclass","superclass","constructor","isObject","isEmptyObject","isDate","isNumber","isElement","encodeDates","v","k","formatDate","timestamp","now","Date","d","pad","n","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","safewrap","critical","safewrap_class","klass","functions","safewrap_instance_methods","strip_empty_properties","p","ret","truncate","val","JSONEncode","mixed_val","quote","escapable","meta","lastIndex","a","c","charCodeAt","holder","gap","indent","mind","partial","toJSON","isFinite","JSONDecode","at","text","m","SyntaxError","next","ch","number","hex","uffff","fromCharCode","escapee","white","word","base64Encode","b64","o1","o2","o3","h1","h2","h3","h4","bits","ac","enc","tmp_arr","utf8Encode","utftext","start","end","stringl","c1","substring","UUID","T","R","random","UA","buffer","xor","byte_array","j","tmp","se","isBlockedUA","HTTPBuildQuery","formdata","arg_separator","use_val","use_key","encodeURIComponent","getQueryParam","url","param","regexS","regex","decodeURIComponent","getHashParam","hash","matches","match","cookie","nameEQ","ca","get","seconds","is_cross_subdomain","is_secure","is_cross_site","domain_override","cdomain","expires","secure","domain","extract_domain","location","hostname","date","setTime","getTime","toGMTString","days","new_cookie_val","set","_localStorage_supported","localStorage","supported","remove","msg","getItem","setItem","removeItem","register_event","element","handler","oldSchool","useCapture","addEventListener","ontype","old_handler","makeHandler","new_handler","old_handlers","event","fixEvent","old_result","new_result","preventDefault","stopPropagation","returnValue","cancelBubble","TOKEN_MATCH_REGEX","dom_query","getAllChildren","all","getElementsByTagName","bad_whitespace","hasClass","elem","selector","className","getElementsBySelector","tokens","token","tagName","foundCount","elements","currentContextIndex","currentContext","id","getElementById","nodeName","toLowerCase","token_match","attrName","attrOperator","attrValue","checkFunction","getAttribute","lastIndexOf","query","info","campaign_keywords","kw","params","kwkey","URL","referrer","search","searchEngine","keyword","user_agent","referringDomain","device","href","LIB_VERSION","page","systemInfo","SIMPLE_DOMAIN_MATCH_REGEX","DOMAIN_MATCH_REGEX","domain_regex","parts","tld","addListener","attachEvent","onload","cb","readyState","properties","performance","mozPerformance","msPerformance","webkitPerformance","Perf","options","_options","isOnload","isDOMReady","cycleFreq","domready","perfData","getTimingReport","timingReport","getResourceReport","filterTime","b","resolvePerformanceTiming","timing","o","initiatorType","duration","redirectEnd","redirectStart","domainLookupEnd","domainLookupStart","connectEnd","connectStart","startTime","responseStart","requestStart","responseEnd","resolveEntries","entries","map","item","PerformanceObserver","observer","list","getEntries","resourceReport","observe","getEntriesByType","fetchStart","navigationStart","domComplete","domLoading","loadEventEnd","loadEventStart","domContentLoadedEventStart","domInteractive","that","timer","runCheck","setTimeout","configEvent","xhrProxy","attr","currentTarget","events","eventLoad","eventLoadEnd","eventReadyStateChange","getEventTarget","xhr","watcher","createElement","triggerListener","getProxy","evt","Event","bubbles","createEvent","initEvent","dispatchEvent","Handler","create","resolve","response","resHeader","headers","responseText","statusText","status","reject","sub","RequestHandler","rq","config","withCredentials","open","method","async","user","password","setRequestHeader","send","body","ResponseHandler","ErrorHandler","ErrorCatch","errObj","col","column","columnNumber","row","line","lineNumber","message","stack","matchUrl","urlFirstStack","regUrlCheck","resourceUrl","stackCol","stackRow","posStack","Number","_originOnerror","onerror","errorMessage","scriptURI","errorObj","errorInfo","formatError","_errorMessage","_scriptURI","_lineNumber","_columnNumber","_originOnunhandledrejection","onunhandledrejection","reason","Monitor","pf"],"mappings":";;;;;;AAAA,IAAIA,SAAS;WACF,KADE;iBAEI;CAFjB;;;;;;;;ICAMC;sBACU;;;SACPC,SAAL,GAAiB,EAAjB;SACKC,WAAL,GAAmB;gBACP,IADO;cAET;KAFV;;SAKKC,KAAL,GAAc,KAAKD,WAAL,QAAwBE,MAAxB,yCAAwBA,MAAxB,MAAmCA,MAApC,IAA+C,IAA5D;SACKC,OAAL,GAAe,KAAKC,IAApB;SACKC,WAAL,GAAmB,KAAKL,WAAL,QAAwBM,OAAxB,yCAAwBA,OAAxB,MAAoCA,OAAvD;SACKC,UAAL,GACE,KAAKP,WAAL,QAAwBQ,MAAxB,yCAAwBA,MAAxB,MAAmCA,MAAnC,IAA6C,CAACA,OAAOC,QAArD,IAAiED,MADnE;SAEKE,UAAL,GACE,KAAKL,WAAL,IACA,KAAKE,UADL,IAEA,QAAOI,MAAP,yCAAOA,MAAP,MAAiB,QAFjB,IAGAA,MAJF;QAME,KAAKD,UAAL,KACC,KAAKA,UAAL,CAAgBC,MAAhB,KAA2B,KAAKD,UAAhC,IACC,KAAKA,UAAL,CAAgBR,MAAhB,KAA2B,KAAKQ,UADjC,IAEC,KAAKA,UAAL,CAAgBE,IAAhB,KAAyB,KAAKF,UAHhC,CADF,EAKE;WACKN,IAAL,GAAY,KAAKM,UAAjB;;;SAGGG,cAAL,GAAsBC,KAAKC,GAAL,CAAS,CAAT,EAAY,EAAZ,IAAkB,CAAxC;SACKC,OAAL,GAAe,SAAf;SACKC,WAAL,GAAmB,IAAnB;SACKC,WAAL,GAAmBC,OAAOC,SAA1B;SACKC,cAAL,GAAsB,KAAKH,WAAL,CAAiBG,cAAvC;SACKC,QAAL,GAAgB,KAAKJ,WAAL,CAAiBI,QAAjC;;SAEKC,IAAL;;;;;+BAGSC,QAAQ;eACRC,OAAOD,MAAP,CAAT;aACOA,OAAOE,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCH,OAAOI,KAAP,CAAa,CAAb,CAAxC;;;;8BAGQC,IAAIC,SAASC,OAAO;UACxBC,OAAO;gBACD,IADC;eAEF,sBAFE;eAGF,KAHE;eAIF,GAJE;eAKF,oBALE;eAMF,qBANE;eAOF,yBAPE;eAQF,IARE;gBASD,UATC;eAUF,MAVE;eAWF,IAXE;gBAYD;OAZV;;UAgBEF,WACAC,KADA,IAEA,QAAQE,IAAR,CAAaJ,EAAb,CAFA,IAGA,CAAC,mBAAmBI,IAAnB,CAAwBJ,EAAxB,CAHD,KAICG,OAAOA,KAAK,UAAUE,IAAV,CAAeL,EAAf,CAAL,CAJR,CADF,EAME;aACK,aAAaG,IAAlB;;;WAGGP,OAAOI,EAAP,CAAL;;UAEIC,WAAWC,KAAf,EAAsB;aACfF,GAAGM,OAAH,CAAWC,OAAON,OAAP,EAAgB,GAAhB,CAAX,EAAiCC,KAAjC,CAAL;;;WAGG,KAAKM,MAAL,CACHR,GACGM,OADH,CACW,OADX,EACoB,KADpB,EAEGA,OAFH,CAEW,QAFX,EAEqB,KAFrB,EAGGA,OAHH,CAGW,eAHX,EAG4B,QAH5B,EAIGA,OAJH,CAIW,aAJX,EAI0B,KAJ1B,EAKGA,OALH,CAKW,mBALX,EAKgC,IALhC,EAMGA,OANH,CAMW,gBANX,EAM6B,IAN7B,EAOGA,OAPH,CAOW,QAPX,EAOqB,KAPrB,EAQGA,OARH,CAQW,IARX,EAQiB,GARjB,EASGA,OATH,CASW,4BATX,EASyC,EATzC,EAUGA,OAVH,CAUW,eAVX,EAU4B,QAV5B,EAWGA,OAXH,CAWW,wBAXX,EAWqC,IAXrC,EAYGA,OAZH,CAYW,4BAZX,EAYyC,IAZzC,EAaGG,KAbH,CAaS,MAbT,EAaiB,CAbjB,CADG,CAAL;;aAiBOT,EAAP;;;;yBAEGU,QAAQC,UAAU;UACjBC,QAAQ,CAAC,CAAb;UACEC,SAASH,SAASA,OAAOG,MAAhB,GAAyB,CADpC;;UAIE,OAAOA,MAAP,IAAiB,QAAjB,IACAA,SAAS,CAAC,CADV,IAEAA,UAAU,KAAK7B,cAHjB,EAIE;eACO,EAAE4B,KAAF,GAAUC,MAAjB,EAAyB;mBACdH,OAAOE,KAAP,CAAT,EAAwBA,KAAxB,EAA+BF,MAA/B;;OANJ,MAQO;aACAI,MAAL,CAAYJ,MAAZ,EAAoBC,QAApB;;;;;2BAIGhB,QAAQ;eACJ,KAAKoB,IAAL,CAAUpB,MAAV,CAAT;qCAC8BS,IAAvB,CAA4BT,MAA5B,IACHA,MADG,GAEH,KAAKqB,UAAL,CAAgBrB,MAAhB;;;;;2BAGCe,QAAQC,UAAU;WAClB,IAAIM,GAAT,IAAgBP,MAAhB,EAAwB;YAClBlB,eAAe0B,IAAf,CAAoBR,MAApB,EAA4BO,GAA5B,CAAJ,EAAsC;mBAC3BP,OAAOO,GAAP,CAAT,EAAsBA,GAAtB,EAA2BP,MAA3B;;;;;;+BAKKS,OAAO;aACTA,SAAS,IAAT,GACH,KAAKH,UAAL,CAAgBG,KAAhB,CADG,GAEH1B,SAASyB,IAAT,CAAcC,KAAd,EAAqBpB,KAArB,CAA2B,CAA3B,EAA8B,CAAC,CAA/B,CAFJ;;;;+BAKSW,QAAQU,UAAU;UACvBC,OAAOX,UAAU,IAAV,WAAwBA,OAAOU,QAAP,CAAxB,IAA2C,QAAtD;aAEE,CAAC,wCAAwChB,IAAxC,CAA6CiB,IAA7C,CAAD,KACCA,QAAQ,QAAR,GAAmB,CAAC,CAACX,OAAOU,QAAP,CAArB,GAAwC,IADzC,CADF;;;;4BAMMzB,QAAQ;aACPC,OAAOD,MAAP,EAAeW,OAAf,CAAuB,cAAvB,EAAuC,KAAvC,CAAP;;;;2BAGKgB,OAAOX,UAAU;UAClBY,cAAc,IAAlB;WACKC,IAAL,CAAUF,KAAV,EAAiB,UAAUH,KAAV,EAAiBP,KAAjB,EAAwB;sBACzBD,SAASY,WAAT,EAAsBJ,KAAtB,EAA6BP,KAA7B,EAAoCU,KAApC,CAAd;OADF;aAGOC,WAAP;;;;yBAGG5B,QAAQ;aACJC,OAAOD,MAAP,EAAeW,OAAf,CAAuB,UAAvB,EAAmC,EAAnC,CAAP;;;;0BAGImB,IAAI;UACJC,QAAQ,IAAZ;UACIC,UAAU,KAAKvD,KAAnB;UACIwD,kBACFH,MAAM,QAAOA,EAAP,yCAAOA,EAAP,MAAa,QAAnB,IAA+B,KAAKI,UAAL,CAAgBJ,EAAhB,KAAuB,QADxD;;UAGIG,eAAJ,EAAqB;kBACTH,EAAV;aACK,IAAL;;;UAGEK,MAAMH,QAAQI,SAAR,IAAqB,EAA/B;UACIC,YAAYF,IAAIE,SAAJ,IAAiB,EAAjC;;aAEOP,KAAKO,SAAZ;;UAEIC,gBAAgBL,mBAAmB,KAAKxC,WAAL,IAAoB,KAAKd,OAAhE;;UAEI4D,aAAaN,kBACb,CAAC,CAACE,IAAII,UADO,GAEb,aAAa9B,IAAb,CAAkBqB,EAAlB,KAAyB,CAAC,eAAerB,IAAf,CAAoBX,SAASA,QAAT,EAApB,CAF9B;;UAII0C,cAAc,QAAlB;UACEC,kBAAkBR,kBACdO,WADc,GAEd,2BAHN;UAIEE,cAAcT,kBAAkBO,WAAlB,GAAgC,aAJhD;UAKEG,YACEV,mBAAmBD,QAAQY,IAA3B,GACI,aADJ,GAEI,KAAKV,UAAL,CAAgBF,QAAQY,IAAxB,CARR;UASEC,eAAeZ,kBAAkBO,WAAlB,GAAgC,eATjD;;UAWII,OAAO,SAASnC,IAAT,CAAckC,SAAd,KAA4BX,QAAQY,IAA/C;UACIE,QAAQF,QAAQ,KAAKV,UAAL,CAAgBF,QAAQe,WAAxB,KAAwCL,WAA5D;UACIM,QAAQJ,OAAO,GAAP,GAAa,QAAzB;UACIK,OAAOL,OAAO,GAAP,GAAa,QAAxB;UACIM,MAAMlB,QAAQmB,QAAR,IAAoB,EAA9B;UACIC,QAAQpB,QAAQqB,SAAR,IAAqBrB,QAAQoB,KAAzC;UACIE,aAAa,IAAjB;mBACa,KAAK9D,OAAL,CAAaiB,IAAb,CACV6C,aACCrB,mBAAmBmB,KAAnB,GAA2BA,MAAM,WAAN,CAA3B,GAAgD,KAAKlB,UAAL,CAAgBkB,KAAhB,CAFvC,IAITE,UAJS,GAKRF,QAAQ,IALb;UAMI5C,aAAJ;UACI+C,OAAOzB,EAAX;UACI0B,cAAc,EAAlB;UACIC,aAAa,IAAjB;UACIC,cAAc5B,MAAMO,SAAxB;UACIsB,UACFD,eACAN,KADA,IAEA,OAAOA,MAAMO,OAAb,IAAwB,UAFxB,IAGAP,MAAMO,OAAN,EAJF;UAKIC,yBAAJ;;UAEIC,SAASC,UAAUvC,IAAV,CAAe,IAAf,EAAqB,CAChC,EAAEhB,OAAO,UAAT,EAAqBD,SAAS,sBAA9B,EADgC,EAEhC,SAFgC,EAGhC,EAAEC,OAAO,QAAT,EAAmBD,SAAS,aAA5B,EAHgC,EAIhC,MAJgC,EAKhC,QALgC,EAMhC,UANgC,EAOhC,QAPgC,EAQhC,OARgC,EAShC,OATgC,CAArB,CAAb;;;UAaIyD,OAAOC,QAAQ,CACjB,WADiB,EAEjB,OAFiB,EAGjB,eAHiB,EAIjB,QAJiB,EAKjB,QALiB,EAMjB,UANiB,EAOjB,UAPiB,EAQjB,QARiB,EASjB,OATiB,EAUjB,QAViB,EAWjB,cAXiB,EAYjB,MAZiB,EAajB,WAbiB,EAcjB,UAdiB,EAejB,WAfiB,EAgBjB,WAhBiB,EAiBjB,SAjBiB,EAkBjB,EAAEzD,OAAO,gBAAT,EAA2BD,SAAS,0BAApC,EAlBiB,EAmBjB,QAnBiB,EAoBjB,cApBiB,EAqBjB,UArBiB,EAsBjB,WAtBiB,EAuBjB,OAvBiB,EAwBjB,QAxBiB,EAyBjB,UAzBiB,EA0BjB,EAAEC,OAAO,kBAAT,EAA6BD,SAAS,gBAAtC,EA1BiB,EA2BjB,WA3BiB,EA4BjB,EAAEC,OAAO,MAAT,EAAiBD,SAAS,6BAA1B,EA5BiB,EA6BjB,UA7BiB,EA8BjB,aA9BiB,EA+BjB,EAAEC,OAAO,aAAT,EAAwBD,SAAS,MAAjC,EA/BiB,EAgCjB,SAhCiB,EAiCjB,UAjCiB,EAkCjB,UAlCiB,EAmCjB,aAnCiB,EAoCjB,YApCiB,EAqCjB,EAAEC,OAAO,YAAT,EAAuBD,SAAS,OAAhC,EArCiB,EAsCjB,OAtCiB,EAuCjB,EAAEC,OAAO,OAAT,EAAkBD,SAAS,KAA3B,EAvCiB,EAwCjB,QAxCiB,EAyCjB,EAAEC,OAAO,eAAT,EAA0BD,SAAS,gBAAnC,EAzCiB,EA0CjB,EAAEC,OAAO,SAAT,EAAoBD,SAAS,uBAA7B,EA1CiB,EA2CjB,EAAEC,OAAO,iBAAT,EAA4BD,SAAS,OAArC,EA3CiB,EA4CjB,EAAEC,OAAO,IAAT,EAAeD,SAAS,UAAxB,EA5CiB,EA6CjB,EAAEC,OAAO,IAAT,EAAeD,SAAS,MAAxB,EA7CiB,EA8CjB,QA9CiB,CAAR,CAAX;;UAiDI2D,UAAUC,WAAW,CACvB,EAAE3D,OAAO,YAAT,EAAuBD,SAAS,MAAhC,EADuB,EAEvB,YAFuB,EAGvB,EAAEC,OAAO,UAAT,EAAqBD,SAAS,UAA9B,EAHuB,EAIvB,EAAEC,OAAO,WAAT,EAAsBD,SAAS,UAA/B,EAJuB,EAKvB,EAAEC,OAAO,WAAT,EAAsBD,SAAS,UAA/B,EALuB,EAMvB,EAAEC,OAAO,WAAT,EAAsBD,SAAS,UAA/B,EANuB,EAOvB,EAAEC,OAAO,WAAT,EAAsBD,SAAS,SAA/B,EAPuB,EAQvB,EAAEC,OAAO,WAAT,EAAsBD,SAAS,SAA/B,EARuB,EASvB,EAAEC,OAAO,gBAAT,EAA2BD,SAAS,SAApC,EATuB,EAUvB,EAAEC,OAAO,WAAT,EAAsBD,SAAS,SAA/B,EAVuB,EAWvB,EAAEC,OAAO,gBAAT,EAA2BD,SAAS,SAApC,EAXuB,EAYvB,WAZuB,EAavB,OAbuB,EAcvB,MAduB,EAevB,MAfuB,EAgBvB,QAhBuB,EAiBvB,QAjBuB,EAkBvB,EAAEC,OAAO,aAAT,EAAwBD,SAAS,6BAAjC,EAlBuB,EAmBvB,OAnBuB,EAoBvB,MApBuB,EAqBvB,UArBuB,EAsBvB,kBAtBuB,EAuBvB,aAvBuB,EAwBvB,UAxBuB,EAyBvB,aAzBuB,EA0BvB,EAAEC,OAAO,OAAT,EAAkBD,SAAS,MAA3B,EA1BuB,EA2BvB,KA3BuB,EA4BvB,UA5BuB,EA6BvB,EAAEC,OAAO,UAAT,EAAqBD,SAAS,MAA9B,EA7BuB,EA8BvB,MA9BuB,CAAX,CAAd;;UAiCI6D,eAAeC,gBAAgB;eAC1B,EAAEC,MAAM,CAAR,EAAWC,QAAQ,CAAnB,EAAsBC,MAAM,CAA5B,EAD0B;gBAEzB,EAFyB;gBAGzB,EAAEC,QAAQ,CAAV,EAAa,eAAe,CAA5B,EAHyB;cAI3B,EAAEC,aAAa,CAAf,EAJ2B;0BAKf,EAAEC,MAAM,CAAR,EALe;oBAMrB,EAAEC,UAAU,CAAZ,EANqB;gBAOzB,EAAE,aAAa,CAAf,EAAkBC,OAAO,CAAzB,EAPyB;YAQ7B,EAAEC,UAAU,CAAZ,EAR6B;aAS5B,EAT4B;YAU7B,EAV6B;mBAWtB,EAAEC,MAAM,CAAR,EAAW,YAAY,CAAvB,EAXsB;kBAYvB,EAAEC,MAAM,CAAR,EAZuB;kBAavB,EAAE,SAAS,CAAX,EAAcC,KAAK,CAAnB,EAbuB;eAc1B,EAAEC,OAAO,CAAT,EAd0B;iBAexB;sBACK,CADL;uBAEM,CAFN;uBAGM,CAHN;uBAIM;SAnBkB;cAqB3B,EAAEC,aAAa,CAAf,EAAkB,oBAAoB,CAAtC;OArBW,CAAnB;;;UAyBI7E,KAAK8E,MAAM,CACb,eADa,EAEb,SAFa,EAGb,QAHa,EAIb,EAAE5E,OAAO,WAAT,EAAsBD,SAAS,MAA/B,EAJa,EAKb,QALa,EAMb,QANa,EAOb,SAPa,EAQb,QARa,EASb,OATa,EAUb,SAVa,EAWb,YAXa,EAYb,SAZa,EAab,SAba,EAcb,MAda,EAeb,QAfa,EAgBb,SAhBa,EAiBb,QAjBa,EAkBb,YAlBa,EAmBb,OAnBa,EAoBb,QApBa,EAqBb,OArBa,EAsBb,WAtBa,EAuBb,OAvBa,EAwBb,OAxBa,EAyBb,UAzBa,EA0Bb,WA1Ba,EA2Bb,KA3Ba,EA4Bb,aA5Ba,EA6Bb,UA7Ba,CAAN,CAAT;;eAgCSwD,SAAT,CAAmBsB,OAAnB,EAA4B;eACnBrD,MAAMsD,MAAN,CAAaD,OAAb,EAAsB,UAAUE,MAAV,EAAkBC,KAAlB,EAAyB;iBAElDD,UACC1E,OACC,SAAS2E,MAAMjF,OAAN,IAAiByB,MAAMyD,OAAN,CAAcD,KAAd,CAA1B,IAAkD,KADnD,EAEC,GAFD,EAGC7E,IAHD,CAGMoB,EAHN,MAIEyD,MAAMhF,KAAN,IAAegF,KAJjB,CAFH;SADK,CAAP;;;eAYOnB,eAAT,CAAyBgB,OAAzB,EAAkC;eACzBrD,MAAMsD,MAAN,CAAaD,OAAb,EAAsB,UAAUE,MAAV,EAAkB9D,KAAlB,EAAyBF,GAAzB,EAA8B;;iBAGvDgE,UACC,CAAC9D,MAAMyC,OAAN,KACAzC,MAAM,0BAA0Bd,IAA1B,CAA+BuD,OAA/B,CAAN,CADA,IAEArD,OAAO,QAAQmB,MAAMyD,OAAN,CAAclE,GAAd,CAAR,GAA6B,iBAApC,EAAuD,GAAvD,EAA4DZ,IAA5D,CACEoB,EADF,CAFD,KAKCR,GAPJ;SAFK,CAAP;;;eAcO0C,OAAT,CAAiBoB,OAAjB,EAA0B;eACjBrD,MAAMsD,MAAN,CAAaD,OAAb,EAAsB,UAAUE,MAAV,EAAkBC,KAAlB,EAAyB;iBAElDD,UACC1E,OACC,SAAS2E,MAAMjF,OAAN,IAAiByB,MAAMyD,OAAN,CAAcD,KAAd,CAA1B,IAAkD,KADnD,EAEC,GAFD,EAGC7E,IAHD,CAGMoB,EAHN,MAIEyD,MAAMhF,KAAN,IAAegF,KAJjB,CAFH;SADK,CAAP;;;eAYOJ,KAAT,CAAeC,OAAf,EAAwB;eACfrD,MAAMsD,MAAN,CAAaD,OAAb,EAAsB,UAAUE,MAAV,EAAkBC,KAAlB,EAAyB;cAChDjF,UAAUiF,MAAMjF,OAAN,IAAiByB,MAAMyD,OAAN,CAAcD,KAAd,CAA/B;cAEE,CAACD,MAAD,KACCA,SAAS1E,OAAO,QAAQN,OAAR,GAAkB,uBAAzB,EAAkD,GAAlD,EAAuDI,IAAvD,CACRoB,EADQ,CADV,CADF,EAKE;qBACSC,MAAM0D,SAAN,CAAgBH,MAAhB,EAAwBhF,OAAxB,EAAiCiF,MAAMhF,KAAN,IAAegF,KAAhD,CAAT;;iBAEKD,MAAP;SAVK,CAAP;;;eAcOpB,UAAT,CAAoBkB,OAApB,EAA6B;eACpBrD,MAAMsD,MAAN,CAAaD,OAAb,EAAsB,UAAUE,MAAV,EAAkBC,KAAlB,EAAyB;cAChDjF,UAAUiF,MAAMjF,OAAN,IAAiByB,MAAMyD,OAAN,CAAcD,KAAd,CAA/B;cAEE,CAACD,MAAD,KACCA,SACC1E,OAAO,QAAQN,OAAR,GAAkB,gBAAzB,EAA2C,GAA3C,EAAgDI,IAAhD,CAAqDoB,EAArD,KACAlB,OAAO,QAAQN,OAAR,GAAkB,eAAzB,EAA0C,GAA1C,EAA+CI,IAA/C,CAAoDoB,EAApD,CADA,IAEAlB,OACE,QAAQN,OAAR,GAAkB,4CADpB,EAEE,GAFF,EAGEI,IAHF,CAGOoB,EAHP,CAJF,CADF,EASE;;gBAGE,CAACwD,SAASrF,OACRsF,MAAMhF,KAAN,IAAe,CAACK,OAAON,OAAP,EAAgB,GAAhB,EAAqBG,IAArB,CAA0B8E,MAAMhF,KAAhC,CAAhB,GACIgF,MAAMhF,KADV,GAEI+E,MAHI,EAIRxE,KAJQ,CAIF,GAJE,CAAV,EAIc,CAJd,KAKA,CAAC,SAASL,IAAT,CAAc6E,OAAO,CAAP,CAAd,CANH,EAOE;qBACO,CAAP,KAAa,MAAMA,OAAO,CAAP,CAAnB;;;oBAGMC,MAAMhF,KAAN,IAAegF,KAAvB;qBACSxD,MAAMlB,MAAN,CACPyE,OAAO,CAAP,EACG3E,OADH,CACWC,OAAON,OAAP,EAAgB,GAAhB,CADX,EACiCiF,KADjC,EAEG5E,OAFH,CAEWC,OAAO,WAAW2E,KAAX,GAAmB,QAA1B,EAAoC,GAApC,CAFX,EAEqD,GAFrD,EAGG5E,OAHH,CAGWC,OAAO,MAAM2E,KAAN,GAAc,cAArB,EAAqC,GAArC,CAHX,EAGsD,OAHtD,CADO,CAAT;;iBAOKD,MAAP;SAhCK,CAAP;;;eAoCOI,UAAT,CAAoBC,QAApB,EAA8B;eACrB5D,MAAMsD,MAAN,CAAaM,QAAb,EAAuB,UAAUL,MAAV,EAAkBhF,OAAlB,EAA2B;iBAErDgF,UACA,CAAC1E,OACCN,UACE,0DAFH,EAGC,GAHD,EAICI,IAJD,CAIMoB,EAJN,KAIa,CAJd,EAIiB,CAJjB,CADA,IAMA,IAPF;SADK,CAAP;;;eAaO8D,gBAAT,GAA4B;eACnB7D,MAAMyB,WAAN,IAAqB,EAA5B;;;iBAGSK,SAAS,CAACA,MAAD,CAApB;;UAEIM,gBAAgB,CAACF,OAArB,EAA8B;kBAClBC,WAAW,CAACC,YAAD,CAAX,CAAV;;;UAGG3D,OAAO,gBAAgBE,IAAhB,CAAqBuD,OAArB,CAAZ,EAA4C;kBAChCzD,KAAK,CAAL,CAAV;;;UAGE,iBAAiBC,IAAjB,CAAsBqB,EAAtB,CAAJ,EAA+B;kBACnB,CAACmC,UAAUA,UAAU,GAApB,GAA0B,EAA3B,IAAiC,WAA3C;;;UAGEF,QAAQ,YAAR,IAAwB,YAAYtD,IAAZ,CAAiBqB,EAAjB,CAA5B,EAAkD;oBACpC+D,IAAZ,CAAiB,oCAAjB;;;UAGE9B,QAAQ,IAAR,IAAgB,qBAAqBtD,IAArB,CAA0BqB,EAA1B,CAApB,EAAmD;eAC1C,KAAKgE,KAAL,CAAWhE,GAAGnB,OAAH,CAAW,gBAAX,EAA6B,EAA7B,CAAX,CAAP;uBACeH,KAAK2D,YAApB;kBACU3D,KAAKyD,OAAf;OAHF,MAMK,IAAI,MAAMxD,IAAN,CAAWwD,OAAX,CAAJ,EAAyB;iBACnBF,OAAO,QAAhB;aAEE,SACC,CAACvD,OAAO,gBAAgBE,IAAhB,CAAqBoB,EAArB,CAAR,IACG,MAAMtB,KAAK,CAAL,EAAQG,OAAR,CAAgB,IAAhB,EAAsB,GAAtB,CADT,GAEG,EAHJ,CADF;;;WAOG,IAAIoD,QAAQ,WAAR,IAAuB,CAAC,SAAStD,IAAT,CAAcJ,EAAd,CAA5B,EAA+C;eAC7C,SAAL;;;aAGG,IACF8D,gBACCA,gBAAgB,QADjB,KAEG,SAAS1D,IAAT,CAAcsD,IAAd,KAAuB,CAAC,qBAAqBtD,IAArB,CAA0BqB,EAA1B,CAAzB,IACC,WAAWrB,IAAX,CAAgBwD,OAAhB,CAHH,CAAD,IAIC,cAAcxD,IAAd,CAAmBJ,EAAnB,KACC,UAAUI,IAAV,CAAesD,IAAf,CADD,IAEC,eAAetD,IAAf,CAAoBqB,EAApB,CAPC,EAQH;mBACO,iBAAP;iBACK,cAAcrB,IAAd,CAAmBJ,EAAnB,IAAyBA,EAAzB,GAA8B,SAAnC;;;eAGG,IAAI0D,QAAQ,MAAZ,EAAoB;kBACnB,CAAC,UAAUtD,IAAV,CAAeqB,EAAf,CAAL,EAAyB;qBAClB,SAAL;4BACYiE,OAAZ,CAAoB,cAApB;;kBAEE,wBAAwBtF,IAAxB,CAA6BqB,EAA7B,CAAJ,EAAsC;4BACxBiE,OAAZ,CAAoB,aAApB;;;;iBAIC,IAAIhC,QAAQ,UAAR,KAAuBvD,OAAO,wBAAwBE,IAAxB,CAA6BoB,EAA7B,CAA9B,CAAJ,EAAqE;4BAC5D+D,IAAZ,CAAiB,4BAA4BrF,KAAK,CAAL,CAA7C;;;mBAGG,IAAIuD,QAAQ,SAAR,KAAsBvD,OAAO,0BAA0BE,IAA1B,CAA+BoB,EAA/B,CAA7B,CAAJ,EAAsE;yBAClEzB,KAAK,YAAZ;8BACY4D,UAAUzD,KAAK,CAAL,CAAtB;;;qBAGG,IACH,CAACuD,IAAD,KACCvD,OAAO,CAAC,iBAAiBC,IAAjB,CAAsBqB,EAAtB,CAAD,IAA8B,yBAAyBpB,IAAzB,CAA8BqD,IAA9B,CADtC,CADG,EAGH;;wBAGEA,QACA,CAACE,OADD,IAEA,kBAAkBxD,IAAlB,CAAuBqB,GAAG1B,KAAH,CAAS0B,GAAGkE,OAAH,CAAWxF,OAAO,GAAlB,IAAyB,CAAlC,CAAvB,CAHF,EAIE;;6BAEO,IAAP;;;wBAIA,CAACA,OAAOyD,WAAWE,YAAX,IAA2B9D,EAAnC,MACC4D,WACCE,YADD,IAEC,6CAA6C1D,IAA7C,CAAkDJ,EAAlD,CAHF,CADF,EAKE;6BAEE,mBAAmBK,IAAnB,CAAwB,cAAcD,IAAd,CAAmBJ,EAAnB,IAAyBA,EAAzB,GAA8BG,IAAtD,IACA,UAFF;;;;uBAMC,IACHuD,QAAQ,UAAR,KACCvD,OAAO,CAAC,uBAAuBE,IAAvB,CAA4BoB,EAA5B,KAAmC,CAApC,EAAuC,CAAvC,CADR,CADG,EAGH;kCACY+D,IAAZ,CAAiB,cAAcrF,IAA/B;;;UAGE,CAACmD,OAAL,EAAc;kBACF+B,WAAW,CACnB,6HADmB,EAEnB,SAFmB,EAGnB3D,MAAMyD,OAAN,CAAczB,IAAd,CAHmB,EAInB,gCAJmB,CAAX,CAAV;;;UASCvD,OACEqD,UAAU,MAAV,IAAoBoC,WAAWtC,OAAX,IAAsB,CAA1C,IAA+C,QAAhD,IACC,YAAYlD,IAAZ,CAAiBsD,IAAjB,MAA2B,UAAUtD,IAAV,CAAeqB,EAAf,IAAqB,OAArB,GAA+B,QAA1D,CADD,IAEC,8BAA8BrB,IAA9B,CAAmCqB,EAAnC,KACC,CAAC,yBAAyBrB,IAAzB,CAA8BoD,MAA9B,CADF,IAEC,QAJF,IAKC,CAACA,MAAD,IACC,YAAYpD,IAAZ,CAAiBqB,EAAjB,CADD,KAEEzB,MAAM,QAAN,GAAiB,QAAjB,GAA4B,SAF9B,CALD,IAQCwD,UAAU,QAAV,IACC,8BAA8BpD,IAA9B,CAAmCsD,IAAnC,CADD,IAEC,UAZN,EAaE;iBACS,CAACvD,IAAD,CAAT;;;UAIAuD,QAAQ,IAAR,KACCvD,OAAO,CAAC,4BAA4BE,IAA5B,CAAiCoB,EAAjC,KAAwC,CAAzC,EAA4C,CAA5C,CADR,CADF,EAGE;gBACQ,SAAR;aACK,oBAAoB,MAAMrB,IAAN,CAAWD,IAAX,IAAmBA,IAAnB,GAA0BA,OAAO,IAArD,CAAL;oBACYuF,OAAZ,CAAoB,cAApB;;;WAGG,IAAI,iBAAiBtF,IAAjB,CAAsBqB,EAAtB,CAAJ,EAA+B;iBAC3B,WAAP;eACK,mBAAL;sBACYiE,OAAZ,CAAoB,cAApB;sBACYpC,UAAU,CAAC,gBAAgBjD,IAAhB,CAAqBoB,EAArB,KAA4B,CAA7B,EAAgC,CAAhC,CAAtB;;;aAGG,IACHiC,QAAQ,IAAR,IACAF,UAAU,SADV,KAECrD,OAAO,gBAAgBE,IAAhB,CAAqBoB,EAArB,CAFR,CADG,EAIH;gBACIiC,IAAJ,EAAU;0BACI8B,IAAZ,CACE,oBAAoB9B,IAApB,IAA4BJ,UAAU,MAAMA,OAAhB,GAA0B,EAAtD,CADF;;mBAIK,IAAP;sBACUnD,KAAK,CAAL,CAAV;;;UAGEkD,WAAJ,EAAiB;YACX,KAAKwC,UAAL,CAAgBlE,OAAhB,EAAyB,QAAzB,CAAJ,EAAwC;cAClCY,IAAJ,EAAU;mBACDA,KAAKuD,IAAL,CAAUC,MAAjB;mBACO5F,KAAK6F,WAAL,CAAiB,SAAjB,CAAP;iBAEEhG,MACAG,KAAK6F,WAAL,CAAiB,SAAjB,IAA8B,GAA9B,GAAoC7F,KAAK6F,WAAL,CAAiB,YAAjB,CAFtC;;cAIEvD,KAAJ,EAAW;gBACL;wBACQd,QAAQsE,OAAR,CAAgB,cAAhB,EAAgC3C,OAAhC,CAAwC4C,IAAxC,CAA6C,GAA7C,CAAV;qBACO,SAAP;aAFF,CAGE,OAAOC,CAAP,EAAU;kBAER,CAAChG,OAAOwB,QAAQyE,MAAhB,KACAjG,KAAKrB,MAAL,CAAYsH,MAAZ,IAAsBzE,QAAQyE,MAFhC,EAGE;uBACO,SAAP;uBACOpG,KAAKG,KAAK,CAAL,EAAQH,EAAR,IAAc,IAA1B;;;gBAGA,CAAC0D,IAAL,EAAW;qBACF,OAAP;;WAdJ,MAgBO,IACL,QAAO/B,QAAQ0E,OAAf,KAA0B,QAA1B,IACA,CAAC1E,QAAQ0E,OAAR,CAAgBC,OADjB,KAECnG,OAAOwB,QAAQ0E,OAFhB,CADK,EAIL;gBACI,QAAOlG,KAAKoG,QAAZ,KAAwB,QAA5B,EAAsC;kBAChC,OAAOpG,KAAKoG,QAAL,CAAcC,QAArB,IAAiC,QAArC,EAA+C;4BACjChB,IAAZ,CAAiB,UAAUrF,KAAKoG,QAAL,CAAcE,IAAzC;uBACO,UAAP;0BACUtG,KAAKoG,QAAL,CAAcC,QAAxB;eAHF,MAIO,IAAI,OAAOrG,KAAKoG,QAAL,CAAcG,EAArB,IAA2B,QAA/B,EAAyC;4BAClClB,IAAZ,CACE,cAAclC,OADhB,EAEE,UAAUnD,KAAKoG,QAAL,CAAcE,IAF1B;uBAIO,OAAP;0BACUtG,KAAKoG,QAAL,CAAcG,EAAxB;;;gBAGA,CAAChD,IAAL,EAAW;qBACF,SAAP;qBACOvD,KAAK+C,IAAZ;mBACK/C,KAAKlC,QAAV;wBACU,SAASoC,IAAT,CAAcF,KAAKmD,OAAnB,CAAV;wBACUA,UAAUA,QAAQ,CAAR,CAAV,GAAuB,IAAjC;;;;;aAKD,IAAI,KAAKzB,UAAL,CAAiB1B,OAAOwB,QAAQgF,OAAhC,KAA6CvE,eAAjD,EAAkE;mBAC9D,WAAP;iBACKjC,KAAKyG,KAAL,CAAWR,MAAX,CAAkBS,YAAlB,CAA+B7G,EAApC;;;eAGG,IAAI,KAAK6B,UAAL,CAAiB1B,OAAOwB,QAAQmF,OAAhC,KAA6CtE,YAAjD,EAA+D;qBAC3D,WAAP;wBAEE,CAACrC,OAAOA,KAAKmD,OAAL,IAAgB,IAAxB,KACAnD,KAAK4G,KAAL,GAAa,GAAb,GAAmB5G,KAAK6G,KAAxB,GAAgC,GAAhC,GAAsC7G,KAAK8G,KAF7C;;;iBAKG,IACH,OAAOpE,IAAIqE,YAAX,IAA2B,QAA3B,KACC/G,OAAO,oBAAoBE,IAApB,CAAyBoB,EAAzB,CADR,CADG,EAGH;;;0BAGU,CAAC6B,OAAD,EAAUT,IAAIqE,YAAd,CAAV;oBACI,CAAC/G,OAAO,CAACA,KAAK,CAAL,CAAD,GAAW,CAAnB,KAAyBmD,QAAQ,CAAR,CAA7B,EAAyC;8BAC3BkC,IAAZ,CAAiB,QAAQlC,QAAQ,CAAR,CAAR,GAAqB,OAAtC;6BACWE,OAAO,CAAP,IAAY,EAAvB;0BACQ,CAAR,IAAarD,IAAb;;0BAEQuD,QAAQ,IAAR,GAAe9D,OAAO0D,QAAQ,CAAR,EAAW6D,OAAX,CAAmB,CAAnB,CAAP,CAAf,GAA+C7D,QAAQ,CAAR,CAAzD;;;mBAGG,IACH,OAAOT,IAAIqE,YAAX,IAA2B,QAA3B,IACA,wBAAwB9G,IAAxB,CAA6BsD,IAA7B,CAFG,EAGH;8BACY8B,IAAZ,CAAiB,gBAAgB9B,IAAhB,GAAuB,GAAvB,GAA6BJ,OAA9C;yBACO,IAAP;4BACU,MAAV;2BACS,CAAC,SAAD,CAAT;uBACK,SAAL;;aAEGtD,MAAM,KAAKQ,MAAL,CAAYR,EAAZ,CAAX;;;UAIAsD,YACCnD,OACC,0CAA0CE,IAA1C,CAA+CiD,OAA/C,KACA,2BAA2BjD,IAA3B,CACEoB,KAAK,GAAL,IAAY4B,eAAevB,IAAIsF,eAA/B,CADF,CADA,IAIC,iBAAiBhH,IAAjB,CAAsBqB,EAAtB,KAA6B,GANhC,CADF,EAQE;qBACa,KAAKrB,IAAL,CAAUD,IAAV,IAAkB,MAAlB,GAA2B,OAAxC;kBAEEmD,QAAQhD,OAAR,CAAgBC,OAAOJ,OAAO,OAAd,CAAhB,EAAwC,EAAxC,KACCiD,cAAc,MAAd,GAAuBR,IAAvB,GAA8BD,KAD/B,KAEC,SAAStC,IAAT,CAAcF,IAAd,KAAuB,EAFxB,CADF;;;UAOAuD,QAAQ,QAAR,IACCA,QAAQ,SAAR,IAAqB,6BAA6BtD,IAA7B,CAAkCJ,EAAlC,CAFxB,EAGE;eACO,gBAAP;;;WAGG,IAAI0D,QAAQ,SAAR,IAAqBJ,OAAzB,EAAkC;oBAC3BA,QAAQhD,OAAR,CAAgB,UAAhB,EAA4B,IAA5B,CAAV;;;aAGG,IAAI,YAAYF,IAAZ,CAAiBwD,OAAjB,CAAJ,EAA+B;gBAC9BA,WAAW,UAAf,EAA2B;mBACpB,IAAL;;gBAEEA,WAAW,UAAX,IAAyB,eAAexD,IAAf,CAAoBqB,EAApB,CAA7B,EAAsD;0BACxCiE,OAAZ,CAAoB,aAApB;;;;eAIC,IACH,CAAC,wBAAwBtF,IAAxB,CAA6BsD,IAA7B,KACEA,QAAQ,CAACE,OAAT,IAAoB,CAAC,eAAexD,IAAf,CAAoBsD,IAApB,CADxB,MAEC1D,MAAM,YAAN,IAAsB,QAAQI,IAAR,CAAaqB,EAAb,CAFvB,CADG,EAIH;sBACQ,SAAR;;;iBAGG,IAAIiC,QAAQ,IAAR,IAAgBL,WAApB,EAAiC;oBAChC;sBACE1B,QAAQ0F,QAAR,KAAqB,IAAzB,EAA+B;gCACjB3B,OAAZ,CAAoB,kBAApB;;iBAFJ,CAIE,OAAOS,CAAP,EAAU;8BACET,OAAZ,CAAoB,UAApB;;eANC,MAQE,IACL,CAAC,iBAAiBtF,IAAjB,CAAsBwD,OAAtB,KAAkC,WAAWxD,IAAX,CAAgBqB,EAAhB,CAAnC,MACCtB,OACC,CAACI,OAAOqD,QAAQtD,OAAR,CAAgB,KAAhB,EAAuB,IAAvB,IAA+B,YAAtC,EAAoD,GAApD,EAAyDD,IAAzD,CAA8DoB,EAA9D,KACC,CADF,EACK,CADL,KACW6B,OAHb,CADK,EAKL;uBACO,CAACnD,IAAD,EAAO,OAAOC,IAAP,CAAYqB,EAAZ,CAAP,CAAP;qBAEE,CAACtB,KAAK,CAAL,KACKyD,UAAU,IAAX,EAAmBE,eAAe,YADtC,IAEG,iBAFJ,IAGA,GAHA,GAIA3D,KAAK,CAAL,CALF;0BAMU,IAAV;eAbK,MAcA,IACL,QAAQ,KAAKW,MAAb,IACA8C,WAAW,KADX,KAEEP,eAAeN,KAAhB,IACE,QAAQ3C,IAAR,CAAasD,IAAb,KAAsB,wBAAwBtD,IAAxB,CAA6BqB,EAA7B,CADxB,IAEEiC,QAAQ,SAAR,IAAqB,uBAAuBtD,IAAvB,CAA4BJ,EAA5B,CAFvB,IAGE0D,QAAQ,IAAR,KACG1D,MAAM,CAAC,OAAOI,IAAP,CAAYJ,EAAZ,CAAP,IAA0BsD,UAAU,GAArC,IACE,iBAAiBlD,IAAjB,CAAsBJ,EAAtB,KAA6BsD,UAAU,CADzC,IAEEA,WAAW,CAAX,IAAgB,CAAC,cAAclD,IAAd,CAAmBqB,EAAnB,CAHrB,CALH,KASA,CAAC,KAAKtC,OAAL,CAAaiB,IAAb,CACED,OAAO,KAAKsF,KAAL,CAAWvE,IAAX,CACN,KAAKJ,MADC,EAENW,GAAGnB,OAAH,CAAW,KAAKnB,OAAhB,EAAyB,EAAzB,IAA+B,GAFzB,CADT,CATD,IAeAgB,KAAKuD,IAhBA,EAiBL;;uBAEO,YAAYvD,KAAKuD,IAAjB,IAAyB,CAACvD,OAAOA,KAAKmD,OAAb,IAAwB,MAAMnD,IAA9B,GAAqC,EAA9D,CAAP;oBACI,KAAKhB,OAAL,CAAaiB,IAAb,CAAkBsD,IAAlB,CAAJ,EAA6B;sBACvB,SAAStD,IAAT,CAAcD,IAAd,KAAuBH,MAAM,QAAjC,EAA2C;yBACpC,IAAL;;yBAEK,aAAaG,IAApB;;;qBAGG;2BACI,SAASA,IAAhB;wBACI8C,UAAJ,EAAgB;6BACP,KAAKzC,MAAL,CAAYyC,WAAW3C,OAAX,CAAmB,iBAAnB,EAAsC,OAAtC,CAAZ,CAAP;qBADF,MAEO;6BACE,OAAP;;wBAEE,SAASF,IAAT,CAAcD,IAAd,CAAJ,EAAyB;2BAClB,IAAL;;wBAEE,CAACkD,WAAL,EAAkB;gCACN,IAAV;;;yBAGK,CAAC,QAAD,CAAT;4BACYmC,IAAZ,CAAiBrF,IAAjB;;;UAGGA,OAAO,CAAC,8BAA8BE,IAA9B,CAAmCoB,EAAnC,KAA0C,CAA3C,EAA8C,CAA9C,CAAZ,EAA+D;eACtD,CAACmE,WAAWzF,KAAKG,OAAL,CAAa,SAAb,EAAwB,MAAxB,CAAX,CAAD,EAA8CH,IAA9C,CAAP;;YAEIuD,QAAQ,QAAR,IAAoBvD,KAAK,CAAL,EAAQJ,KAAR,CAAc,CAAC,CAAf,KAAqB,GAA7C,EAAkD;iBACzC,gBAAP;uBACa,OAAb;oBACUI,KAAK,CAAL,EAAQJ,KAAR,CAAc,CAAd,EAAiB,CAAC,CAAlB,CAAV;SAHF,MAIO,IACLuD,WAAWnD,KAAK,CAAL,CAAX,IACAmD,YAAYnD,KAAK,CAAL,IAAU,CAAC,yBAAyBE,IAAzB,CAA8BoB,EAA9B,KAAqC,CAAtC,EAAyC,CAAzC,CAAtB,CAFK,EAGL;oBACU,IAAV;;;aAGG,CAAL,IAAU,CAAC,sBAAsBpB,IAAtB,CAA2BoB,EAA3B,KAAkC,CAAnC,EAAsC,CAAtC,CAAV;;YAGEtB,KAAK,CAAL,KAAW,MAAX,IACAA,KAAK,CAAL,KAAW,MADX,IAEAyF,WAAWzF,KAAK,CAAL,CAAX,KAAuB,EAFvB,IAGAqD,UAAU,QAJZ,EAKE;mBACS,CAAC,OAAD,CAAT;;;YAGE,CAACH,WAAD,IAAiB,CAACnB,UAAD,IAAe,CAAC/B,KAAK,CAAL,CAArC,EAA+C;qBAClCqD,OAAO,CAAP,IAAY,aAAvB;kBAEIrD,OAAOA,KAAK,CAAL,CAAR,EACDA,OAAO,GAAP,GACI,CADJ,GAEIA,OAAO,GAAP,GACA,CADA,GAEAA,OAAO,GAAP,GACA,CADA,GAEAA,OAAO,GAAP,GACA,CADA,GAEAA,OAAO,GAAP,GACA,IADA,GAEAA,OAAO,GAAP,GACA,CADA,GAEAA,OAAO,GAAP,GACA,CADA,GAEAA,OAAO,GAAP,GACA,CADA,GAEAA,OAAO,GAAP,GACA,CADA,GAEA,GApBN;SAFF,MAuBO;qBACMqD,OAAO,CAAP,IAAY,aAAvB;iBAEErD,KAAK,CAAL,MACEA,OAAOA,KAAK,CAAL,CAAR,EACDA,OAAO,GAAP,GACI,CADJ,GAEIA,OAAO,GAAP,GACA,CADA,GAEAA,OAAO,MAAP,GACA,CADA,GAEAA,OAAO,GAAP,GACA,CADA,GAEAA,OAAO,MAAP,GACA,CADA,GAEAA,OAAO,MAAP,GACA,CADA,GAEAA,OAAO,KAAP,GACA,CADA,GAEAA,OAAO,MAAP,GACA,CADA,GAEAA,OAAO,MAAP,GACA,CADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,KAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,KADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,KAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,KADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAA,OAAO,MAAP,GACA,EADA,GAEAqD,UAAU,OAAV,GACA,IADA,GAEA,IApDJ,CADF;;;mBAyDCA,OAAO,CAAP,KACC,OACCrD,QACC,OAAOA,IAAP,IAAe,QAAf,GAA0B,IAA1B,GAAiC,OAAOC,IAAP,CAAYD,IAAZ,IAAoB,EAApB,GAAyB,GAF5D,CAFJ;;YAMIuD,QAAQ,QAAR,KAAqB,CAACJ,OAAD,IAAYgE,SAAShE,OAAT,IAAoB,EAArD,CAAJ,EAA8D;oBAClDnD,IAAV;;;;UAIAuD,QAAQ,OAAR,KAAoBvD,OAAO,eAAeE,IAAf,CAAoBL,EAApB,CAA3B,CAAJ,EAAyD;gBAC/C,GAAR;oBACY0F,OAAZ,CAAoB,cAApB;YACIvF,QAAQ,MAAZ,EAAoB;kBACV,MAAR;oBACU,IAAV;SAFF,MAGO;kBACG,QAAR;;aAEGH,GAAGM,OAAH,CAAWC,OAAO,OAAOJ,IAAP,GAAc,GAArB,CAAX,EAAsC,EAAtC,CAAL;;;WAGG,IAAIuD,QAAQ,QAAR,IAAoB,aAAarD,IAAb,CAAkBmD,UAAUA,OAAO,CAAP,CAA5B,CAAxB,EAAgE;sBACvDkC,OAAZ,CAAoB,cAApB;iBACO,eAAP;oBACU,IAAV;;cAEI,WAAWtF,IAAX,CAAgBJ,EAAhB,CAAJ,EAAyB;2BACR,OAAf;iBACK,UAAL;WAFF,MAGO;iBACA,IAAL;;;;UAKFsD,WACAA,QAAQqC,OAAR,CAAiBxF,OAAO,UAAUE,IAAV,CAAeL,EAAf,CAAxB,KAAgD,CADhD,IAEAyB,GAAGkE,OAAH,CAAW,MAAMxF,IAAN,GAAa,GAAxB,IAA+B,CAAC,CAHlC,EAIE;aACK,KAAKY,IAAL,CAAUf,GAAGM,OAAH,CAAWH,IAAX,EAAiB,EAAjB,CAAV,CAAL;;;UAIAqD,UACA,CAAC,qBAAqBpD,IAArB,CAA0BsD,IAA1B,CADD,KAEC,4BAA4BtD,IAA5B,CAAiCsD,IAAjC,KACEA,QAAQ,QAAR,IAAoB,OAAOtD,IAAP,CAAYJ,EAAZ,CAApB,IAAuC,aAAaI,IAAb,CAAkBoD,OAAO,CAAP,CAAlB,CADzC,IAEE,yFAAyFpD,IAAzF,CACCsD,IADD,KAGCF,OAAO,CAAP,CAPJ,CADF,EASE;SACCrD,OAAOqD,OAAOA,OAAO3C,MAAP,GAAgB,CAAvB,CAAR,KAAsCsC,YAAYqC,IAAZ,CAAiBrF,IAAjB,CAAtC;;UAEEgD,YAAYtC,MAAhB,EAAwB;sBACR,CAAC,MAAMsC,YAAY+C,IAAZ,CAAiB,IAAjB,CAAN,GAA+B,GAAhC,CAAd;;UAEEpC,gBAAgBF,OAAhB,IAA2BA,QAAQ+B,OAAR,CAAgB7B,YAAhB,IAAgC,CAA/D,EAAkE;oBACpD0B,IAAZ,CAAiB,QAAQ1B,YAAzB;;UAEEF,OAAJ,EAAa;oBACC4B,IAAZ,CACE,CAAC,OAAOpF,IAAP,CAAY+C,YAAYA,YAAYtC,MAAZ,GAAqB,CAAjC,CAAZ,IAAmD,EAAnD,GAAwD,KAAzD,IACE+C,OAFJ;;;UAME5D,EAAJ,EAAQ;eACC,cAAcK,IAAd,CAAmBL,EAAnB,CAAP;2BAEEG,QAAQH,GAAGH,MAAH,CAAUG,GAAGa,MAAH,GAAYV,KAAK,CAAL,EAAQU,MAApB,GAA6B,CAAvC,KAA6C,GADvD;aAEK;wBACW,EADX;kBAEKV,QAAQ,CAACoD,gBAAT,GAA4BvD,GAAGM,OAAH,CAAWH,KAAK,CAAL,CAAX,EAAoB,EAApB,CAA5B,GAAsDH,EAF3D;mBAGMG,OAAOA,KAAK,CAAL,CAAP,GAAiB,IAHvB;oBAIO,oBAAY;gBAChBmD,UAAU,KAAKA,OAAnB;mBAEE,KAAKiE,MAAL,IACCjE,WAAW,CAACC,gBAAZ,GAA+B,MAAMD,OAArC,GAA+C,EADhD,KAEC,KAAKkE,YAAL,IAAqB,EAArB,GAA0B,SAA1B,GAAsC,EAFvC,CADF;;SANJ;;;UAgBA,CAACrH,OAAO,mCAAmCE,IAAnC,CAAwC6C,IAAxC,CAAR,KACA,CAAC,YAAY9C,IAAZ,CAAiB8C,IAAjB,CAFH,EAGE;YACIlD,EAAJ,EAAQ;aACHwH,YAAH,GAAkB,EAAlB;aACGD,MAAH,GAAYvH,GAAGuH,MAAH,CAAUjH,OAAV,CAAkBC,OAAO,OAAOJ,IAAd,CAAlB,EAAuC,EAAvC,CAAZ;;YAGAuD,SACC,aAAatD,IAAb,CAAkBqB,EAAlB,KACE4B,eACC,eAAejD,IAAf,CAAoB0B,IAAI2F,QAAJ,IAAgB3F,IAAI7D,QAAxC,CADD,IAEC,CAAC,kBAAkBmC,IAAlB,CAAuBqB,EAAvB,CAJL,CADF,EAME;sBACYiE,OAAZ,CAAoB,QAApB;;OAfJ,MAiBO,IACL1F,MACA,QAAQI,IAAR,CAAaJ,GAAGuH,MAAhB,CADA,IAEA7D,QAAQ,QAFR,IAGAkC,WAAWtC,OAAX,KAAuB,EAJlB,EAKL;WACGkE,YAAH,GAAkB,EAAlB;;;aAGK/F,KAAK,IAAZ;WACKvD,SAAL,CAAeiF,WAAf,GAA6B1B,EAA7B;WACKvD,SAAL,CAAesF,MAAf,GAAwBA,UAAUA,OAAO,CAAP,CAAlC;WACKtF,SAAL,CAAe4F,YAAf,GAA8BA,YAA9B;WACK5F,SAAL,CAAewF,IAAf,GAAsBA,IAAtB;WACKxF,SAAL,CAAekF,UAAf,GAA4BA,UAA5B;WACKlF,SAAL,CAAe0F,OAAf,GAAyBA,OAAzB;WACK1F,SAAL,CAAeuD,EAAf,GAAoBA,EAApB;WACKvD,SAAL,CAAeoF,OAAf,GAAyBI,QAAQJ,OAAjC;WACKpF,SAAL,CAAe8B,EAAf,GAAoBA,MAAM;sBACV,IADU;gBAEhB,IAFgB;iBAGf,IAHe;kBAId,oBAAY;iBACb,MAAP;;OALJ;;WASK9B,SAAL,CAAeuH,KAAf,GAAuB,KAAKA,KAA5B;WACKvH,SAAL,CAAeuB,QAAf,GAA0B8F,gBAA1B;;UAEI,KAAKrH,SAAL,CAAeoF,OAAnB,EAA4B;oBACdoC,OAAZ,CAAoBpC,OAApB;;UAEE,KAAKpF,SAAL,CAAewF,IAAnB,EAAyB;oBACXgC,OAAZ,CAAoBhC,IAApB;;UAGA1D,MACA0D,IADA,IAEA,EAAE1D,MAAMJ,OAAOI,EAAP,EAAWS,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAN,KAAmCT,MAAM0D,KAAKjD,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAN,IAA4BmD,OAA/D,CAAF,CAHF,EAIE;oBACY4B,IAAZ,CAAiB5B,UAAU,MAAM5D,EAAN,GAAW,GAArB,GAA2B,QAAQA,EAApD;;UAEEmD,YAAYtC,MAAhB,EAAwB;aACjB3C,SAAL,CAAeiF,WAAf,GAA6BA,YAAY+C,IAAZ,CAAiB,GAAjB,CAA7B;;aAEK,KAAKhI,SAAZ;;;;2BAEK;WACAA,SAAL,GAAiB,KAAKuH,KAAL,EAAjB;UAEE,OAAOiC,MAAP,IAAiB,UAAjB,IACA,QAAOA,OAAOC,GAAd,KAAqB,QADrB,IAEAD,OAAOC,GAHT,EAIE;aACKpJ,IAAL,CAAUN,QAAV,GAAqB,KAAKC,SAA1B;eACO,YAAY;iBACV,KAAKA,SAAZ;SADF;OANF,MASO,IAAI,KAAKM,WAAL,IAAoB,KAAKE,UAA7B,EAAyC;aACzCoC,MAAL,CAAY,KAAK5C,SAAjB,EAA4B,UAAUiD,KAAV,EAAiBF,GAAjB,EAAsB;eAC3CzC,WAAL,CAAiByC,GAAjB,IAAwBE,KAAxB;SADF;OADK,MAIA;aACA/C,KAAL,CAAWH,QAAX,GAAsB,KAAKC,SAA3B;;;;;;;;AAKN;;;;;;;;AC9lCA,AAIA,IAAI0J,GAAJ;AACA,IAAI,OAAOvJ,MAAP,KAAkB,WAAtB,EAAmC;MAC7BwJ,MAAM;cACE;GADZ;QAGM;eACO,EAAE7F,WAAW,EAAb,EADP;cAEM;gBACE6F,GADF;gBAEE;KAJR;YAMI,EAAEC,OAAO,CAAT,EAAYC,QAAQ,CAApB,EANJ;cAOMF;GAPZ;CAJF,MAaO;QACCxJ,MAAN;;;;;;;;AAQF,IAAI2J,aAAaC,MAAM1I,SAAvB;IACE2I,YAAYC,SAAS5I,SADvB;IAEE6I,WAAW9I,OAAOC,SAFpB;IAGEQ,QAAQiI,WAAWjI,KAHrB;IAIEN,aAAW2I,SAAS3I,QAJtB;IAKED,mBAAiB4I,SAAS5I,cAL5B;IAME6I,gBAAgBT,IAAIU,OANtB;IAOEvG,YAAY6F,IAAI7F,SAPlB;IAQEe,aAAW8E,IAAI9E,QARjB;IASEyF,cAAcX,IAAI7E,KATpB;IAUEyF,SAASZ,IAAIY,MAVf;IAWExG,YAAYD,UAAUC,SAXxB;;AAaA,IAAIyG,aAAaP,UAAUQ,IAA3B;IACEC,gBAAgBX,WAAWY,OAD7B;IAEEC,gBAAgBb,WAAWrC,OAF7B;IAGEmD,gBAAgBb,MAAMc,OAHxB;IAIEC,UAAU,EAJZ;;AAMA,IAAIC,IAAI;QACA,cAAUC,GAAV,EAAe;;WAEZA,IAAI5I,OAAJ,CAAY,oCAAZ,EAAkD,EAAlD,CAAP;;CAHJ;;;AAQA,IAAIgI,YAAU;;OAEP,eAAY;QACXtK,OAAOmL,KAAP,IAAgB,CAACF,EAAEG,WAAF,CAAcf,aAAd,CAAjB,IAAiDA,aAArD,EAAoE;UAC9D;sBACYgB,GAAd,CAAkBC,KAAlB,CAAwBjB,aAAxB,EAAuCkB,SAAvC;OADF,CAEE,OAAOC,GAAP,EAAY;UACVhI,IAAF,CAAO+H,SAAP,EAAkB,UAAUE,GAAV,EAAe;wBACjBJ,GAAd,CAAkBI,GAAlB;SADF;;;GAPM;;SAcL,iBAAY;QACbzL,OAAOmL,KAAP,IAAgB,CAACF,EAAEG,WAAF,CAAcf,aAAd,CAAjB,IAAiDA,aAArD,EAAoE;UAC9DqB,OAAO,CAAC,iBAAD,EAAoBC,MAApB,CAA2BV,EAAEW,OAAF,CAAUL,SAAV,CAA3B,CAAX;UACI;sBACYM,KAAd,CAAoBP,KAApB,CAA0BjB,aAA1B,EAAyCqB,IAAzC;OADF,CAEE,OAAOF,GAAP,EAAY;UACVhI,IAAF,CAAOkI,IAAP,EAAa,UAAUD,GAAV,EAAe;wBACZI,KAAd,CAAoBJ,GAApB;SADF;;;GApBM;;YA2BF,oBAAY;QAChB,CAACR,EAAEG,WAAF,CAAcf,aAAd,CAAD,IAAiCA,aAArC,EAAoD;UAC9CqB,OAAO,CAAC,iBAAD,EAAoBC,MAApB,CAA2BV,EAAEW,OAAF,CAAUL,SAAV,CAA3B,CAAX;UACI;sBACYM,KAAd,CAAoBP,KAApB,CAA0BjB,aAA1B,EAAyCqB,IAAzC;OADF,CAEE,OAAOF,GAAP,EAAY;UACVhI,IAAF,CAAOkI,IAAP,EAAa,UAAUD,GAAV,EAAe;wBACZI,KAAd,CAAoBJ,GAApB;SADF;;;;CAjCR;;;;AA2CAR,EAAEP,IAAF,GAAS,UAAUoB,IAAV,EAAgBnI,OAAhB,EAAyB;MAC5B+H,IAAJ,EAAUK,MAAV;MACItB,cAAcqB,KAAKpB,IAAL,KAAcD,UAAhC,EAA4C;WACnCA,WAAWa,KAAX,CAAiBQ,IAAjB,EAAuB/J,MAAMmB,IAAN,CAAWqI,SAAX,EAAsB,CAAtB,CAAvB,CAAP;;MAEE,CAACN,EAAEe,UAAF,CAAaF,IAAb,CAAL,EAAyB;UACjB,IAAIG,SAAJ,EAAN;;SAEKlK,MAAMmB,IAAN,CAAWqI,SAAX,EAAsB,CAAtB,CAAP;WACQ,iBAAY;QACd,EAAE,gBAAgBQ,MAAlB,CAAJ,EAA8B;aACrBD,KAAKR,KAAL,CAAW3H,OAAX,EAAoB+H,KAAKC,MAAL,CAAY5J,MAAMmB,IAAN,CAAWqI,SAAX,CAAZ,CAApB,CAAP;;QAEEW,OAAO,EAAX;SACK3K,SAAL,GAAiBuK,KAAKvK,SAAtB;QACIR,OAAO,IAAImL,IAAJ,EAAX;SACK3K,SAAL,GAAiB,IAAjB;QACI0F,SAAS6E,KAAKR,KAAL,CAAWvK,IAAX,EAAiB2K,KAAKC,MAAL,CAAY5J,MAAMmB,IAAN,CAAWqI,SAAX,CAAZ,CAAjB,CAAb;QACIjK,OAAO2F,MAAP,MAAmBA,MAAvB,EAA+B;aACtBA,MAAP;;WAEKlG,IAAP;GAZF;SAcOgL,MAAP;CAvBF;;AA0BAd,EAAEkB,qBAAF,GAA0B,UAAUC,GAAV,EAAe;OAClC,IAAIN,IAAT,IAAiBM,GAAjB,EAAsB;QAChB,OAAOA,IAAIN,IAAJ,CAAP,KAAqB,UAAzB,EAAqC;UAC/BA,IAAJ,IAAYb,EAAEP,IAAF,CAAO0B,IAAIN,IAAJ,CAAP,EAAkBM,GAAlB,CAAZ;;;CAHN;;;;;;;AAaAnB,EAAEzH,IAAF,GAAS,UAAU4I,GAAV,EAAeC,QAAf,EAAyB1I,OAAzB,EAAkC;MACrCyI,QAAQ,IAAR,IAAgBA,QAAQE,SAA5B,EAAuC;;;MAGnC3B,iBAAiByB,IAAIxB,OAAJ,KAAgBD,aAArC,EAAoD;QAC9CC,OAAJ,CAAYyB,QAAZ,EAAsB1I,OAAtB;GADF,MAEO,IAAIyI,IAAIvJ,MAAJ,KAAe,CAACuJ,IAAIvJ,MAAxB,EAAgC;SAChC,IAAI0J,IAAI,CAAR,EAAWC,IAAIJ,IAAIvJ,MAAxB,EAAgC0J,IAAIC,CAApC,EAAuCD,GAAvC,EAA4C;UACtCA,KAAKH,GAAL,IAAYC,SAASnJ,IAAT,CAAcS,OAAd,EAAuByI,IAAIG,CAAJ,CAAvB,EAA+BA,CAA/B,EAAkCH,GAAlC,MAA2CpB,OAA3D,EAAoE;;;;GAFjE,MAMA;SACA,IAAI/H,GAAT,IAAgBmJ,GAAhB,EAAqB;UACf5K,iBAAe0B,IAAf,CAAoBkJ,GAApB,EAAyBnJ,GAAzB,CAAJ,EAAmC;YAC7BoJ,SAASnJ,IAAT,CAAcS,OAAd,EAAuByI,IAAInJ,GAAJ,CAAvB,EAAiCA,GAAjC,EAAsCmJ,GAAtC,MAA+CpB,OAAnD,EAA4D;;;;;;CAfpE;;AAuBAC,EAAEwB,UAAF,GAAe,UAAUC,CAAV,EAAa;MACtBC,UAAUD,CAAd;MACIC,WAAW1B,EAAE2B,QAAF,CAAWD,OAAX,CAAf,EAAoC;cACxBA,QACPrK,OADO,CACC,IADD,EACO,OADP,EAEPA,OAFO,CAEC,IAFD,EAEO,MAFP,EAGPA,OAHO,CAGC,IAHD,EAGO,MAHP,EAIPA,OAJO,CAIC,IAJD,EAIO,QAJP,EAKPA,OALO,CAKC,IALD,EAKO,QALP,CAAV;;SAOKqK,OAAP;CAVF;;AAaA1B,EAAE4B,MAAF,GAAW,UAAUT,GAAV,EAAe;IACtB5I,IAAF,CAAOzB,MAAMmB,IAAN,CAAWqI,SAAX,EAAsB,CAAtB,CAAP,EAAiC,UAAUuB,MAAV,EAAkB;SAC5C,IAAIC,IAAT,IAAiBD,MAAjB,EAAyB;UACnBA,OAAOC,IAAP,MAAiB,KAAK,CAA1B,EAA6B;YACvBA,IAAJ,IAAYD,OAAOC,IAAP,CAAZ;;;GAHN;SAOOX,GAAP;CARF;;AAWAnB,EAAEF,OAAF,GACED,iBACA,UAAUsB,GAAV,EAAe;SACN3K,WAASyB,IAAT,CAAckJ,GAAd,MAAuB,gBAA9B;CAHJ;;;;;AASAnB,EAAEe,UAAF,GAAe,UAAUgB,CAAV,EAAa;MACtB;+BACwB5K,IAAnB,CAAwB4K,CAAxB;;GADT,CAEE,OAAOC,CAAP,EAAU;WACH,KAAP;;CAJJ;;AAQAhC,EAAEiC,WAAF,GAAgB,UAAUd,GAAV,EAAe;SACtB,CAAC,EAAEA,OAAO5K,iBAAe0B,IAAf,CAAoBkJ,GAApB,EAAyB,QAAzB,CAAT,CAAR;CADF;;AAIAnB,EAAEW,OAAF,GAAY,UAAUuB,QAAV,EAAoB;MAC1B,CAACA,QAAL,EAAe;WACN,EAAP;;MAEEA,SAASvB,OAAb,EAAsB;WACbuB,SAASvB,OAAT,EAAP;;MAEEX,EAAEF,OAAF,CAAUoC,QAAV,CAAJ,EAAyB;WAChBpL,MAAMmB,IAAN,CAAWiK,QAAX,CAAP;;MAEElC,EAAEiC,WAAF,CAAcC,QAAd,CAAJ,EAA6B;WACpBpL,MAAMmB,IAAN,CAAWiK,QAAX,CAAP;;SAEKlC,EAAEmC,MAAF,CAASD,QAAT,CAAP;CAbF;;AAgBAlC,EAAEoC,IAAF,GAAS,UAAUjB,GAAV,EAAe;MAClBkB,UAAU,EAAd;MACIlB,QAAQ,IAAZ,EAAkB;WACTkB,OAAP;;IAEA9J,IAAF,CAAO4I,GAAP,EAAY,UAAUjJ,KAAV,EAAiBF,GAAjB,EAAsB;YACxBqK,QAAQzK,MAAhB,IAA0BI,GAA1B;GADF;SAGOqK,OAAP;CARF;;AAWArC,EAAEmC,MAAF,GAAW,UAAUhB,GAAV,EAAe;MACpBkB,UAAU,EAAd;MACIlB,QAAQ,IAAZ,EAAkB;WACTkB,OAAP;;IAEA9J,IAAF,CAAO4I,GAAP,EAAY,UAAUjJ,KAAV,EAAiB;YACnBmK,QAAQzK,MAAhB,IAA0BM,KAA1B;GADF;SAGOmK,OAAP;CARF;;AAWArC,EAAEsC,QAAF,GAAa,UAAUpK,KAAV,EAAiB;SACrBA,KAAP;CADF;;AAIA8H,EAAEuC,OAAF,GAAY,UAAUpB,GAAV,EAAeqB,MAAf,EAAuB;MAC7BC,QAAQ,KAAZ;MACItB,QAAQ,IAAZ,EAAkB;WACTsB,KAAP;;MAEE7C,iBAAiBuB,IAAIzE,OAAJ,KAAgBkD,aAArC,EAAoD;WAC3CuB,IAAIzE,OAAJ,CAAY8F,MAAZ,KAAuB,CAAC,CAA/B;;IAEAjK,IAAF,CAAO4I,GAAP,EAAY,UAAUjJ,KAAV,EAAiB;QACvBuK,UAAUA,QAAQvK,UAAUsK,MAA5B,CAAJ,EAAyC;aAChCzC,OAAP;;GAFJ;SAKO0C,KAAP;CAbF;;AAgBAzC,EAAE0C,QAAF,GAAa,UAAUzC,GAAV,EAAe0C,MAAf,EAAuB;SAC3B1C,IAAIvD,OAAJ,CAAYiG,MAAZ,MAAwB,CAAC,CAAhC;CADF;;;AAKA3C,EAAE4C,OAAF,GAAY,UAAUC,QAAV,EAAoBC,UAApB,EAAgC;WACjCxM,SAAT,GAAqB,IAAIwM,UAAJ,EAArB;WACSxM,SAAT,CAAmByM,WAAnB,GAAiCF,QAAjC;WACSC,UAAT,GAAsBA,WAAWxM,SAAjC;SACOuM,QAAP;CAJF;;AAOA7C,EAAEgD,QAAF,GAAa,UAAU7B,GAAV,EAAe;SACnBA,QAAQ9K,OAAO8K,GAAP,CAAR,IAAuB,CAACnB,EAAEF,OAAF,CAAUqB,GAAV,CAA/B;CADF;;AAIAnB,EAAEiD,aAAF,GAAkB,UAAU9B,GAAV,EAAe;MAC3BnB,EAAEgD,QAAF,CAAW7B,GAAX,CAAJ,EAAqB;SACd,IAAInJ,GAAT,IAAgBmJ,GAAhB,EAAqB;UACf5K,iBAAe0B,IAAf,CAAoBkJ,GAApB,EAAyBnJ,GAAzB,CAAJ,EAAmC;eAC1B,KAAP;;;WAGG,IAAP;;SAEK,KAAP;CATF;;AAYAgI,EAAEG,WAAF,GAAgB,UAAUgB,GAAV,EAAe;SACtBA,QAAQ,KAAK,CAApB;CADF;;AAIAnB,EAAE2B,QAAF,GAAa,UAAUR,GAAV,EAAe;SACnB3K,WAASyB,IAAT,CAAckJ,GAAd,KAAsB,iBAA7B;CADF;;AAIAnB,EAAEkD,MAAF,GAAW,UAAU/B,GAAV,EAAe;SACjB3K,WAASyB,IAAT,CAAckJ,GAAd,KAAsB,eAA7B;CADF;;AAIAnB,EAAEmD,QAAF,GAAa,UAAUhC,GAAV,EAAe;SACnB3K,WAASyB,IAAT,CAAckJ,GAAd,KAAsB,iBAA7B;CADF;;AAIAnB,EAAEoD,SAAF,GAAc,UAAUjC,GAAV,EAAe;SACpB,CAAC,EAAEA,OAAOA,IAAIxL,QAAJ,KAAiB,CAA1B,CAAR;CADF;;AAIAqK,EAAEqD,WAAF,GAAgB,UAAUlC,GAAV,EAAe;IAC3B5I,IAAF,CAAO4I,GAAP,EAAY,UAAUmC,CAAV,EAAaC,CAAb,EAAgB;QACtBvD,EAAEkD,MAAF,CAASI,CAAT,CAAJ,EAAiB;UACXC,CAAJ,IAASvD,EAAEwD,UAAF,CAAaF,CAAb,CAAT;KADF,MAEO,IAAItD,EAAEgD,QAAF,CAAWM,CAAX,CAAJ,EAAmB;UACpBC,CAAJ,IAASvD,EAAEqD,WAAF,CAAcC,CAAd,CAAT,CADwB;;GAH5B;SAOOnC,GAAP;CARF;;AAWAnB,EAAEyD,SAAF,GAAc,YAAY;OACnBC,GAAL,GACEC,KAAKD,GAAL,IACA,YAAY;WACH,CAAC,IAAIC,IAAJ,EAAR;GAHJ;SAKOA,KAAKD,GAAL,EAAP;CANF;;AASA1D,EAAEwD,UAAF,GAAe,UAAUI,CAAV,EAAa;;WAEjBC,GAAT,CAAaC,CAAb,EAAgB;WACPA,IAAI,EAAJ,GAAS,MAAMA,CAAf,GAAmBA,CAA1B;;SAGAF,EAAEG,cAAF,KACA,GADA,GAEAF,IAAID,EAAEI,WAAF,KAAkB,CAAtB,CAFA,GAGA,GAHA,GAIAH,IAAID,EAAEK,UAAF,EAAJ,CAJA,GAKA,GALA,GAMAJ,IAAID,EAAEM,WAAF,EAAJ,CANA,GAOA,GAPA,GAQAL,IAAID,EAAEO,aAAF,EAAJ,CARA,GASA,GATA,GAUAN,IAAID,EAAEQ,aAAF,EAAJ,CAXF;CALF;;AAoBApE,EAAEqE,QAAF,GAAa,UAAUtC,CAAV,EAAa;SACjB,YAAY;QACb;aACKA,EAAE1B,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAP;KADF,CAEE,OAAOpD,CAAP,EAAU;gBACFoH,QAAR,CACE,8EADF;UAGIvP,OAAOmL,KAAX,EAAkB;kBACRoE,QAAR,CAAiBpH,CAAjB;;;GARN;CADF;;AAeA8C,EAAEuE,cAAF,GAAmB,UAAUC,KAAV,EAAiBC,SAAjB,EAA4B;OACxC,IAAInD,IAAI,CAAb,EAAgBA,IAAImD,UAAU7M,MAA9B,EAAsC0J,GAAtC,EAA2C;UACnChL,SAAN,CAAgBmO,UAAUnD,CAAV,CAAhB,IAAgCtB,EAAEqE,QAAF,CAAWG,MAAMlO,SAAN,CAAgBmO,UAAUnD,CAAV,CAAhB,CAAX,CAAhC;;CAFJ;;AAMAtB,EAAE0E,yBAAF,GAA8B,UAAUvD,GAAV,EAAe;OACtC,IAAIN,IAAT,IAAiBM,GAAjB,EAAsB;QAChB,OAAOA,IAAIN,IAAJ,CAAP,KAAqB,UAAzB,EAAqC;UAC/BA,IAAJ,IAAYb,EAAEqE,QAAF,CAAWlD,IAAIN,IAAJ,CAAX,CAAZ;;;CAHN;;AAQAb,EAAE2E,sBAAF,GAA2B,UAAUC,CAAV,EAAa;MAClCC,MAAM,EAAV;IACEtM,IAAF,CAAOqM,CAAP,EAAU,UAAUtB,CAAV,EAAaC,CAAb,EAAgB;QACpBvD,EAAE2B,QAAF,CAAW2B,CAAX,KAAiBA,EAAE1L,MAAF,GAAW,CAAhC,EAAmC;UAC7B2L,CAAJ,IAASD,CAAT;;GAFJ;SAKOuB,GAAP;CAPF;;;;;;;AAeA7E,EAAE8E,QAAF,GAAa,UAAU3D,GAAV,EAAevJ,MAAf,EAAuB;MAC9BiN,GAAJ;;MAEI,OAAO1D,GAAP,KAAe,QAAnB,EAA6B;UACrBA,IAAIrK,KAAJ,CAAU,CAAV,EAAac,MAAb,CAAN;GADF,MAEO,IAAIoI,EAAEF,OAAF,CAAUqB,GAAV,CAAJ,EAAoB;UACnB,EAAN;MACE5I,IAAF,CAAO4I,GAAP,EAAY,UAAU4D,GAAV,EAAe;UACrBxI,IAAJ,CAASyD,EAAE8E,QAAF,CAAWC,GAAX,EAAgBnN,MAAhB,CAAT;KADF;GAFK,MAKA,IAAIoI,EAAEgD,QAAF,CAAW7B,GAAX,CAAJ,EAAqB;UACpB,EAAN;MACE5I,IAAF,CAAO4I,GAAP,EAAY,UAAU4D,GAAV,EAAe/M,GAAf,EAAoB;UAC1BA,GAAJ,IAAWgI,EAAE8E,QAAF,CAAWC,GAAX,EAAgBnN,MAAhB,CAAX;KADF;GAFK,MAKA;UACCuJ,GAAN;;;SAGK0D,GAAP;CAnBF;;AAsBA7E,EAAEgF,UAAF,GAAgB,YAAY;SACnB,UAAUC,SAAV,EAAqB;QACtB/M,QAAQ+M,SAAZ;QACIC,QAAQ,SAARA,KAAQ,CAAUxO,MAAV,EAAkB;UACxByO,YAAY,yHAAhB,CAD4B;UAExBC,OAAO;;cAEH,KAFG;cAGH,KAHG;cAIH,KAJG;cAKH,KALG;cAMH,KANG;aAOJ,KAPI;cAQH;OARR;;gBAWUC,SAAV,GAAsB,CAAtB;aACOF,UAAUhO,IAAV,CAAeT,MAAf,IACH,MACEA,OAAOW,OAAP,CAAe8N,SAAf,EAA0B,UAAUG,CAAV,EAAa;YACjCC,IAAIH,KAAKE,CAAL,CAAR;eACO,OAAOC,CAAP,KAAa,QAAb,GACHA,CADG,GAEH,QAAQ,CAAC,SAASD,EAAEE,UAAF,CAAa,CAAb,EAAgBhP,QAAhB,CAAyB,EAAzB,CAAV,EAAwCM,KAAxC,CAA8C,CAAC,CAA/C,CAFZ;OAFF,CADF,GAOE,GARC,GASH,MAAMJ,MAAN,GAAe,GATnB;KAdF;;QA0BIuJ,MAAM,SAANA,GAAM,CAAUjI,GAAV,EAAeyN,MAAf,EAAuB;UAC3BC,MAAM,EAAV;UACIC,SAAS,MAAb;UACIrE,IAAI,CAAR,CAH+B;UAI3BiC,IAAI,EAAR,CAJ+B;UAK3BD,IAAI,EAAR,CAL+B;UAM3B1L,SAAS,CAAb;UACIgO,OAAOF,GAAX;UACIG,UAAU,EAAd;UACI3N,QAAQuN,OAAOzN,GAAP,CAAZ;;;UAIEE,SACA,QAAOA,KAAP,2CAAOA,KAAP,OAAiB,QADjB,IAEA,OAAOA,MAAM4N,MAAb,KAAwB,UAH1B,EAIE;gBACQ5N,MAAM4N,MAAN,CAAa9N,GAAb,CAAR;;;;qBAIaE,KAAf,2CAAeA,KAAf;aACO,QAAL;iBACSgN,MAAMhN,KAAN,CAAP;;aAEG,QAAL;;iBAES6N,SAAS7N,KAAT,IAAkBvB,OAAOuB,KAAP,CAAlB,GAAkC,MAAzC;;aAEG,SAAL;aACK,MAAL;;;;;iBAKSvB,OAAOuB,KAAP,CAAP;;aAEG,QAAL;;;;;cAKM,CAACA,KAAL,EAAY;mBACH,MAAP;;;;iBAIKyN,MAAP;oBACU,EAAV;;;cAGInP,WAAS6J,KAAT,CAAenI,KAAf,MAA0B,gBAA9B,EAAgD;;;;qBAIrCA,MAAMN,MAAf;iBACK0J,IAAI,CAAT,EAAYA,IAAI1J,MAAhB,EAAwB0J,KAAK,CAA7B,EAAgC;sBACtBA,CAAR,IAAarB,IAAIqB,CAAJ,EAAOpJ,KAAP,KAAiB,MAA9B;;;;;gBAMA2N,QAAQjO,MAAR,KAAmB,CAAnB,GACI,IADJ,GAEI8N,MACA,QAAQA,GAAR,GAAcG,QAAQ5I,IAAR,CAAa,QAAQyI,GAArB,CAAd,GAA0C,IAA1C,GAAiDE,IAAjD,GAAwD,GADxD,GAEA,MAAMC,QAAQ5I,IAAR,CAAa,GAAb,CAAN,GAA0B,GALhC;kBAMM2I,IAAN;mBACOtC,CAAP;;;;eAIGC,CAAL,IAAUrL,KAAV,EAAiB;gBACX3B,iBAAe0B,IAAf,CAAoBC,KAApB,EAA2BqL,CAA3B,CAAJ,EAAmC;kBAC7BtD,IAAIsD,CAAJ,EAAOrL,KAAP,CAAJ;kBACIoL,CAAJ,EAAO;wBACG/G,IAAR,CAAa2I,MAAM3B,CAAN,KAAYmC,MAAM,IAAN,GAAa,GAAzB,IAAgCpC,CAA7C;;;;;;;cAQJuC,QAAQjO,MAAR,KAAmB,CAAnB,GACI,IADJ,GAEI8N,MACA,MAAMG,QAAQ5I,IAAR,CAAa,GAAb,CAAN,GAA0B,EAA1B,GAA+B2I,IAA/B,GAAsC,GADtC,GAEA,MAAMC,QAAQ5I,IAAR,CAAa,GAAb,CAAN,GAA0B,GALhC;gBAMM2I,IAAN;iBACOtC,CAAP;;KA3FN;;;;WAiGOrD,IAAI,EAAJ,EAAQ;UACT/H;KADC,CAAP;GA7HF;CADa,EAAf;;;;;;AAwIA8H,EAAEgG,UAAF,GAAgB,YAAY;MACtBC,EAAJ;;IAAA;;YAEY;SACH,GADG;UAEF,IAFE;SAGH,GAHG;OAIL,IAJK;OAKL,IALK;OAML,IANK;OAOL,IAPK;OAQL;GAVP;MAYEC,IAZF;MAaEtF,QAAQ,SAARA,KAAQ,CAAUuF,CAAV,EAAa;QACfjJ,IAAI,IAAIkJ,WAAJ,CAAgBD,CAAhB,CAAR;MACEF,EAAF,GAAOA,EAAP;MACEC,IAAF,GAASA,IAAT;UACMhJ,CAAN;GAjBJ;MAmBEmJ,OAAO,SAAPA,IAAO,CAAUd,CAAV,EAAa;;QAEdA,KAAKA,MAAMe,EAAf,EAAmB;YACX,eAAef,CAAf,GAAmB,gBAAnB,GAAsCe,EAAtC,GAA2C,GAAjD;;;;SAIGJ,KAAKtP,MAAL,CAAYqP,EAAZ,CAAL;UACM,CAAN;WACOK,EAAP;GA5BJ;MA8BEC,SAAS,kBAAY;;QAEfA,MAAJ;QACE7P,SAAS,EADX;;QAGI4P,OAAO,GAAX,EAAgB;eACL,GAAT;WACK,GAAL;;WAEKA,MAAM,GAAN,IAAaA,MAAM,GAA1B,EAA+B;gBACnBA,EAAV;;;QAGEA,OAAO,GAAX,EAAgB;gBACJ,GAAV;aACOD,UAAUC,MAAM,GAAhB,IAAuBA,MAAM,GAApC,EAAyC;kBAC7BA,EAAV;;;QAGAA,OAAO,GAAP,IAAcA,OAAO,GAAzB,EAA8B;gBAClBA,EAAV;;UAEIA,OAAO,GAAP,IAAcA,OAAO,GAAzB,EAA8B;kBAClBA,EAAV;;;aAGKA,MAAM,GAAN,IAAaA,MAAM,GAA1B,EAA+B;kBACnBA,EAAV;;;;aAIK,CAAC5P,MAAV;QACI,CAACqP,SAASQ,MAAT,CAAL,EAAuB;YACf,YAAN;KADF,MAEO;aACEA,MAAP;;GAjEN;MAoEE7P,SAAS,kBAAY;;QAEf8P,GAAJ;QACElF,CADF;QAEE5K,SAAS,EAFX;QAGE+P,KAHF;;QAKIH,OAAO,GAAX,EAAgB;aACPD,MAAP,EAAe;YACTC,OAAO,GAAX,EAAgB;;iBAEP5P,MAAP;;YAEE4P,OAAO,IAAX,EAAiB;;cAEXA,OAAO,GAAX,EAAgB;oBACN,CAAR;iBACKhF,IAAI,CAAT,EAAYA,IAAI,CAAhB,EAAmBA,KAAK,CAAxB,EAA2B;oBACnBjD,SAASgI,MAAT,EAAiB,EAAjB,CAAN;kBACI,CAACN,SAASS,GAAT,CAAL,EAAoB;;;sBAGZC,QAAQ,EAAR,GAAaD,GAArB;;sBAEQ7P,OAAO+P,YAAP,CAAoBD,KAApB,CAAV;WATF,MAUO,IAAI,OAAOE,QAAQL,EAAR,CAAP,KAAuB,QAA3B,EAAqC;sBAChCK,QAAQL,EAAR,CAAV;WADK,MAEA;;;SAdT,MAiBO;oBACKA,EAAV;;;;UAIA,YAAN;GAvGJ;MAyGEM,QAAQ,SAARA,KAAQ,GAAY;;WAEXN,MAAMA,MAAM,GAAnB,EAAwB;;;GA3G5B;MA+GEO,OAAO,SAAPA,IAAO,GAAY;;YAETP,EAAR;WACO,GAAL;aACO,GAAL;aACK,GAAL;aACK,GAAL;aACK,GAAL;eACO,IAAP;WACG,GAAL;aACO,GAAL;aACK,GAAL;aACK,GAAL;aACK,GAAL;aACK,GAAL;eACO,KAAP;WACG,GAAL;aACO,GAAL;aACK,GAAL;aACK,GAAL;aACK,GAAL;eACO,IAAP;;UAEE,iBAAiBA,EAAjB,GAAsB,GAA5B;GAtIJ;MAwIEpO,KAxIF;;UAyIU,iBAAY;;QAEdG,QAAQ,EAAZ;;QAEIiO,OAAO,GAAX,EAAgB;WACT,GAAL;;UAEIA,OAAO,GAAX,EAAgB;aACT,GAAL;eACOjO,KAAP,CAFc;;aAITiO,EAAP,EAAW;cACH/J,IAAN,CAAWrE,OAAX;;YAEIoO,OAAO,GAAX,EAAgB;eACT,GAAL;iBACOjO,KAAP;;aAEG,GAAL;;;;UAIE,WAAN;GA/JJ;MAiKEZ,SAAS,kBAAY;;QAEfO,GAAJ;QACEP,SAAS,EADX;;QAGI6O,OAAO,GAAX,EAAgB;WACT,GAAL;;UAEIA,OAAO,GAAX,EAAgB;aACT,GAAL;eACO7O,MAAP,CAFc;;aAIT6O,EAAP,EAAW;cACH5P,QAAN;;aAEK,GAAL;YACIL,OAAOE,cAAP,CAAsB0B,IAAtB,CAA2BR,MAA3B,EAAmCO,GAAnC,CAAJ,EAA6C;gBACrC,oBAAoBA,GAApB,GAA0B,GAAhC;;eAEKA,GAAP,IAAcE,OAAd;;YAEIoO,OAAO,GAAX,EAAgB;eACT,GAAL;iBACO7O,MAAP;;aAEG,GAAL;;;;UAIE,YAAN;GA9LJ;;UAiMQ,iBAAY;;;;YAIV6O,EAAR;WACO,GAAL;eACS7O,QAAP;WACG,GAAL;eACSY,OAAP;WACG,GAAL;eACS3B,QAAP;WACG,GAAL;eACS6P,QAAP;;eAEOD,MAAM,GAAN,IAAaA,MAAM,GAAnB,GAAyBC,QAAzB,GAAoCM,MAA3C;;GAdN;;;;SAoBO,UAAUhF,MAAV,EAAkB;QACnB7F,MAAJ;;WAEO6F,MAAP;SACK,CAAL;SACK,GAAL;aACS3J,OAAT;;QAEIoO,EAAJ,EAAQ;YACA,cAAN;;;WAGKtK,MAAP;GAZF;CAtNa,EAAf;;AAsOAgE,EAAE8G,YAAF,GAAiB,UAAU5P,IAAV,EAAgB;MAC3B6P,MAAM,mEAAV;MACIC,EAAJ;MACEC,EADF;MAEEC,EAFF;MAGEC,EAHF;MAIEC,EAJF;MAKEC,EALF;MAMEC,EANF;MAOEC,IAPF;MAQEjG,IAAI,CARN;MASEkG,KAAK,CATP;MAUEC,MAAM,EAVR;MAWEC,UAAU,EAXZ;;MAaI,CAACxQ,IAAL,EAAW;WACFA,IAAP;;;SAGK8I,EAAE2H,UAAF,CAAazQ,IAAb,CAAP;;KAEG;;SAEIA,KAAKsO,UAAL,CAAgBlE,GAAhB,CAAL;SACKpK,KAAKsO,UAAL,CAAgBlE,GAAhB,CAAL;SACKpK,KAAKsO,UAAL,CAAgBlE,GAAhB,CAAL;;WAEQ0F,MAAM,EAAP,GAAcC,MAAM,CAApB,GAAyBC,EAAhC;;SAEMK,QAAQ,EAAT,GAAe,IAApB;SACMA,QAAQ,EAAT,GAAe,IAApB;SACMA,QAAQ,CAAT,GAAc,IAAnB;SACKA,OAAO,IAAZ;;;YAGQC,IAAR,IACET,IAAInQ,MAAJ,CAAWuQ,EAAX,IAAiBJ,IAAInQ,MAAJ,CAAWwQ,EAAX,CAAjB,GAAkCL,IAAInQ,MAAJ,CAAWyQ,EAAX,CAAlC,GAAmDN,IAAInQ,MAAJ,CAAW0Q,EAAX,CADrD;GAdF,QAgBShG,IAAIpK,KAAKU,MAhBlB;;QAkBM8P,QAAQzK,IAAR,CAAa,EAAb,CAAN;;UAEQ/F,KAAKU,MAAL,GAAc,CAAtB;SACO,CAAL;YACQ6P,IAAI3Q,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,IAAmB,IAAzB;;SAEG,CAAL;YACQ2Q,IAAI3Q,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,IAAmB,GAAzB;;;;SAIG2Q,GAAP;CAlDF;;AAqDAzH,EAAE2H,UAAF,GAAe,UAAUjR,MAAV,EAAkB;WACtB,CAACA,SAAS,EAAV,EAAcW,OAAd,CAAsB,OAAtB,EAA+B,IAA/B,EAAqCA,OAArC,CAA6C,KAA7C,EAAoD,IAApD,CAAT;;MAEIuQ,UAAU,EAAd;MACEC,KADF;MAEEC,GAFF;MAGIC,UAAU,CAAd;MACEjE,CADF;;UAGQgE,MAAM,CAAd;YACUpR,OAAOkB,MAAjB;;OAEKkM,IAAI,CAAT,EAAYA,IAAIiE,OAAhB,EAAyBjE,GAAzB,EAA8B;QACxBkE,KAAKtR,OAAO8O,UAAP,CAAkB1B,CAAlB,CAAT;QACI2D,MAAM,IAAV;;QAEIO,KAAK,GAAT,EAAc;;KAAd,MAEO,IAAIA,KAAK,GAAL,IAAYA,KAAK,IAArB,EAA2B;YAC1BrR,OAAO+P,YAAP,CAAqBsB,MAAM,CAAP,GAAY,GAAhC,EAAsCA,KAAK,EAAN,GAAY,GAAjD,CAAN;KADK,MAEA;YACCrR,OAAO+P,YAAP,CACHsB,MAAM,EAAP,GAAa,GADT,EAEFA,MAAM,CAAP,GAAY,EAAb,GAAmB,GAFf,EAGHA,KAAK,EAAN,GAAY,GAHR,CAAN;;QAMEP,QAAQ,IAAZ,EAAkB;UACZK,MAAMD,KAAV,EAAiB;mBACJnR,OAAOuR,SAAP,CAAiBJ,KAAjB,EAAwBC,GAAxB,CAAX;;iBAESL,GAAX;cACQK,MAAMhE,IAAI,CAAlB;;;;MAIAgE,MAAMD,KAAV,EAAiB;eACJnR,OAAOuR,SAAP,CAAiBJ,KAAjB,EAAwBnR,OAAOkB,MAA/B,CAAX;;;SAGKgQ,OAAP;CAxCF;;AA2CA5H,EAAEkI,IAAF,GAAU,YAAY;;;MAGhBC,IAAI,SAAJA,CAAI,GAAY;QACdvE,IAAI,IAAI,IAAID,IAAJ,EAAZ;QACErC,IAAI,CADN;;;;;WAMOsC,KAAK,IAAI,IAAID,IAAJ,EAAhB,EAA4B;;;;WAIrBC,EAAEpN,QAAF,CAAW,EAAX,IAAiB8K,EAAE9K,QAAF,CAAW,EAAX,CAAxB;GAXF;;;MAeI4R,IAAI,SAAJA,CAAI,GAAY;WACXpS,KAAKqS,MAAL,GAAc7R,QAAd,CAAuB,EAAvB,EAA2Ba,OAA3B,CAAmC,GAAnC,EAAwC,EAAxC,CAAP;GADF;;;;;;MAQIiR,KAAK,SAALA,EAAK,GAAY;QACf9P,KAAKO,SAAT;QACEuI,CADF;QAEEgF,EAFF;QAGEiC,SAAS,EAHX;QAIE1D,MAAM,CAJR;;aAMS2D,GAAT,CAAaxM,MAAb,EAAqByM,UAArB,EAAiC;UAC3BC,CAAJ;UACEC,MAAM,CADR;WAEKD,IAAI,CAAT,EAAYA,IAAID,WAAW7Q,MAA3B,EAAmC8Q,GAAnC,EAAwC;eAC/BH,OAAOG,CAAP,KAAcA,IAAI,CAAzB;;aAEK1M,SAAS2M,GAAhB;;;SAGGrH,IAAI,CAAT,EAAYA,IAAI9I,GAAGZ,MAAnB,EAA2B0J,GAA3B,EAAgC;WACzB9I,GAAGgN,UAAH,CAAclE,CAAd,CAAL;aACO7E,OAAP,CAAe6J,KAAK,IAApB;UACIiC,OAAO3Q,MAAP,IAAiB,CAArB,EAAwB;cAChB4Q,IAAI3D,GAAJ,EAAS0D,MAAT,CAAN;iBACS,EAAT;;;;QAIAA,OAAO3Q,MAAP,GAAgB,CAApB,EAAuB;YACf4Q,IAAI3D,GAAJ,EAAS0D,MAAT,CAAN;;;WAGK1D,IAAIrO,QAAJ,CAAa,EAAb,CAAP;GA7BF;;SAgCO,YAAY;QACboS,KAAK,CAACrJ,OAAOT,MAAP,GAAgBS,OAAOV,KAAxB,EAA+BrI,QAA/B,CAAwC,EAAxC,CAAT;WACO2R,MAAM,GAAN,GAAYC,GAAZ,GAAkB,GAAlB,GAAwBE,IAAxB,GAA+B,GAA/B,GAAqCM,EAArC,GAA0C,GAA1C,GAAgDT,GAAvD;GAFF;CA1DO,EAAT;;;;;AAmEAnI,EAAE6I,WAAF,GAAgB,UAAUrQ,EAAV,EAAc;MAE1B,6EAA6ErB,IAA7E,CACEqB,EADF,CADF,EAIE;WACO,IAAP;;SAEK,KAAP;CARF;;;;;;AAeAwH,EAAE8I,cAAF,GAAmB,UAAUC,QAAV,EAAoBC,aAApB,EAAmC;MAChDC,OAAJ;MACEC,OADF;MAEExB,UAAU,EAFZ;;MAII1H,EAAEG,WAAF,CAAc6I,aAAd,CAAJ,EAAkC;oBAChB,GAAhB;;;IAGAzQ,IAAF,CAAOwQ,QAAP,EAAiB,UAAUhE,GAAV,EAAe/M,GAAf,EAAoB;cACzBmR,mBAAmBpE,IAAIvO,QAAJ,EAAnB,CAAV;cACU2S,mBAAmBnR,GAAnB,CAAV;YACQ0P,QAAQ9P,MAAhB,IAA0BsR,UAAU,GAAV,GAAgBD,OAA1C;GAHF;;SAMOvB,QAAQzK,IAAR,CAAa+L,aAAb,CAAP;CAfF;;AAkBAhJ,EAAEoJ,aAAF,GAAkB,UAAUC,GAAV,EAAeC,KAAf,EAAsB;;;UAG9BA,MAAMjS,OAAN,CAAc,KAAd,EAAqB,KAArB,EAA4BA,OAA5B,CAAoC,MAApC,EAA4C,KAA5C,CAAR;MACIkS,SAAS,WAAWD,KAAX,GAAmB,WAAhC;MACEE,QAAQ,IAAIlS,MAAJ,CAAWiS,MAAX,CADV;MAEElH,UAAUmH,MAAMpS,IAAN,CAAWiS,GAAX,CAFZ;MAIEhH,YAAY,IAAZ,IACCA,WAAW,OAAOA,QAAQ,CAAR,CAAP,KAAsB,QAAjC,IAA6CA,QAAQ,CAAR,EAAWzK,MAF3D,EAGE;WACO,EAAP;GAJF,MAKO;QACDoE,SAASqG,QAAQ,CAAR,CAAb;QACI;eACOoH,mBAAmBzN,MAAnB,CAAT;KADF,CAEE,OAAOuE,GAAP,EAAY;gBACJK,KAAR,CAAc,kDAAkD5E,MAAhE;;WAEKA,OAAO3E,OAAP,CAAe,KAAf,EAAsB,GAAtB,CAAP;;CAnBJ;;AAuBA2I,EAAE0J,YAAF,GAAiB,UAAUC,IAAV,EAAgBL,KAAhB,EAAuB;MAClCM,UAAUD,KAAKE,KAAL,CAAW,IAAIvS,MAAJ,CAAWgS,QAAQ,UAAnB,CAAX,CAAd;SACOM,UAAUA,QAAQ,CAAR,CAAV,GAAuB,IAA9B;CAFF;;;;AAOA5J,EAAE8J,MAAF,GAAW;OACJ,aAAUrP,IAAV,EAAgB;QACfsP,SAAStP,OAAO,GAApB;QACIuP,KAAKnQ,WAASiQ,MAAT,CAAgBtS,KAAhB,CAAsB,GAAtB,CAAT;SACK,IAAI8J,IAAI,CAAb,EAAgBA,IAAI0I,GAAGpS,MAAvB,EAA+B0J,GAA/B,EAAoC;UAC9BiE,IAAIyE,GAAG1I,CAAH,CAAR;aACOiE,EAAE3O,MAAF,CAAS,CAAT,KAAe,GAAtB,EAA2B;YACrB2O,EAAE0C,SAAF,CAAY,CAAZ,EAAe1C,EAAE3N,MAAjB,CAAJ;;UAEE2N,EAAE7I,OAAF,CAAUqN,MAAV,MAAsB,CAA1B,EAA6B;eACpBN,mBAAmBlE,EAAE0C,SAAF,CAAY8B,OAAOnS,MAAnB,EAA2B2N,EAAE3N,MAA7B,CAAnB,CAAP;;;WAGG,IAAP;GAbO;;SAgBF,eAAU6C,IAAV,EAAgB;QACjBqP,MAAJ;QACI;eACO9J,EAAEgG,UAAF,CAAahG,EAAE8J,MAAF,CAASG,GAAT,CAAaxP,IAAb,CAAb,KAAoC,EAA7C;KADF,CAEE,OAAO8F,GAAP,EAAY;;;WAGPuJ,MAAP;GAvBO;;eA0BI,qBACXrP,IADW,EAEXvC,KAFW,EAGXgS,OAHW,EAIXC,kBAJW,EAKXC,SALW,EAMXC,aANW,EAOXC,eAPW,EAQX;QACIC,UAAU,EAAd;QACEC,UAAU,EADZ;QAEEC,SAAS,EAFX;;QAIIH,eAAJ,EAAqB;gBACT,cAAcA,eAAxB;KADF,MAEO,IAAIH,kBAAJ,EAAwB;UACzBO,SAASC,eAAe9Q,WAAS+Q,QAAT,CAAkBC,QAAjC,CAAb;gBACUH,SAAS,eAAeA,MAAxB,GAAiC,EAA3C;;;QAGER,OAAJ,EAAa;UACPY,OAAO,IAAInH,IAAJ,EAAX;WACKoH,OAAL,CAAaD,KAAKE,OAAL,KAAiBd,UAAU,IAAxC;gBACU,eAAeY,KAAKG,WAAL,EAAzB;;;QAGEZ,aAAJ,EAAmB;kBACL,IAAZ;eACS,iBAAT;;QAEED,SAAJ,EAAe;gBACH,UAAV;;;eAGON,MAAT,GACErP,OACA,GADA,GAEA0O,mBAAmBjR,KAAnB,CAFA,GAGAsS,OAHA,GAIA,UAJA,GAKAD,OALA,GAMAE,MAPF;GA5DO;;OAsEJ,aACHhQ,IADG,EAEHvC,KAFG,EAGHgT,IAHG,EAIHf,kBAJG,EAKHC,SALG,EAMHC,aANG,EAOHC,eAPG,EAQH;QACIC,UAAU,EAAd;QACEC,UAAU,EADZ;QAEEC,SAAS,EAFX;;QAIIH,eAAJ,EAAqB;gBACT,cAAcA,eAAxB;KADF,MAEO,IAAIH,kBAAJ,EAAwB;UACzBO,SAASC,eAAe9Q,WAAS+Q,QAAT,CAAkBC,QAAjC,CAAb;gBACUH,SAAS,eAAeA,MAAxB,GAAiC,EAA3C;;;QAGEQ,IAAJ,EAAU;UACJJ,OAAO,IAAInH,IAAJ,EAAX;WACKoH,OAAL,CAAaD,KAAKE,OAAL,KAAiBE,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,IAApD;gBACU,eAAeJ,KAAKG,WAAL,EAAzB;;;QAGEZ,aAAJ,EAAmB;kBACL,IAAZ;eACS,iBAAT;;QAEED,SAAJ,EAAe;gBACH,UAAV;;;QAGEe,iBACF1Q,OACA,GADA,GAEA0O,mBAAmBjR,KAAnB,CAFA,GAGAsS,OAHA,GAIA,UAJA,GAKAD,OALA,GAMAE,MAPF;eAQSX,MAAT,GAAkBqB,cAAlB;WACOA,cAAP;GAjHO;;UAoHD,gBAAU1Q,IAAV,EAAgB0P,kBAAhB,EAAoCG,eAApC,EAAqD;MACzDR,MAAF,CAASsB,GAAT,CACE3Q,IADF,EAEE,EAFF,EAGE,CAAC,CAHH,EAIE0P,kBAJF,EAKE,KALF,EAME,KANF,EAOEG,eAPF;;CArHJ;;;AAkIA,IAAIe,0BAA0B,IAA9B;AACArL,EAAEsL,YAAF,GAAiB;gBACD,wBAAY;QACpBD,4BAA4B,IAAhC,EAAsC;aAC7BA,uBAAP;;;QAGEE,YAAY,IAAhB;QACI;UACEvT,MAAM,iBAAV;UACE+M,MAAM,KADR;QAEEuG,YAAF,CAAeF,GAAf,CAAmBpT,GAAnB,EAAwB+M,GAAxB;UACI/E,EAAEsL,YAAF,CAAerB,GAAf,CAAmBjS,GAAnB,MAA4B+M,GAAhC,EAAqC;oBACvB,KAAZ;;QAEAuG,YAAF,CAAeE,MAAf,CAAsBxT,GAAtB;KAPF,CAQE,OAAOuI,GAAP,EAAY;kBACA,KAAZ;;QAEE,CAACgL,SAAL,EAAgB;gBACN3K,KAAR,CAAc,wDAAd;;;8BAGwB2K,SAA1B;WACOA,SAAP;GAvBa;;SA0BR,eAAUE,GAAV,EAAe;cACZ7K,KAAR,CAAc,yBAAyB6K,GAAvC;GA3Ba;;OA8BV,aAAUhR,IAAV,EAAgB;QACf;aACKrF,OAAOkW,YAAP,CAAoBI,OAApB,CAA4BjR,IAA5B,CAAP;KADF,CAEE,OAAO8F,GAAP,EAAY;QACV+K,YAAF,CAAe1K,KAAf,CAAqBL,GAArB;;WAEK,IAAP;GApCa;;SAuCR,eAAU9F,IAAV,EAAgB;QACjB;aACKuF,EAAEgG,UAAF,CAAahG,EAAEsL,YAAF,CAAerB,GAAf,CAAmBxP,IAAnB,CAAb,KAA0C,EAAjD;KADF,CAEE,OAAO8F,GAAP,EAAY;;;WAGP,IAAP;GA7Ca;;OAgDV,aAAU9F,IAAV,EAAgBvC,KAAhB,EAAuB;QACtB;aACKoT,YAAP,CAAoBK,OAApB,CAA4BlR,IAA5B,EAAkCvC,KAAlC;KADF,CAEE,OAAOqI,GAAP,EAAY;QACV+K,YAAF,CAAe1K,KAAf,CAAqBL,GAArB;;GApDW;;UAwDP,gBAAU9F,IAAV,EAAgB;QAClB;aACK6Q,YAAP,CAAoBM,UAApB,CAA+BnR,IAA/B;KADF,CAEE,OAAO8F,GAAP,EAAY;QACV+K,YAAF,CAAe1K,KAAf,CAAqBL,GAArB;;;CA5DN;;AAiEAP,EAAE6L,cAAF,GAAoB,YAAY;;;;;;;;;;;;;;;MAe1BA,iBAAiB,SAAjBA,cAAiB,CACnBC,OADmB,EAEnB1T,IAFmB,EAGnB2T,OAHmB,EAInBC,SAJmB,EAKnBC,UALmB,EAMnB;QACI,CAACH,OAAL,EAAc;gBACJlL,KAAR,CAAc,6CAAd;;;;QAIEkL,QAAQI,gBAAR,IAA4B,CAACF,SAAjC,EAA4C;cAClCE,gBAAR,CAAyB9T,IAAzB,EAA+B2T,OAA/B,EAAwC,CAAC,CAACE,UAA1C;KADF,MAEO;UACDE,SAAS,OAAO/T,IAApB;UACIgU,cAAcN,QAAQK,MAAR,CAAlB,CAFK;cAGGA,MAAR,IAAkBE,YAAYP,OAAZ,EAAqBC,OAArB,EAA8BK,WAA9B,CAAlB;;GAjBJ;;WAqBSC,WAAT,CAAqBP,OAArB,EAA8BQ,WAA9B,EAA2CC,YAA3C,EAAyD;QACnDR,UAAU,SAAVA,OAAU,CAAUS,KAAV,EAAiB;cACrBA,SAASC,SAASrX,OAAOoX,KAAhB,CAAjB;;;;;;;UAOI,CAACA,KAAL,EAAY;eACHnL,SAAP;;;UAGEwD,MAAM,IAAV;UACI6H,UAAJ,EAAgBC,UAAhB;;UAEI3M,EAAEe,UAAF,CAAawL,YAAb,CAAJ,EAAgC;qBACjBA,aAAaC,KAAb,CAAb;;mBAEWF,YAAYrU,IAAZ,CAAiB6T,OAAjB,EAA0BU,KAA1B,CAAb;;UAEI,UAAUE,UAAV,IAAwB,UAAUC,UAAtC,EAAkD;cAC1C,KAAN;;;aAGK9H,GAAP;KAxBF;;WA2BOkH,OAAP;;;WAGOU,QAAT,CAAkBD,KAAlB,EAAyB;QACnBA,KAAJ,EAAW;YACHI,cAAN,GAAuBH,SAASG,cAAhC;YACMC,eAAN,GAAwBJ,SAASI,eAAjC;;WAEKL,KAAP;;WAEOI,cAAT,GAA0B,YAAY;SAC/BE,WAAL,GAAmB,KAAnB;GADF;WAGSD,eAAT,GAA2B,YAAY;SAChCE,YAAL,GAAoB,IAApB;GADF;;SAIOlB,cAAP;CAjFiB,EAAnB;;AAoFA,IAAImB,oBAAoB,IAAI1V,MAAJ,CACtB,yDADsB,CAAxB;;AAIA0I,EAAEiN,SAAF,GAAe,YAAY;;;;;;;;;;;;;;;;;;;;WAyBhBC,cAAT,CAAwBhQ,CAAxB,EAA2B;;WAElBA,EAAEiQ,GAAF,GAAQjQ,EAAEiQ,GAAV,GAAgBjQ,EAAEkQ,oBAAF,CAAuB,GAAvB,CAAvB;;;MAGEC,iBAAiB,WAArB;;WAESC,QAAT,CAAkBC,IAAlB,EAAwBC,QAAxB,EAAkC;QAC5BC,YAAY,MAAMD,QAAN,GAAiB,GAAjC;WAEE,CAAC,MAAMD,KAAKE,SAAX,GAAuB,GAAxB,EACGpW,OADH,CACWgW,cADX,EAC2B,GAD3B,EAEG3Q,OAFH,CAEW+Q,SAFX,KAEyB,CAH3B;;;WAOOC,qBAAT,CAA+BF,QAA/B,EAAyC;;QAEnC,CAAC3T,WAASuT,oBAAd,EAAoC;aAC3B,EAAP;;;QAGEO,SAASH,SAAShW,KAAT,CAAe,GAAf,CAAb;QACIoW,KAAJ,EACErG,IADF,EAEEsG,OAFF,EAGEpL,KAHF,EAIEqL,UAJF,EAKExM,CALF,EAMEoH,CANF,EAOEnF,CAPF,EAQEwK,QARF,EASEC,mBATF;QAUIC,iBAAiB,CAACpU,UAAD,CAArB;SACKyH,IAAI,CAAT,EAAYA,IAAIqM,OAAO/V,MAAvB,EAA+B0J,GAA/B,EAAoC;cAC1BqM,OAAOrM,CAAP,EAAUjK,OAAV,CAAkB,MAAlB,EAA0B,EAA1B,EAA8BA,OAA9B,CAAsC,MAAtC,EAA8C,EAA9C,CAAR;UACIuW,MAAMlR,OAAN,CAAc,GAAd,IAAqB,CAAC,CAA1B,EAA6B;;eAEpBkR,MAAMpW,KAAN,CAAY,GAAZ,CAAP;kBACU+P,KAAK,CAAL,CAAV;YACI2G,KAAK3G,KAAK,CAAL,CAAT;YACIuE,UAAUjS,WAASsU,cAAT,CAAwBD,EAAxB,CAAd;YAEE,CAACpC,OAAD,IACC+B,WAAW/B,QAAQsC,QAAR,CAAiBC,WAAjB,MAAkCR,OAFhD,EAGE;;iBAEO,EAAP;;;yBAGe,CAAC/B,OAAD,CAAjB;iBAd2B;;UAiBzB8B,MAAMlR,OAAN,CAAc,GAAd,IAAqB,CAAC,CAA1B,EAA6B;;eAEpBkR,MAAMpW,KAAN,CAAY,GAAZ,CAAP;kBACU+P,KAAK,CAAL,CAAV;YACIkG,YAAYlG,KAAK,CAAL,CAAhB;YACI,CAACsG,OAAL,EAAc;oBACF,GAAV;;;gBAGM,EAAR;qBACa,CAAb;aACKnF,IAAI,CAAT,EAAYA,IAAIuF,eAAerW,MAA/B,EAAuC8Q,GAAvC,EAA4C;cACtCmF,WAAW,GAAf,EAAoB;uBACPX,eAAee,eAAevF,CAAf,CAAf,CAAX;WADF,MAEO;uBACMuF,eAAevF,CAAf,EAAkB0E,oBAAlB,CAAuCS,OAAvC,CAAX;;eAEGtK,IAAI,CAAT,EAAYA,IAAIwK,SAASnW,MAAzB,EAAiC2L,GAAjC,EAAsC;kBAC9BuK,YAAN,IAAsBC,SAASxK,CAAT,CAAtB;;;yBAGa,EAAjB;8BACsB,CAAtB;aACKmF,IAAI,CAAT,EAAYA,IAAIjG,MAAM7K,MAAtB,EAA8B8Q,GAA9B,EAAmC;cAE/BjG,MAAMiG,CAAN,EAAS+E,SAAT,IACAzN,EAAE2B,QAAF,CAAWc,MAAMiG,CAAN,EAAS+E,SAApB,CADA;mBAEShL,MAAMiG,CAAN,CAAT,EAAmB+E,SAAnB,CAHF,EAIE;2BACeO,qBAAf,IAAwCvL,MAAMiG,CAAN,CAAxC;;;iBA7BuB;;;UAmCzB4F,cAAcV,MAAM/D,KAAN,CAAYmD,iBAAZ,CAAlB;UACIsB,WAAJ,EAAiB;kBACLA,YAAY,CAAZ,CAAV;YACIC,WAAWD,YAAY,CAAZ,CAAf;YACIE,eAAeF,YAAY,CAAZ,CAAnB;YACIG,YAAYH,YAAY,CAAZ,CAAhB;YACI,CAACT,OAAL,EAAc;oBACF,GAAV;;;gBAGM,EAAR;qBACa,CAAb;aACKnF,IAAI,CAAT,EAAYA,IAAIuF,eAAerW,MAA/B,EAAuC8Q,GAAvC,EAA4C;cACtCmF,WAAW,GAAf,EAAoB;uBACPX,eAAee,eAAevF,CAAf,CAAf,CAAX;WADF,MAEO;uBACMuF,eAAevF,CAAf,EAAkB0E,oBAAlB,CAAuCS,OAAvC,CAAX;;eAEGtK,IAAI,CAAT,EAAYA,IAAIwK,SAASnW,MAAzB,EAAiC2L,GAAjC,EAAsC;kBAC9BuK,YAAN,IAAsBC,SAASxK,CAAT,CAAtB;;;yBAGa,EAAjB;8BACsB,CAAtB;YACImL,aAAJ,CAvBe;gBAwBPF,YAAR;eACO,GAAL;;4BACkB,uBAAUtR,CAAV,EAAa;qBACpBA,EAAEyR,YAAF,CAAeJ,QAAf,KAA4BE,SAAnC;aADF;;eAIG,GAAL;;4BACkB,uBAAUvR,CAAV,EAAa;qBACpBA,EACJyR,YADI,CACSJ,QADT,EAEJ1E,KAFI,CAEE,IAAIvS,MAAJ,CAAW,QAAQmX,SAAR,GAAoB,KAA/B,CAFF,CAAP;aADF;;eAMG,GAAL;;4BACkB,uBAAUvR,CAAV,EAAa;qBACpBA,EACJyR,YADI,CACSJ,QADT,EAEJ1E,KAFI,CAEE,IAAIvS,MAAJ,CAAW,MAAMmX,SAAN,GAAkB,IAA7B,CAFF,CAAP;aADF;;eAMG,GAAL;;4BACkB,uBAAUvR,CAAV,EAAa;qBACpBA,EAAEyR,YAAF,CAAeJ,QAAf,EAAyB7R,OAAzB,CAAiC+R,SAAjC,MAAgD,CAAvD;aADF;;eAIG,GAAL;;4BACkB,uBAAUvR,CAAV,EAAa;qBAEzBA,EAAEyR,YAAF,CAAeJ,QAAf,EAAyBK,WAAzB,CAAqCH,SAArC,KACAvR,EAAEyR,YAAF,CAAeJ,QAAf,EAAyB3W,MAAzB,GAAkC6W,UAAU7W,MAF9C;aADF;;eAOG,GAAL;;4BACkB,uBAAUsF,CAAV,EAAa;qBACpBA,EAAEyR,YAAF,CAAeJ,QAAf,EAAyB7R,OAAzB,CAAiC+R,SAAjC,IAA8C,CAAC,CAAtD;aADF;;;;4BAMgB,uBAAUvR,CAAV,EAAa;qBACpBA,EAAEyR,YAAF,CAAeJ,QAAf,CAAP;aADF;;yBAIa,EAAjB;8BACsB,CAAtB;aACK7F,IAAI,CAAT,EAAYA,IAAIjG,MAAM7K,MAAtB,EAA8B8Q,GAA9B,EAAmC;cAC7BgG,cAAcjM,MAAMiG,CAAN,CAAd,CAAJ,EAA6B;2BACZsF,qBAAf,IAAwCvL,MAAMiG,CAAN,CAAxC;;;;iBAxEW;;;gBA+EPkF,KAAV;cACQ,EAAR;mBACa,CAAb;WACKlF,IAAI,CAAT,EAAYA,IAAIuF,eAAerW,MAA/B,EAAuC8Q,GAAvC,EAA4C;mBAC/BuF,eAAevF,CAAf,EAAkB0E,oBAAlB,CAAuCS,OAAvC,CAAX;aACKtK,IAAI,CAAT,EAAYA,IAAIwK,SAASnW,MAAzB,EAAiC2L,GAAjC,EAAsC;gBAC9BuK,YAAN,IAAsBC,SAASxK,CAAT,CAAtB;;;uBAGad,KAAjB;;WAEKwL,cAAP;;;SAGK,UAAUY,KAAV,EAAiB;QAClB7O,EAAEoD,SAAF,CAAYyL,KAAZ,CAAJ,EAAwB;aACf,CAACA,KAAD,CAAP;KADF,MAEO,IAAI7O,EAAEgD,QAAF,CAAW6L,KAAX,KAAqB,CAAC7O,EAAEG,WAAF,CAAc0O,MAAMjX,MAApB,CAA1B,EAAuD;aACrDiX,KAAP;KADK,MAEA;aACEnB,sBAAsBzV,IAAtB,CAA2B,IAA3B,EAAiC4W,KAAjC,CAAP;;GANJ;CA/MY,EAAd;;AA0NA7O,EAAE8O,IAAF,GAAS;kBACS,0BAAY;QACtBC,oBAAoB,0DAA0DvX,KAA1D,CACpB,GADoB,CAAxB;QAGEwX,KAAK,EAHP;QAIEC,SAAS,EAJX;MAKE1W,IAAF,CAAOwW,iBAAP,EAA0B,UAAUG,KAAV,EAAiB;WACpClP,EAAEoJ,aAAF,CAAgBvP,WAASsV,GAAzB,EAA8BD,KAA9B,CAAL;UACIF,GAAGpX,MAAP,EAAe;eACNsX,KAAP,IAAgBF,EAAhB;;KAHJ;;WAOOC,MAAP;GAdK;;gBAiBO,sBAAUG,QAAV,EAAoB;QAC5BA,SAASC,MAAT,CAAgB,8BAAhB,MAAoD,CAAxD,EAA2D;aAClD,QAAP;KADF,MAEO,IAAID,SAASC,MAAT,CAAgB,uBAAhB,MAA6C,CAAjD,EAAoD;aAClD,MAAP;KADK,MAEA,IAAID,SAASC,MAAT,CAAgB,wBAAhB,MAA8C,CAAlD,EAAqD;aACnD,OAAP;KADK,MAEA,IAAID,SAASC,MAAT,CAAgB,6BAAhB,MAAmD,CAAvD,EAA0D;aACxD,YAAP;KADK,MAEA;aACE,IAAP;;GA3BG;;cA+BK,oBAAUD,QAAV,EAAoB;QAC1BC,SAASrP,EAAE8O,IAAF,CAAOQ,YAAP,CAAoBF,QAApB,CAAb;QACE9F,QAAQ+F,UAAU,OAAV,GAAoB,GAApB,GAA0B,GADpC;QAEExK,MAAM,EAFR;;QAIIwK,WAAW,IAAf,EAAqB;UACf,gBAAJ,IAAwBA,MAAxB;;UAEIE,UAAUvP,EAAEoJ,aAAF,CAAgBgG,QAAhB,EAA0B9F,KAA1B,CAAd;UACIiG,QAAQ3X,MAAZ,EAAoB;YACd,YAAJ,IAAoB2X,OAApB;;;;WAIG1K,GAAP;GA7CK;;UAgDC,gBAAU2K,UAAV,EAAsB;QACxB,iBAAiBrY,IAAjB,CAAsBqY,UAAtB,KAAqC,YAAYrY,IAAZ,CAAiBqY,UAAjB,CAAzC,EAAuE;aAC9D,eAAP;KADF,MAEO,IAAI,OAAOrY,IAAP,CAAYqY,UAAZ,CAAJ,EAA6B;aAC3B,MAAP;KADK,MAEA,IAAI,OAAOrY,IAAP,CAAYqY,UAAZ,CAAJ,EAA6B;aAC3B,YAAP;KADK,MAEA,IAAI,SAASrY,IAAT,CAAcqY,UAAd,CAAJ,EAA+B;aAC7B,QAAP;KADK,MAEA,IAAI,8BAA8BrY,IAA9B,CAAmCqY,UAAnC,CAAJ,EAAoD;aAClD,YAAP;KADK,MAEA,IAAI,UAAUrY,IAAV,CAAeqY,UAAf,CAAJ,EAAgC;aAC9B,SAAP;KADK,MAEA;aACE,EAAP;;GA9DG;;mBAkEU,yBAAUJ,QAAV,EAAoB;QAC/B5X,QAAQ4X,SAAS5X,KAAT,CAAe,GAAf,CAAZ;QACIA,MAAMI,MAAN,IAAgB,CAApB,EAAuB;aACdJ,MAAM,CAAN,CAAP;;WAEK,EAAP;GAvEK;;cA0EK,sBAAY;WACfwI,EAAE4B,MAAF,CACL5B,EAAE2E,sBAAF,CAAyB;WAClB3E,EAAE8O,IAAF,CAAO9Z,QAAP,GAAkB+B,EADA;gBAEZiJ,EAAE8O,IAAF,CAAO9Z,QAAP,GAAkBqI,OAFN;iBAGZxD,WAASuV,QAHG;yBAIJpP,EAAE8O,IAAF,CAAOW,eAAP,CAAuB5V,WAASuV,QAAhC,CAJI;eAKdpP,EAAE8O,IAAF,CAAOY,MAAP,CAAc3W,SAAd;KALX,CADK,EAQL;oBACgB4F,IAAIiM,QAAJ,CAAa+E,IAD7B;sBAEkBpQ,OAAOT,MAFzB;qBAGiBS,OAAOV,KAHxB;cAIU,KAJV;oBAKgB9J,OAAO6a,WALvB;kBAOI5Z,KAAKqS,MAAL,GAAc7R,QAAd,CAAuB,EAAvB,EAA2ByR,SAA3B,CAAqC,CAArC,EAAwC,EAAxC,IACAjS,KAAKqS,MAAL,GAAc7R,QAAd,CAAuB,EAAvB,EAA2ByR,SAA3B,CAAqC,CAArC,EAAwC,EAAxC,CARJ;YASQjI,EAAEyD,SAAF,KAAgB,IATxB;KARK,CAAP;GA3EK;;qBAiGY,6BAAY;WACtBzD,EAAE4B,MAAF,CACL5B,EAAE2E,sBAAF,CAAyB;WAClB3E,EAAE8O,IAAF,CAAO9Z,QAAP,GAAkB+B,EADA;gBAEbiJ,EAAE8O,IAAF,CAAO9Z,QAAP,GAAkBqI;KAF9B,CADK,CAAP;GAlGK;;gBA0GO,sBAAUwS,IAAV,EAAgB;WACrB7P,EAAE2E,sBAAF,CAAyB;eACrBkL,IADqB;mBAEjBhW,WAASuV,QAFQ;kBAGlBpP,EAAE8O,IAAF,CAAO9Z,QAAP,GAAkBqI,OAHA;mBAIjB2C,EAAE8O,IAAF,CAAO9Z,QAAP,GAAkB+B;KAJ1B,CAAP;GA3GK;;YAmHG,uBAAY;QACd+Y,aAAa,IAAI9a,QAAJ,EAAnB;gCAC4B8a,WAAW7a,SAFnB;QAEb8B,EAFa,yBAEbA,EAFa;QAEV0D,IAFU,yBAEVA,IAFU;QAEJJ,OAFI,yBAEJA,OAFI;;WAGb;UACDtD,GAAGuH,MAAH,GAAYvH,GAAGsD,OAAf,GAAyB,GAAzB,GAA+BtD,GAAGwH,YAAlC,GAAiD,GADhD;eAEI9D,OAAO,GAAP,GAAaJ,OAFjB;sBAGYA;KAHnB;;CAtHJ;;;AA+HA,IAAI0V,4BAA4B,8BAAhC;;AAEA,IAAIC,qBAAqB,mCAAzB;;AAEA,IAAIrF,iBAAiB,SAAjBA,cAAiB,CAAUE,QAAV,EAAoB;MACnCoF,eAAeD,kBAAnB;MACIE,QAAQrF,SAASrT,KAAT,CAAe,GAAf,CAAZ;MACI2Y,MAAMD,MAAMA,MAAMtY,MAAN,GAAe,CAArB,CAAV;MACIuY,IAAIvY,MAAJ,GAAa,CAAb,IAAkBuY,QAAQ,KAA1B,IAAmCA,QAAQ,KAA/C,EAAsD;mBACrCJ,yBAAf;;MAEEnG,UAAUiB,SAAShB,KAAT,CAAeoG,YAAf,CAAd;SACOrG,UAAUA,QAAQ,CAAR,CAAV,GAAuB,EAA9B;CARF;;AAWA,IAAMwG,cAAc,SAAdA,WAAc,CAAUtE,OAAV,EAAmB1T,IAAnB,EAAyB2T,OAAzB,EAAkC;MAChDD,QAAQI,gBAAZ,EAA8B;YACpBA,gBAAR,CAAyB9T,IAAzB,EAA+B2T,OAA/B,EAAwC,KAAxC;GADF,MAEO,IAAID,QAAQuE,WAAZ,EAAyB;YACtBA,WAAR,CAAoB,OAAOjY,IAA3B,EAAiC2T,OAAjC;GADK,MAEA;YACG,OAAO3T,IAAf,IAAuB2T,OAAvB;;CANJ;;AAUA,AAUA,IAAMuE,WAAS,SAATA,MAAS,CAACC,EAAD,EAAQ;MACjB1W,WAAS2W,UAAT,KAAwB,UAA5B,EAAwC;;WAE/B,KAAK,CAAZ;;cAEUpb,MAAZ,EAAoB,MAApB,EAA4Bmb,EAA5B;CALF;;;AASAvQ,EAAE,SAAF,IAAeA,EAAEW,OAAjB;AACAX,EAAE,UAAF,IAAgBA,EAAEgD,QAAlB;AACAhD,EAAE,YAAF,IAAkBA,EAAEgF,UAApB;AACAhF,EAAE,YAAF,IAAkBA,EAAEgG,UAApB;AACAhG,EAAE,aAAF,IAAmBA,EAAE6I,WAArB;AACA7I,EAAE,eAAF,IAAqBA,EAAEiD,aAAvB;AACAjD,EAAE,MAAF,IAAYA,EAAE8O,IAAd;AACA9O,EAAE,MAAF,EAAU,QAAV,IAAsBA,EAAE8O,IAAF,CAAOY,MAA7B;AACA1P,EAAE,MAAF,EAAU,YAAV,IAA0BA,EAAE8O,IAAF,CAAO2B,UAAjC;;;;;;;ACzpDA,AAEA,IAAIC,cACFtb,OAAOsb,WAAP,IACAtb,OAAOub,cADP,IAEAvb,OAAOwb,aAFP,IAGAxb,OAAOyb,iBAJT;;IAMMC;gBACQC,OAAZ,EAAqB;;;;;SACdC,QAAL,GAAgBD,OAAhB;SACKE,QAAL,GAAgB,KAAhB;SACKC,UAAL,GAAkB,KAAlB;SACKC,SAAL,GAAiB,GAAjB;;SAEKC,QAAL,CAAc,YAAM;UACdC,WAAW,MAAKC,eAAL,EAAf;eACSlZ,IAAT,GAAgB,UAAhB;cACQmZ,YAAR,CAAqBF,QAArB;KAHF;SAKKf,MAAL,CAAY,YAAM;UACZe,WAAW,MAAKC,eAAL,EAAf;eACSlZ,IAAT,GAAgB,QAAhB;cACQmZ,YAAR,CAAqBF,QAArB;KAHF;;aAMO,KAAKG,iBAAL,CAAuB/R,IAAvB,CAA4B,IAA5B,CAAP;;;;;wCAGkB;;;;eAETgS,UAAT,CAAoBnM,CAApB,EAAuBoM,CAAvB,EAA0B;eACjBpM,IAAI,CAAJ,IAASoM,IAAI,CAAb,IAAkBpM,IAAIoM,CAAJ,IAAS,CAA3B,GAA+BpM,IAAIoM,CAAnC,GAAuCrQ,SAA9C;;;UAGEsQ,2BAA2B,SAA3BA,wBAA2B,CAACC,MAAD,EAAY;YACrCC,IAAI;yBACSD,OAAOE,aADhB;gBAEAF,OAAOnX,IAFP;oBAGI4D,SAASuT,OAAOG,QAAhB,CAHJ;oBAIIN,WAAWG,OAAOI,WAAlB,EAA+BJ,OAAOK,aAAtC,CAJJ;eAKDR,WAAWG,OAAOM,eAAlB,EAAmCN,OAAOO,iBAA1C,CALC;mBAMGV,WAAWG,OAAOQ,UAAlB,EAA8BR,OAAOS,YAArC,CANH;mBAOGZ,WAAWG,OAAOQ,UAAlB,EAA8BR,OAAOU,SAArC,CAPH;;gBASAb,WAAWG,OAAOW,aAAlB,EAAiCX,OAAOY,YAAxC,CATA;mBAUGf,WAAWG,OAAOa,WAAlB,EAA+Bb,OAAOW,aAAtC,CAVH;mBAWGd,WAAWG,OAAOa,WAAlB,EAA+Bb,OAAOY,YAAtC,CAXH;;gBAaAf,WAAWG,OAAOW,aAAlB,EAAiCX,OAAOY,YAAxC,CAbA;SAAR;;eAgBOX,CAAP;OAjBF;;UAoBMa,iBAAiB,SAAjBA,cAAiB,CAACC,OAAD;eACrBA,QAAQC,GAAR,CAAY,UAACC,IAAD;iBAAUlB,yBAAyBkB,IAAzB,CAAV;SAAZ,CADqB;OAAvB;;UAGIzd,OAAO0d,mBAAX,EAAgC;YACxBC,WAAW,IAAID,mBAAJ,CAAwB,UAACE,IAAD,EAAU;cAC7C;gBACEL,UAAUK,KAAKC,UAAL,EAAd;mBACKjC,QAAL,CAAckC,cAAd,CAA6BR,eAAeC,OAAf,CAA7B;WAFF,CAGE,OAAOzV,CAAP,EAAU;oBACF0D,KAAR,CAAc1D,CAAd;;SALa,CAAjB;iBAQSiW,OAAT,CAAiB;sBAEb,OAAO,KAAKnC,QAAL,CAAc5Y,IAArB,IAA6B,WAA7B,GACI,KAAK4Y,QAAL,CAAc5Y,IADlB,GAEI,CAAC,UAAD;SAJR;OATF,MAeO;eACE,YAAM;cACPua,UAAUjC,YAAY0C,gBAAZ,CAA6B,UAA7B,CAAd;;SADF;;;;;sCAOc;UACZ,CAAC1C,WAAL,EAAkB;eACT,KAAK,CAAZ;;;;eAIOe,UAAT,CAAoBnM,CAApB,EAAuBoM,CAAvB,EAA0B;eACjBpM,IAAI,CAAJ,IAASoM,IAAI,CAAb,IAAkBpM,IAAIoM,CAAJ,IAAS,CAA3B,GAA+BpM,IAAIoM,CAAnC,GAAuCrQ,SAA9C;;;;UAIEuQ,SAASlB,YAAYkB,MAAzB;;UAEIP,WAAW;;kBAEHI,WAAWG,OAAOyB,UAAlB,EAA8BzB,OAAO0B,eAArC,CAFG;kBAGH7B,WAAWG,OAAOa,WAAlB,EAA+Bb,OAAOK,aAAtC,CAHG;aAIRR,WAAWG,OAAOM,eAAlB,EAAmCN,OAAOO,iBAA1C,CAJQ;iBAKJV,WAAWG,OAAOQ,UAAlB,EAA8BR,OAAOS,YAArC,CALI;iBAMJZ,WAAWG,OAAOQ,UAAlB,EAA8BR,OAAO0B,eAArC,CANI;;;cASP7B,WAAWG,OAAOW,aAAlB,EAAiCX,OAAOY,YAAxC,CATO;iBAUJf,WAAWG,OAAOa,WAAlB,EAA+Bb,OAAOW,aAAtC,CAVI;iBAWJd,WAAWG,OAAOa,WAAlB,EAA+Bb,OAAOY,YAAtC,CAXI;;;aAcRf,WAAWG,OAAO2B,WAAlB,EAA+B3B,OAAO4B,UAAtC,CAdQ;mBAeF/B,WAAWG,OAAO6B,YAAlB,EAAgC7B,OAAO8B,cAAvC,CAfE;kBAgBHjC,WAAWG,OAAO6B,YAAlB,EAAgC7B,OAAO4B,UAAvC,CAhBG;;;cAmBP/B,WAAWG,OAAO6B,YAAlB,EAAgC7B,OAAO0B,eAAvC,CAnBO;kBAoBH7B,WACRG,OAAO+B,0BADC,EAER/B,OAAO0B,eAFC,CApBG;qBAwBA7B,WAAWG,OAAOgC,cAAlB,EAAkChC,OAAO0B,eAAzC,CAxBA;cAyBP7B,WAAWG,OAAOW,aAAlB,EAAiCX,OAAO0B,eAAxC,CAzBO;OAAf;;aA4BOjC,QAAP;;;;;;;6BAIO3Z,UAAU;UACbmc,OAAO,IAAX;UACI,KAAK5C,QAAL,KAAkB,IAAtB,EAA4B;eACnB,KAAK,CAAZ;;UAEE6C,QAAQ,IAAZ;;UAEIja,SAAS2W,UAAT,KAAwB,aAA5B,EAA2C;;OAA3C,MAEO,IAAI3W,SAASqS,gBAAb,EAA+B;iBAC3BA,gBAAT,CACE,kBADF,EAEE,YAAY;;SAFd,EAKE,KALF;OADK,MAQA,IAAIrS,SAASwW,WAAb,EAA0B;iBACtBA,WAAT,CAAqB,oBAArB,EAA2C,YAAY;;SAAvD;;;eAKO0D,QAAT,GAAoB;YACdrD,YAAYkB,MAAZ,CAAmBgC,cAAvB,EAAuC;uBACxBE,KAAb;;eAEK5C,UAAL,GAAkB,IAAlB;SAHF,MAIO;kBACG8C,WAAWD,QAAX,EAAqBF,KAAK1C,SAA1B,CAAR;;;;;;;;;8BAMCzZ,UAAU;UACXmc,OAAO,IAAX;UACIC,QAAQ,IAAZ;;UAEIja,SAAS2W,UAAT,KAAwB,UAA5B,EAAwC;;OAAxC,MAEO;oBAEHpb,MADF,EAEE,MAFF,EAGE,YAAY;;SAHd,EAME,KANF;;;eAUO2e,QAAT,GAAoB;YACdrD,YAAYkB,MAAZ,CAAmB6B,YAAvB,EAAqC;uBACtBK,KAAb;;eAEK7C,QAAL,GAAgB,IAAhB;SAHF,MAIO;kBACG+C,WAAWD,QAAX,EAAqBF,KAAK1C,SAA1B,CAAR;;;;;;;;;ACtLD,SAAS8C,WAAT,CAAqBzH,KAArB,EAA4B0H,QAA5B,EAAsC;MACvChX,IAAI,EAAR;OACK,IAAIiX,IAAT,IAAiB3H,KAAjB;MAA0B2H,IAAF,IAAU3H,MAAM2H,IAAN,CAAV;GAFmB;IAIzC3R,MAAF,GAAWtF,EAAEkX,aAAF,GAAkBF,QAA7B;SACOhX,CAAP;;;ACRF;;;;;;AAMA,AAEA,IAAImX,SAAS,CAAC,MAAD,EAAS,SAAT,EAAoB,SAApB,EAA+B,OAA/B,EAAwC,kBAAxC,EAA4D,OAA5D,CAAb;AACA,IAAIC,YAAYD,OAAO,CAAP,CAAhB;IACIE,eAAeF,OAAO,CAAP,CADnB;IAIIG,wBAAwBH,OAAO,CAAP,CAJ5B;;AAQA,IACI/d,YAAY,WADhB;;AAIA;;AAKA;;AAKA,AAIA,SAASme,cAAT,CAAwBC,GAAxB,EAA6B;WAClBA,IAAIC,OAAJ,KAAgBD,IAAIC,OAAJ,GAAc9a,SAAS+a,aAAT,CAAuB,GAAvB,CAA9B,CAAP;;;AAGJ,SAASC,eAAT,CAAyBH,GAAzB,EAA8Bja,IAA9B,EAAoC;QAC5ByZ,WAAWQ,IAAII,QAAJ,EAAf;QACIpd,WAAW,OAAO+C,IAAP,GAAc,GAA7B;QACI+R,QAAQyH,YAAY,EAAC7b,MAAMqC,IAAP,EAAZ,EAA0ByZ,QAA1B,CAAZ;aACSxc,QAAT,KAAsBwc,SAASxc,QAAT,EAAmB8U,KAAnB,CAAtB;QACIuI,GAAJ;QACG,OAAOC,KAAP,KAAkB,UAArB,EAAiC;cACvB,IAAIA,KAAJ,CAAUva,IAAV,EAAe,EAACwa,SAAS,KAAV,EAAf,CAAN;KADJ,MAEO;;cAEGpb,SAASqb,WAAT,CAAqB,OAArB,CAAN;YACIC,SAAJ,CAAc1a,IAAd,EAAoB,KAApB,EAA2B,IAA3B;;mBAEWia,GAAf,EAAoBU,aAApB,CAAkCL,GAAlC;;;AAIJ,SAASM,OAAT,CAAiBX,GAAjB,EAAsB;SACbA,GAAL,GAAWA,GAAX;SACKR,QAAL,GAAgBQ,IAAII,QAAJ,EAAhB;;;AAGJO,QAAQ/e,SAAR,IAAqBD,OAAOif,MAAP,CAAc;aACtB,SAASC,OAAT,CAAiBC,QAAjB,EAA2B;YAC5BtB,WAAW,KAAKA,QAApB;YACIQ,MAAM,KAAKA,GAAf;iBACSlE,UAAT,GAAsB,CAAtB;YACIiF,SAAJ,GAAgBD,SAASE,OAAzB;iBACSF,QAAT,GAAoBtB,SAASyB,YAAT,GAAwBH,SAASA,QAArD;iBACSI,UAAT,GAAsBJ,SAASI,UAA/B;iBACSC,MAAT,GAAkBL,SAASK,MAA3B;wBACgBnB,GAAhB,EAAqBF,qBAArB;wBACgBE,GAAhB,EAAqBJ,SAArB;wBACgBI,GAAhB,EAAqBH,YAArB;KAX2B;YAavB,SAASuB,MAAT,CAAgBlV,KAAhB,EAAuB;aACtBsT,QAAL,CAAc2B,MAAd,GAAuB,CAAvB;wBACgB,KAAKnB,GAArB,EAA0B9T,MAAMxI,IAAhC;wBACgB,KAAKsc,GAArB,EAA0BH,YAA1B;;CAhBa,CAArB;;AAoBA,SAASlI,WAAT,CAAqBhG,IAArB,EAA2B;aACd0P,GAAT,CAAarB,GAAb,EAAkB;gBACNzc,IAAR,CAAa,IAAb,EAAmByc,GAAnB;;;QAGApe,SAAJ,IAAiBD,OAAOif,MAAP,CAAcD,QAAQ/e,SAAR,CAAd,CAAjB;QACIA,SAAJ,EAAe+P,IAAf,GAAsBA,IAAtB;WACO0P,GAAP;;;AAGJ,IAAIC,iBAAiB3J,YAAY,UAAU4J,EAAV,EAAc;QACvCvB,MAAM,KAAKA,GAAf;SACKuB,MAAMvB,IAAIwB,MAAf;QACIC,eAAJ,GAAsBF,GAAGE,eAAzB;QACIC,IAAJ,CAASH,GAAGI,MAAZ,EAAoBJ,GAAG5M,GAAvB,EAA4B4M,GAAGK,KAAH,KAAa,KAAzC,EAAgDL,GAAGM,IAAnD,EAAyDN,GAAGO,QAA5D;SACK,IAAIxe,GAAT,IAAgBie,GAAGP,OAAnB,EAA4B;YACpBe,gBAAJ,CAAqBze,GAArB,EAA0Bie,GAAGP,OAAH,CAAW1d,GAAX,CAA1B;;QAEA0e,IAAJ,CAAST,GAAGU,IAAZ;CARiB,CAArB;;AAWA,IAAIC,kBAAkBvK,YAAY,UAAUmJ,QAAV,EAAoB;SAC7CD,OAAL,CAAaC,QAAb;CADkB,CAAtB;;AAIA,IAAIqB,eAAexK,YAAY,UAAUzL,KAAV,EAAiB;SACvCkV,MAAL,CAAYlV,KAAZ;CADe,CAAnB;;;;;;;;;;ICxGMkW;sBACQ/F,OAAZ,EAAqB;;;SACdC,QAAL,GAAgBD,OAAhB;SACKta,IAAL;;;;;gCAGUsgB,QAAQ;UACdC,MAAMD,OAAOE,MAAP,IAAiBF,OAAOG,YAAlC,CADkB;UAEdC,MAAMJ,OAAOK,IAAP,IAAeL,OAAOM,UAAhC,CAFkB;UAGdC,UAAUP,OAAOO,OAArB;UACI7c,OAAOsc,OAAOtc,IAAlB;;cAEQ2F,GAAR,CAAY,0BAAZ,EAAwC2W,MAAxC;;UAEMQ,KARY,GAQFR,MARE,CAQZQ,KARY;;UASdA,KAAJ,EAAW;gBACDnX,GAAR,CAAY,kCAAZ,EAAgD2W,MAAhD;YACIS,WAAWD,MAAM1N,KAAN,CAAY,mBAAZ,CAAf;YACI4N,gBAAgBD,WAAWA,SAAS,CAAT,CAAX,GAAyB,EAA7C;YACIE,cAAc,sBAAlB;;YAEIC,cAAc,EAAlB;YACID,YAAYvgB,IAAZ,CAAiBsgB,aAAjB,CAAJ,EAAqC;wBACrBA,cAAc5N,KAAd,CAAoB6N,WAApB,EAAiC,CAAjC,CAAd;;;YAGEE,WAAW,IAAf;YACIC,WAAW,IAAf;YACIC,WAAWL,cAAc5N,KAAd,CAAoB,cAApB,CAAf;YACIiO,YAAYA,SAASlgB,MAAT,IAAmB,CAAnC,EAAsC;yCACXkgB,QADW;;kBAAA;kBAAA;;;;eAK/B;mBACIP,KADJ;eAEAQ,OAAOf,OAAOY,QAAd,CAFA;eAGAG,OAAOZ,OAAOU,QAAd,CAHA;0BAAA;oBAAA;;SAAP;;;aAUK;gBAAA;gBAAA;wBAAA;;OAAP;;;;2BAQK;;;UACDG,iBAAiB5iB,OAAO6iB,OAA5B;aACOA,OAAP,GAAiB,YAAY;0CAARzX,GAAQ;aAAA;;;YACtB0X,YADsB,GACyC1X,GADzC;YACR2X,SADQ,GACyC3X,GADzC;YACG6W,UADH,GACyC7W,GADzC;YACe0W,YADf,GACyC1W,GADzC;YAC6B4X,QAD7B,GACyC5X,GADzC;;;YAGvB6X,YAAY,MAAKC,WAAL,CAAiBF,QAAjB,CAAhB;kBACUG,aAAV,GAA0BL,YAA1B;kBACUM,UAAV,GAAuBL,SAAvB;kBACUM,WAAV,GAAwBpB,UAAxB;kBACUqB,aAAV,GAA0BxB,YAA1B;kBACU9e,IAAV,GAAiB,SAAjB;cACK4Y,QAAL,CAActZ,QAAd,CAAuB2gB,SAAvB;0BACkBL,eAAe3X,KAAf,CAAqBjL,MAArB,EAA6BoL,GAA7B,CAAlB;OAVF;;UAaImY,8BAA8BvjB,OAAOwjB,oBAAzC;aACOA,oBAAP,GAA8B,YAAY;2CAARpY,GAAQ;aAAA;;;YACpCtD,IAAIsD,IAAI,CAAJ,CAAR;YACIqY,SAAS3b,EAAE2b,MAAf;cACK7H,QAAL,CAActZ,QAAd,CAAuB;gBACfwF,EAAE9E,IAAF,IAAU,oBADK;;SAAvB;uCAKEugB,4BAA4BtY,KAA5B,CAAkCjL,MAAlC,EAA0CoL,GAA1C,CADF;OAPF;;;;;;;;;;;;;;;;;;AC/DJ,IAIMsY;qBACU;;;SACPriB,IAAL;;;;;2BAGK;;;;;;;;;;;UAWCsiB,KAAK,IAAIjI,IAAJ,CAAS;sBACJ,sBAAC5Z,IAAD,EAAU;kBACdkJ,GAAR,CAAY,GAAZ;kBACQA,GAAR,CAAY,cAAZ,EAA4BlJ,IAA5B;SAHgB;wBAKF,wBAACA,IAAD,EAAU;OALjB,CAAX;;;;;;;;;;;;;;AAiBJ,IAAI4hB,OAAJ;;;;;;;;;;"}